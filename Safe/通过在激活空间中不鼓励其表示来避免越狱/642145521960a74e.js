;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d9012e92-e111-4ac0-e11e-935162a3a4b9")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,581298,(e,t,n)=>{"use strict";var o={linear:function(e,t,n,o){return(n-t)*e/o+t},easeInQuad:function(e,t,n,o){return(n-t)*(e/=o)*e+t},easeOutQuad:function(e,t,n,o){return-(n-t)*(e/=o)*(e-2)+t},easeInOutQuad:function(e,t,n,o){var i=n-t;return(e/=o/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,o){return(n-t)*(e/=o)*e*e+t},easeOutCubic:function(e,t,n,o){return(n-t)*((e=e/o-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,o){var i=n-t;return(e/=o/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,o){return(n-t)*(e/=o)*e*e*e+t},easeOutQuart:function(e,t,n,o){return-(n-t)*((e=e/o-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,o){var i=n-t;return(e/=o/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,o){return(n-t)*(e/=o)*e*e*e*e+t},easeOutQuint:function(e,t,n,o){return(n-t)*((e=e/o-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,o){var i=n-t;return(e/=o/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,o){var i=n-t;return-i*Math.cos(e/o*(Math.PI/2))+i+t},easeOutSine:function(e,t,n,o){return(n-t)*Math.sin(e/o*(Math.PI/2))+t},easeInOutSine:function(e,t,n,o){return-(n-t)/2*(Math.cos(Math.PI*e/o)-1)+t},easeInExpo:function(e,t,n,o){return 0==e?t:(n-t)*Math.pow(2,10*(e/o-1))+t},easeOutExpo:function(e,t,n,o){var i=n-t;return e==o?t+i:i*(-Math.pow(2,-10*e/o)+1)+t},easeInOutExpo:function(e,t,n,o){var i=n-t;return 0===e?t:e===o?t+i:(e/=o/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,o){return-(n-t)*(Math.sqrt(1-(e/=o)*e)-1)+t},easeOutCirc:function(e,t,n,o){return(n-t)*Math.sqrt(1-(e=e/o-1)*e)+t},easeInOutCirc:function(e,t,n,o){var i=n-t;return(e/=o/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,o){var i,s,a,r=n-t;return(a=1.70158,s=0,i=r,0===e)?t:1==(e/=o)?t+r:(s||(s=.3*o),i<Math.abs(r)?(i=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/i),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e*o-a)/s))+t)},easeOutElastic:function(e,t,n,o){var i,s,a,r=n-t;return(a=1.70158,s=0,i=r,0===e)?t:1==(e/=o)?t+r:(s||(s=.3*o),i<Math.abs(r)?(i=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e*o-a)/s)+r+t)},easeInOutElastic:function(e,t,n,o){var i,s,a,r=n-t;return(a=1.70158,s=0,i=r,0===e)?t:2==(e/=o/2)?t+r:(s||(s=.3*1.5*o),i<Math.abs(r)?(i=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/i),e<1)?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e*o-a)/s))+t:i*Math.pow(2,-10*(e-=1))*Math.sin(2*Math.PI*(e*o-a)/s)*.5+r+t},easeInBack:function(e,t,n,o,i){return void 0===i&&(i=1.70158),(n-t)*(e/=o)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,o,i){return void 0===i&&(i=1.70158),(n-t)*((e=e/o-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,o,i){var s=n-t;return(void 0===i&&(i=1.70158),(e/=o/2)<1)?s/2*(e*e*(((i*=1.525)+1)*e-i))+t:s/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},easeInBounce:function(e,t,n,i){var s,a=n-t;return s=o.easeOutBounce(i-e,0,a,i),a-s+t},easeOutBounce:function(e,t,n,o){var i=n-t;return(e/=o)<1/2.75?7.5625*e*e*i+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,i){var s=n-t;return e<i/2?.5*o.easeInBounce(2*e,0,s,i)+t:.5*o.easeOutBounce(2*e-i,0,s,i)+.5*s+t}};t.exports=o},333359,e=>{"use strict";var t,n,o,i,s=e.i(843476),a=e.i(271645),r=e.i(538794),l=e.i(182584),d=e.i(566721),c=e.i(530841),m=e.i(96009),p=e.i(995669),u=e.i(161517),h=e.i(552275),g=e.i(935132),f=e.i(343794),x=e.i(773736),y=e.i(725788),v=e.i(164783),b=e.i(338552),w=e.i(600723),C=e.i(588086),j=e.i(946217),S=e.i(644169),k=e.i(791434),I=e.i(204597),N=e.i(87154),T=e.i(666462),P=e.i(692926),A=e.i(994034),B=e.i(318201),R=e.i(791440),L=e.i(224931),F=e.i(692436),_=e.i(417222),W=e.i(879809),M=e.i(79732),O=e.i(429329),E=e.i(813292),D=e.i(110601),H=e.i(116324),U=e.i(671396),z=e.i(229720);let q=(0,O.defineStyles)("PostsBottomBar",e=>({headroom:{"& .headroom":{bottom:0,top:"auto",left:0,right:0,zIndex:e.zIndexes.ultrafeedBottomBar},"& .headroom--unfixed":{position:"relative",transform:"translateY(0)"},"& .headroom--scrolled":{transition:"transform 200ms ease-in-out"},"& .headroom--unpinned":{position:"fixed",transform:"translateY(100%)"},"& .headroom--pinned":{position:"fixed",transform:"translateY(0%)"},"body.t3a-sticky-player-visible & .headroom":{bottom:"var(--header-height)"}},root:{height:"var(--header-height)",opacity:.95,backgroundColor:e.palette.background.pageActiveAreaBackground,boxShadow:"0 -2px 8px ".concat(e.palette.greyAlpha(.1)),display:"flex",alignItems:"center",justifyContent:"space-around",[e.breakpoints.up("sm")]:{display:"none"},"@media print":{display:"none"}},button:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4px 10px",cursor:"pointer",borderRadius:4,transition:"background-color 0.2s ease-in-out","&:hover":{backgroundColor:e.palette.grey[200]}},icon:{width:28,height:28,color:e.palette.grey[400]},backArrow:{transform:"rotate(180deg)"},upArrow:{transform:"rotate(-90deg)"},commentsButton:{position:"relative",top:2,display:"flex",alignItems:"center",justifyContent:"center"},commentIcon:{width:34,height:34,color:e.palette.grey[400]},commentCount:{position:"absolute",right:"50%",top:"40%",transform:"translate(50%, -50%)",color:e.palette.text.alwaysWhite,fontVariantNumeric:"lining-nums",...e.typography.commentStyle,fontSize:16},actionsButton:{display:"flex",alignItems:"center",justifyContent:"center"},actionsIcon:{fontSize:36,color:e.palette.grey[400]}})),V=()=>{var e,t;let n=(0,M.useStyles)(q),{captureEvent:o}=(0,u.useTracking)(),i=(0,v.usePostsPageContext)(),a=null!=(t=null!=(e=null==i?void 0:i.fullPost)?e:null==i?void 0:i.postPreload)?t:null;return(0,s.jsx)(u.AnalyticsContext,{pageElementContext:"postsBottomBar",children:(0,s.jsx)(H.default,{disableInlineStyles:!0,downTolerance:1,upTolerance:1,height:56,className:n.headroom,pinStart:-999999,children:(0,s.jsxs)("div",{className:n.root,children:[(0,s.jsx)(D.default,{title:"Back",placement:"top",disabledOnMobile:!0,children:(0,s.jsx)("div",{className:n.button,onClick:()=>{o("postsBottomBarClicked",{button:"back"}),window.history.back()},children:(0,s.jsx)(E.default,{icon:"ArrowForward",className:(0,f.default)(n.icon,n.backArrow)})})}),(0,s.jsx)(D.default,{title:"Scroll to top",placement:"top",disabledOnMobile:!0,children:(0,s.jsx)("div",{className:n.button,onClick:()=>{o("postsBottomBarClicked",{button:"scrollToTop"}),window.scrollTo({top:0,behavior:"smooth"})},children:(0,s.jsx)(E.default,{icon:"ArrowForward",className:(0,f.default)(n.icon,n.upArrow)})})}),(0,s.jsx)(D.default,{title:"Comments",placement:"top",disabledOnMobile:!0,children:(0,s.jsx)("div",{className:n.button,onClick:()=>{o("postsBottomBarClicked",{button:"comments"});let e=document.getElementById("comments");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},children:(0,s.jsxs)("div",{className:n.commentsButton,children:[(0,s.jsx)(z.default,{className:n.commentIcon}),!!(null==a?void 0:a.commentCount)&&(0,s.jsx)("div",{className:n.commentCount,children:a.commentCount})]})})}),a&&(0,s.jsx)("div",{className:n.actionsButton,children:(0,s.jsx)(U.default,{post:a,flip:!0,autoPlace:!0,iconClassName:n.actionsIcon})})]})})})};var G=e.i(618354),Q=e.i(457918),Y=e.i(446638),$=e.i(695310),K=e.i(783473),X=e.i(733361),Z=e.i(504280),J=e.i(946271);e.i(813868);var ee=e.i(122756);let et=(0,ee.gql)("\n  query multiCommentReviewPillContainerQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentWithRepliesFragment\n      }\n      totalCount\n    }\n  }\n"),en=(0,O.defineStyles)("ReviewPillContainer",e=>({root:{paddingTop:24,display:"flex",gap:"8px",...e.typography.body2,fontSize:"1.1rem",flexWrap:"wrap"},review:{cursor:"pointer",display:"flex",padding:"3px 10px 4px 10px",borderRadius:"3px",backgroundColor:e.palette.panelBackground.reviewGold,gap:"7px",whiteSpace:"nowrap",overflow:"hidden",position:"relative",zIndex:1,color:e.palette.text.alwaysWhite},reviewPreviewContainer:{paddingTop:8,minHeight:0},reviewPreview:{...e.typography.commentStyle,transition:"opacity 0.2s ease-in-out",backgroundColor:e.palette.background.pageActiveAreaBackground,border:"1px solid ".concat(e.palette.panelBackground.reviewGold),padding:"8px",width:"650px",maxWidth:"70vw",whiteSpace:"normal",textAlign:"left",borderRadius:"3px",marginLeft:"auto",marginRight:"auto",overflowY:"scroll",...Y.hideScrollBars,maxHeight:"100%"},reviewMeta:{display:"flex",...e.typography.body2,gap:"8px",alignItems:"center"},reviewPreviewYear:{fontSize:"1rem",color:e.palette.primary.dark,fontStyle:"italic"},reviewerName:{marginLeft:-3}})),eo=e=>{let{review:t}=e,n=(0,M.useStyles)(en);return(0,s.jsx)("div",{className:n.reviewPreviewContainer,children:(0,s.jsxs)("div",{className:n.reviewPreview,children:[(0,s.jsxs)("div",{className:n.reviewMeta,children:[(0,s.jsx)("div",{className:n.reviewerName,children:(0,s.jsx)($.default,{user:t.user})}),(0,s.jsx)(X.default,{document:t,collectionName:"Comments"}),(0,s.jsxs)("span",{className:n.reviewPreviewYear,children:["Review for ",t.reviewingForReview," Review"]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(K.default,{comment:t})})]})})},ei=e=>{var t;let{postId:n}=e,o=(0,M.useStyles)(en),{data:i}=(0,J.useQuery)(et,{variables:{selector:{reviews:{postId:n,minimumKarma:5}},limit:5,enableTotal:!1},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),a=null==i||null==(t=i.comments)?void 0:t.results;return(null==a?void 0:a.length)?(0,s.jsx)(u.AnalyticsContext,{pageElementContext:"reviewPillContainer",children:(0,s.jsx)("div",{className:o.root,children:null==a?void 0:a.map(e=>(0,s.jsx)(D.default,{title:(0,s.jsx)(eo,{review:e}),tooltip:!1,placement:"bottom-start",flip:!1,clickable:!0,children:(0,s.jsx)(Q.HashLink,{to:"#".concat(e._id),children:(0,s.jsxs)("div",{className:o.review,children:["Review by",(0,s.jsx)("div",{className:o.reviewerName,children:(0,s.jsx)(Z.default,{noTooltip:!0,user:e.user,simple:!0})})]})},e._id)},e._id))})}):null};var es=e.i(480768),ea=e.i(159211),er=e.i(230394),el=e.i(672586),ed=e.i(497957),ec=e.i(521472),em=e.i(602534),ep=e.i(848980),eu=e.i(163253),eh=e.i(792e3),eg=e.i(823876),ef=e.i(693062),ex=e.i(900174),ey=e.i(710970),ev=e.i(716512);let eb=(0,r.registerComponent)("LWPostsPageTopHeaderVote",e=>{let{post:t,votingSystem:n,classes:o}=e,i=(0,L.useVote)(t,"Posts",n),{fail:a,reason:r}=(0,ef.useVoteButtonsDisabled)(),l=!a,d="bottom",c=(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"".concat(i.voteCount," ").concat(1===i.voteCount?"vote":"votes")}),t.af&&!(0,g.isAF)()&&(0,s.jsx)("div",{children:(0,s.jsxs)("em",{children:[t.afBaseScore," karma on AlignmentForum"]})})]});return(0,s.jsxs)("div",{className:o.voteBlockHorizontal,children:[(0,s.jsx)(ex.TooltipSpan,{title:null!=r?r:"Click-and-hold for strong vote (click twice on mobile)",placement:d,styling:"tooltip",distance:16,popperClassName:o.tooltip,children:(0,s.jsx)("div",{className:o.upvoteHorizontal,children:(0,s.jsx)(ey.default,{orientation:"up",color:"secondary",upOrDown:"Upvote",enabled:l,solidArrow:!0,...i})})}),(0,s.jsx)("div",{className:o.voteScoresHorizontal,children:(0,s.jsx)(ex.TooltipSpan,{title:c,placement:d,styling:"tooltip",distance:16,popperClassName:o.tooltip,children:(0,s.jsx)("div",{children:(0,s.jsx)(ev.Typography,{variant:"headline",className:o.voteScore,children:i.baseScore})})})}),(0,s.jsx)(ex.TooltipSpan,{title:null!=r?r:"Click-and-hold for strong vote (click twice on mobile)",placement:d,styling:"tooltip",distance:16,popperClassName:o.tooltip,children:(0,s.jsx)("div",{className:o.downvoteHorizontal,children:(0,s.jsx)(ey.default,{orientation:"down",color:"error",upOrDown:"Downvote",enabled:l,solidArrow:!0,...i})})})]})},{styles:e=>({voteBlockHorizontal:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",opacity:.76,borderRadius:4},upvoteHorizontal:{marginBottom:2,"& .VoteArrowIconSolid-root":{color:e.palette.grey[800]}},downvoteHorizontal:{"& .VoteArrowIconSolid-root":{color:e.palette.grey[800]}},voteScoresHorizontal:{margin:e.isLW?"-2px 8px":"-4px 8px"},voteScore:{color:e.palette.grey[600],fontFamily:e.palette.fonts.sansSerifStack,position:"relative",zIndex:e.zIndexes.postsVote,fontSize:"1rem",fontVariantNumeric:"lining-nums"},tooltip:{color:e.palette.grey[500],fontSize:"1rem",backgroundColor:e.palette.panelBackground.default,transition:"opacity 150ms cubic-bezier(0.4, 0, 1, 1) 0ms",marginLeft:0}})});var ew=e.i(533538);let eC=(0,r.registerComponent)("LWPostsPageHeaderTopRight",e=>{var t;let{classes:n,post:o,toggleEmbeddedPlayer:i,showEmbeddedPlayer:a,higherContrast:r,annualReviewMarketInfo:l}=e,d=(0,F.getVotingSystemByName)(null!=(t=o.votingSystem)?t:"default");return(0,s.jsxs)("div",{className:n.root,children:[!o.shortform&&(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"tagHeader",children:(0,s.jsx)("div",{className:(0,f.default)(n.tagList,r&&n.darkerOpacity),children:(0,s.jsx)(eg.default,{post:o,hideScore:!0,useAltAddTagButton:!0,align:"right",noBackground:!0,neverCoreStyling:!0,tagRight:!1,annualReviewMarketInfo:l})})}),!o.shortform&&(0,T.postHasAudioPlayer)(o)&&(0,s.jsx)("div",{className:(0,f.default)(n.audioToggle,r&&n.darkerOpacity),children:(0,s.jsx)(ew.default,{post:o,toggleEmbeddedPlayer:i,showEmbeddedPlayer:a})}),!o.shortform&&(0,s.jsx)("div",{className:n.vote,children:(0,s.jsx)(eb,{post:o,votingSystem:d})}),(0,s.jsx)(U.default,{post:o,className:(0,f.default)(n.postActionsButton,o.shortform&&n.postActionsButtonShortform),flip:!0})]})},{styles:e=>({root:{display:"flex",flexWrap:"nowrap",alignItems:"center",columnGap:8,[e.breakpoints.down("sm")]:{top:8,right:8},zIndex:100},vote:{display:"flex",flexDirection:"row-reverse",[e.breakpoints.down("xs")]:{display:"none"}},postActionsButton:{display:"flex",alignItems:"center",opacity:.3},postActionsButtonShortform:{marginTop:12,marginRight:8},tagList:{marginTop:12,marginBottom:12,opacity:.5,[e.breakpoints.down("xs")]:{display:"none"}},audioToggle:{opacity:.55,display:"flex","@media print":{display:"none"}},darkerOpacity:{opacity:.7}})});var ej=e.i(897096);let eS=(0,r.registerComponent)("AlignmentCrosspostLink",e=>{let{post:t}=e;return t.af&&!(0,g.isAF)()?(0,s.jsx)(D.default,{title:(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["This is an alignment forum post. ",(0,s.jsx)("br",{}),"May contain more technical jargon than usual."]}),(0,s.jsxs)("p",{children:[t.afBaseScore," Î© karma"]})]}),children:(0,s.jsx)("a",{href:"https://alignmentforum.org/posts/".concat(t._id,"/").concat(t.slug),children:"AI Alignment Forum"})}):null});var ek=e.i(960493),eI=e.i(255768),eN=e.i(401014);let eT=(0,O.defineStyles)("LWCommentCount",e=>({root:{display:"flex",alignItems:"center",color:e.palette.text.dim3},comments:{...e.typography.body2,...e.typography.commentStyle,color:e.palette.grey[500],display:"flex",alignItems:"center",marginRight:16},commentsIcon:{fontSize:20,marginRight:8,color:e.palette.grey[500],position:"relative",top:1},"@font-face":{fontFamily:"ETBookBold",src:"url('https://res.cloudinary.com/lesswrong-2-0/raw/upload/v1504470690/et-book-bold-line-figures_piiabg.woff') format('woff')"},answerIcon:{fontSize:24,fontFamily:"ETBookBold",fontWeight:900,marginRight:7,color:e.palette.text.dim3},commentsLabel:{marginLeft:6},wideClickTarget:{width:"100%"},rowOpacity:{opacity:0,transition:"opacity 0.3s ease-in-out"}})),eP=e=>{let{answerCount:t,commentCount:n,label:o=!0}=e,i=(0,M.useStyles)(eT);return(0,s.jsxs)("div",{className:i.root,children:["number"==typeof t&&(0,s.jsxs)(eN.CommentsLink,{anchor:"#answers",className:i.comments,children:[(0,s.jsx)("div",{className:i.answerIcon,children:"A"}),t]}),(0,s.jsxs)(eN.CommentsLink,{anchor:"#comments",className:(0,f.default)(i.comments,i.wideClickTarget),children:[(0,s.jsx)(E.default,{icon:"Comment",className:i.commentsIcon}),n,"number"!=typeof t&&o&&(0,s.jsx)("span",{className:(0,f.default)(i.commentsLabel,eI.HOVER_CLASSNAME,i.rowOpacity),children:"Comments"})]})]})};var eA=e.i(824083),eB=e.i(656702);let eR=(0,r.registerComponent)("LWPostsPageHeader",e=>{var t,n,o,i;let a,r,{post:d,showEmbeddedPlayer:c,toggleEmbeddedPlayer:m,classes:p,dialogueResponses:h,answerCount:g,annualReviewMarketInfo:x,showSplashPageHeader:y}=e,v="feed"in d?d.feed:null;if(null==v?void 0:v.url){let e;({hostname:a,protocol:e}=(0,l.parseUnsafeUrl)(v.url)),r="".concat(e,"//").concat(a)}let b="version"in d&&(0,G.extractVersionsFromSemver)(d.version).major>1,w=(null==(t=d.fmCrosspost)?void 0:t.isCrosspost)&&!d.fmCrosspost.hostedHere&&(0,s.jsx)(ec.default,{post:d}),{isLinkpost:C,linkpostDomain:j}=(0,l.detectLinkpost)(d,a),S=(0,s.jsxs)("div",{children:["View the original at:",(0,s.jsx)("br",{}),d.url]}),k=C&&j&&(null!=(i=null==(n=d.contents)?void 0:n.wordCount)?i:0)>=eB.BOOKUI_LINKPOST_WORDCOUNT_THRESHOLD?(0,s.jsx)(D.default,{title:S,children:(0,s.jsxs)("a",{href:(0,l.postGetLink)(d),target:(0,l.postGetLinkTarget)(d),children:["Linkpost from ",j]})}):null,I=d.title.length>60?p.splashPageTitleLong:p.splashPageTitle,N="reviewWinner"in d&&(null==(o=d.reviewWinner)?void 0:o.reviewYear);return(0,s.jsxs)("div",{className:(0,f.default)(p.root,{[p.eventHeader]:d.isEvent,[p.rootWithAudioPlayer]:!!c},{[p.rootWithSplashPageHeader]:y}),children:[d.group&&(0,s.jsx)(em.default,{post:d,documentId:d.group._id}),(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"topSequenceNavigation",children:"sequence"in d&&!!d.sequence&&(0,s.jsx)("div",{className:p.sequenceNav,children:(0,s.jsx)(es.default,{post:d,blackText:y})})}),y&&!("sequence"in d&&d.sequence)&&(0,s.jsxs)(ea.Link,{to:"/bestoflesswrong?year=".concat(N,"&category=all"),className:p.bestOfLessWrong,children:["Best of LessWrong ",N]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:p.topRight,children:(0,s.jsx)(eC,{post:d,toggleEmbeddedPlayer:m,showEmbeddedPlayer:c,annualReviewMarketInfo:x})}),d&&(0,s.jsx)("span",{className:p.audioPlayerWrapper,children:(0,s.jsx)(T.default,{showEmbeddedPlayer:!!c,post:d})})]}),(0,s.jsxs)("div",{className:(0,f.default)(p.titleSection,{[p.titleSectionWithSplashPageHeader]:y}),children:[(0,s.jsxs)("div",{className:p.title,children:[(0,s.jsx)(er.default,{post:d,className:y?I:void 0}),(0,s.jsxs)("div",{className:p.authorAndSecondaryInfo,children:[(0,s.jsx)("div",{className:p.authorInfo,children:(0,s.jsx)(el.default,{post:d,pageSectionContext:"post_header"})}),w,!d.isEvent&&(0,s.jsx)("div",{className:p.date,children:(0,s.jsx)(ed.default,{post:d,hasMajorRevision:b})}),v&&v.user&&(0,s.jsx)(D.default,{title:"Crossposted from ".concat(a),className:p.feedName,children:(0,s.jsx)("a",{href:r,children:v.nickname})}),(0,s.jsx)(eS,{post:d}),k,d.isEvent&&(0,s.jsx)(eh.default,{document:d,noMargin:!0}),(0,s.jsx)(eu.default,{post:d,label:"Add to calendar",hideTooltip:!0}),(0,s.jsxs)("div",{className:p.mobileButtons,children:[(0,s.jsx)("div",{className:p.readTime,children:(0,s.jsx)(ek.default,{post:d,dialogueResponses:h})}),(0,s.jsx)(eP,{answerCount:g,commentCount:d.commentCount,label:!1}),(0,s.jsx)("div",{className:p.audioToggle,children:(0,s.jsx)(ew.default,{post:d,toggleEmbeddedPlayer:m,showEmbeddedPlayer:c})}),(0,s.jsx)(U.default,{post:d,flip:!0})]})]})]}),(0,s.jsx)("div",{className:p.mobileHeaderVote,children:(0,s.jsx)(ej.default,{post:d})})]}),d.isEvent&&(0,s.jsx)("div",{className:p.eventData,children:(0,s.jsx)(ep.default,{post:d})}),(0,s.jsx)(eA.SuspenseWrapper,{name:"ReviewPillContainer",children:(0,s.jsx)(ei,{postId:d._id})})]})},{styles:e=>({root:{paddingTop:110,marginBottom:96,[e.breakpoints.down("xs")]:{paddingTop:16,marginBottom:38}},rootWithAudioPlayer:{[e.breakpoints.down("sm")]:{paddingTop:62},[e.breakpoints.down("xs")]:{paddingTop:16}},eventHeader:{marginBottom:0},authorAndSecondaryInfo:{display:"flex",alignItems:"baseline",columnGap:20,...e.typography.commentStyle,flexWrap:"wrap",color:e.palette.text.dim3,marginTop:12},authorInfo:{maxWidth:"calc(100% - 60px)",[e.breakpoints.down("xs")]:{width:"100%",marginBottom:8,fontSize:e.typography.body2.fontSize}},feedName:{fontSize:e.typography.body2.fontSize,[e.breakpoints.down("sm")]:{display:"none"}},topRight:{position:"absolute",right:8,top:-48,display:"flex",[e.breakpoints.down("sm")]:{top:-16,marginTop:8,marginBottom:8},[e.breakpoints.down("xs")]:{display:"none"}},audioPlayerWrapper:{position:"absolute",right:8,top:15,display:"flex",[e.breakpoints.down("sm")]:{position:"relative",justifyContent:"flex-end",marginLeft:8,marginRight:-64},[e.breakpoints.down("xs")]:{justifyContent:"flex-start"}},sequenceNav:{marginBottom:8,marginTop:-22},eventData:{marginTop:48},titleSection:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{[e.breakpoints.down("sm")]:{marginBottom:10}},mobileHeaderVote:{textAlign:"center",fontSize:42,marginTop:-55,marginLeft:12,[e.breakpoints.up("sm")]:{display:"none"}},date:{marginTop:8,marginBottom:8},mobileButtons:{display:"flex",alignItems:"center",[e.breakpoints.up("sm")]:{display:"none"}},audioToggle:{marginRight:12,display:"flex",opacity:.75,"@media print":{display:"none"}},readTime:{marginRight:20},bestOfLessWrong:{...(0,es.titleStyles)(e),marginBottom:12,color:e.palette.greyAlpha(.7)},splashPageTitle:{"&&":{fontSize:"6rem",marginRight:-100,[e.breakpoints.down("lg")]:{fontSize:"5rem",marginRight:-50},[e.breakpoints.down("md")]:{fontSize:"4rem",marginRight:-25},[e.breakpoints.down("xs")]:{fontSize:"3.75rem",marginRight:0}}},splashPageTitleLong:{"&&":{fontSize:"5rem",marginRight:-100,[e.breakpoints.down("lg")]:{fontSize:"4.5rem",marginRight:-50},[e.breakpoints.down("md")]:{fontSize:"4rem",marginRight:-25},[e.breakpoints.down("xs")]:{fontSize:"3.5rem",marginRight:0}}},splashPageTitleLonger:{"&&":{fontSize:"4.5rem",marginRight:-100,[e.breakpoints.down("lg")]:{fontSize:"4rem",marginRight:-50},[e.breakpoints.down("md")]:{fontSize:"3.5rem",marginRight:-25},[e.breakpoints.down("xs")]:{fontSize:"3.25rem",marginRight:0}}},titleSectionWithSplashPageHeader:{marginBottom:0},rootWithSplashPageHeader:{"@media screen":{paddingTop:"44vh",[e.breakpoints.down("xs")]:{marginTop:"44vh",paddingTop:0}}}}),areEqual:"auto"});var eL=e.i(652897),eF=e.i(70796),e_=e.i(495314),eW=e.i(673991),eM=e.i(898298),eO=e.i(514089),eE=e.i(381745),eD=e.i(670070),eH=e.i(239832);let eU=(0,ee.gql)("\n  query multiReviewWinnerArtSplashImageEditingOptionsQuery($selector: ReviewWinnerArtSelector, $limit: Int, $enableTotal: Boolean) {\n    reviewWinnerArts(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...ReviewWinnerArtImages\n      }\n      totalCount\n    }\n  }\n"),ez=(0,O.defineStyles)("SplashImageEditingOptions",e=>({root:{zIndex:e.zIndexes.splashHeaderImageOptions,marginBottom:"40px",gap:"10px",width:"calc(100vw - 40px)",flexWrap:"wrap",backgroundColor:e.palette.background.paper,padding:20,...e.typography.body2},postWithArtGridContainer:{...e.typography.body2,backgroundColor:e.palette.background.paper},imageContainer:{width:"200px",height:"auto",cursor:"pointer",paddingRight:5},image:{maxWidth:"100%",height:"auto"}})),eq=(0,r.registerComponent)("SplashImageEditingOptions",e=>{var t;let{post:n}=e,o=(0,M.useStyles)(ez),{data:i,loading:a}=(0,J.useQuery)(eU,{variables:{selector:{postArt:{postId:n._id}},limit:200,enableTotal:!1},notifyOnNetworkStatusChange:!0}),r=null==i||null==(t=i.reviewWinnerArts)?void 0:t.results;return(0,s.jsxs)("div",{className:o.root,children:[(0,s.jsx)(eD.default,{postId:n._id,allowCustomPrompt:!0}),r&&(0,s.jsx)("div",{className:o.postWithArtGridContainer,children:(0,s.jsx)(eE.PostWithArtGrid,{post:n,images:r,defaultExpanded:!0})}),a&&(0,s.jsx)(eH.default,{})]})});var eV=e.i(915077),eG=e.i(222393),eQ=e.i(284994);let eY=(0,ee.gql)("\n  mutation createSplashArtCoordinateImageCropPreview($data: CreateSplashArtCoordinateDataInput!) {\n    createSplashArtCoordinate(data: $data) {\n      data {\n        ...SplashArtCoordinates\n      }\n    }\n  }\n"),e$=480/1080;function eK(e,t,n){let{x:o,y:i,width:s,height:a}=e,{x:r,y:l,width:d,height:c}=t,m=l-i;return{["".concat(n,"XPct")]:(r-o)/s,["".concat(n,"YPct")]:m/a,["".concat(n,"WidthPct")]:d/s,["".concat(n,"HeightPct")]:(c-m)/c}}let eX=e=>{let{boxCoordinates:t,selectedImageInfo:n,subBoxPosition:o,selectedBox:i,setSelectedBox:r,cachedBoxCoordinates:l,setCachedBoxCoordinates:d,flipped:c}=e,m=(0,a.useCallback)(async()=>{let e=t.x+t.width/3*eQ.COORDINATE_POSITIONS_TO_BOOK_OFFSETS[o],i=t.y;d(s=>({...s,[n._id]:{...s[n._id],[o]:{x:e,y:i,width:t.width/3,height:t.height,flipped:c}}}))},[d,o,t,n,c]),p={width:t.width/3,height:t.height,background:i===o?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.3)",borderLeft:"1px solid",borderRight:"1px solid"},u={bottom:0,left:"".concat(t.width/3*("left"===o?0:"middle"===o?1:2),"px"),cursor:"pointer",padding:"2px 5px",color:"black",fontSize:"1rem"},h={position:"absolute",width:"20px",height:"20px",backgroundColor:l[n._id]&&l[n._id][o]?"green":"red"};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:p,onClick:()=>{r(o)},children:[(0,s.jsx)("div",{style:u,onClick:m,children:"Save ".concat(o," placement")}),(0,s.jsx)("div",{style:h})]})})},eZ=e=>{let{showSaveAllButton:t,loading:n,saveAllCoordinates:o}=e;return t?n?(0,s.jsx)("div",{children:"Saving all placements..."}):(0,s.jsx)("div",{onClick:o,children:"Save all placements"}):(0,s.jsx)("div",{children:" Must set all placements before you can save them "})},eJ=(0,r.registerComponent)("ImageCropPreview",e=>{let{imgRef:t,classes:n,flipped:o}=e,i=(0,eG.useWindowSize)(),{selectedImageInfo:r}=(0,P.useImageContext)(),[l,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[p,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)({x:0,y:0}),[x,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(null),[w,C]=(0,a.useState)({x:100,y:100,width:1080,height:480,flipped:o}),[j,S]=(0,a.useState)({x:100,y:100,width:1080,height:480,flipped:o}),[k,I]=(0,a.useState)({}),N=e=>{C(e)},T=()=>{d(!l)},A=e=>{e.target.className.includes("resizer")?(S({x:e.clientX,y:e.clientY,width:w.width,height:w.height,flipped:o}),u(!0)):e.target.className.includes("resizer")||e.target.className.includes("closeButton")||(m(!0),g({x:e.clientX-w.x,y:e.clientY-w.y}))};(0,eV.useEventListener)("mousemove",e=>{let t,n;c&&!p&&N({x:e.clientX-h.x,y:e.clientY-h.y,width:w.width,height:w.height,flipped:o}),p&&(t=e.clientX-j.x,n=j.width+t,N({x:w.x,y:w.y,width:n,height:n*e$,flipped:o}))}),(0,eV.useEventListener)("mouseup",()=>{m(!1),u(!1)});let[B,{loading:R,error:L}]=(0,eO.useMutation)(eY),F=(0,a.useCallback)(async()=>{if(!t.current)return void console.error("Missing image ref");try{if(!(r&&k[r._id])){console.error("Missing coordinates for this image entirely"),y(!1);return}let e=k[r._id].left,n=k[r._id].middle,o=k[r._id].right;if(!e||!n||!o){console.error("Not all sub-boxes have been set!"),y(!1);return}let i=t.current.getBoundingClientRect(),s=eK(i,e,"left"),a=eK(i,n,"middle"),l=eK(i,o,"right"),d=k[r._id]&&{reviewWinnerArtId:r._id,...s,leftFlipped:e.flipped,...a,middleFlipped:n.flipped,...l,rightFlipped:o.flipped},{error:c}=await B({variables:{data:d}});c?(console.error("Error(s) when saving coordinates",{error:JSON.stringify(c,null,2)}),y(!1)):y(!0)}catch(e){console.error("Error saving coordinates",e),y(!1)}},[r,B,k,t]);if(!r)return(0,s.jsx)("button",{className:n.button,onClick:T,children:"Show Box"});let _={left:w.x,top:w.y,backgroundPosition:"-".concat(w.x,"px -").concat(w.y,"px"),backgroundSize:"".concat(i.width,"px auto"),width:w.width,height:w.height},W=!!(k[r._id]&&k[r._id].left&&k[r._id].middle&&k[r._id].right),M={boxCoordinates:w,selectedImageInfo:r,selectedBox:v,setSelectedBox:b,cachedBoxCoordinates:k,setCachedBoxCoordinates:I,flipped:o},O=(0,f.default)([n.saveAllCoordinates,{[n.showSaveAllButton]:W}]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:n.button,onClick:T,children:"Show Box"}),l&&r&&r._id&&(0,s.jsxs)("div",{className:n.moveableBox,style:_,onMouseDown:A,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,s.jsx)(eX,{subBoxPosition:"left",...M}),(0,s.jsx)(eX,{subBoxPosition:"middle",...M}),(0,s.jsx)(eX,{subBoxPosition:"right",...M})]}),(0,s.jsxs)("div",{className:O,onClick:F,children:[(0,s.jsx)(eZ,{showSaveAllButton:W,loading:R,saveAllCoordinates:F}),L&&(0,s.jsx)("div",{children:"Error saving. Please try again."})]}),x&&(0,s.jsxs)("div",{className:n.successNotification,children:["Coordinates saved successfully!",(0,s.jsx)("div",{onClick:()=>{y(!1),T()},children:"(click here to close)"})]}),(0,s.jsx)("div",{className:n.closeButton,onClick:T,children:"x"}),(0,s.jsx)("div",{className:n.resizer,onMouseDown:A})]})]})},{styles:e=>({button:{padding:"8px 20px",cursor:"pointer",backgroundColor:e.palette.panelBackground.reviewGold,color:e.palette.inverseGreyAlpha(1),borderRadius:"4px",fontSize:"1rem"},overlay:{position:"fixed",backgroundColor:e.palette.greyAlpha(.7),top:0,left:0,width:"100%",height:"100%",zIndex:1e4},moveableBox:{display:"flex",flexDirection:"column",justifyContent:"space-around",marginBottom:"40px",position:"fixed",background:"transparent",border:"2px solid",borderColor:e.palette.inverseGreyAlpha(1),cursor:"move",zIndex:2e4},closeButton:{position:"absolute",top:0,right:0,cursor:"pointer",padding:"2px 5px",userSelect:"none",color:e.palette.greyAlpha(1),backgroundColor:e.palette.inverseGreyAlpha(.7),fontSize:"1rem"},resizer:{width:"10px",height:"10px",position:"absolute",bottom:0,right:0,cursor:"nwse-resize",backgroundColor:e.palette.inverseGreyAlpha(1),border:"1px solid",borderColor:e.palette.greyAlpha(1)},saveAllCoordinates:{position:"absolute",display:"block",bottom:0,left:0,width:"100%",cursor:"pointer",padding:"2px 5px",userSelect:"none",color:e.palette.greyAlpha(1),fontSize:"1rem",backgroundColor:e.palette.error},showSaveAllButton:{backgroundColor:e.palette.primary},successNotification:{position:"absolute",display:"block",width:"100%",cursor:"pointer",padding:"2px 5px",userSelect:"none",fontSize:"1rem",backgroundColor:e.palette.primary,textAlign:"center"}})});var e0=e.i(903780);let e1=(0,O.defineStyles)("SplashImageEditing",e=>({root:{position:"absolute",top:200,right:25,display:"flex",flexDirection:"column",paddingLeft:8,paddingRight:8,paddingBottom:8,zIndex:2,opacity:0,gap:"8px","&:hover":{opacity:1},[e.breakpoints.down("md")]:{display:"none"}},changeImageBox:{...e.typography.commentStyle,display:"flex",justifyContent:"center",alignItems:"center",padding:"8px",borderRadius:"4px",backgroundColor:e.palette.panelBackground.reviewGold,color:e.palette.text.alwaysWhite,cursor:"pointer"},splashContent:{padding:8,minHeight:"50vh",minWidth:"100vw",backgroundColor:e.palette.background.paper}})),e2=e=>{let{imgRef:t,imageFlipped:n,setImageFlipped:o,post:i}=e,a=(0,M.useStyles)(e1),{anchorEl:r,hover:l,eventHandlers:d}=(0,eM.useHover)(),[c]=(0,eO.useMutation)((0,ee.gql)("\n    mutation flipSplashArtImage($reviewWinnerArtId: String!) {\n      flipSplashArtImage(reviewWinnerArtId: $reviewWinnerArtId)\n    }\n  ")),m=async()=>{var e,t;(null==(t=i.reviewWinner)||null==(e=t.reviewWinnerArt)?void 0:e._id)&&(o(!n),await c({variables:{reviewWinnerArtId:i.reviewWinner.reviewWinnerArt._id}}))};return(0,s.jsxs)("div",{className:a.root,children:[(0,s.jsx)("div",{className:a.changeImageBox,onClick:m,children:"Flip image"}),(0,s.jsx)(eJ,{imgRef:t,flipped:n}),(0,s.jsxs)("div",{...d,children:[(0,s.jsx)("div",{className:a.changeImageBox,children:"Change image"}),(0,s.jsx)(e0.default,{open:l,anchorEl:r,placement:"bottom-end",clickable:!0,flip:!0,children:(0,s.jsx)("div",{className:a.splashContent,children:(0,s.jsx)(eq,{post:i})})})]})]})},e5=(0,O.defineStyles)("BestOfLWPostsPageSplashImage",e=>({root:{position:"relative"},backgroundImageWrapper:{position:"fixed",width:"calc(100vw + 400px)",top:-100,right:-200,[e.breakpoints.down("sm")]:{top:-220,right:0}},backgroundImage:{position:"absolute",objectFit:"cover",objectPosition:"right",top:0,right:0,height:"100vh",width:"100vw",[e.breakpoints.down("sm")]:{objectPosition:"center",width:"200vw"}},overlayY:{position:"absolute",top:0,right:0,width:"100vw",height:"100vh",background:"linear-gradient(180deg, ".concat(e.palette.panelBackground.default," 0px, ").concat(e.palette.panelBackground.translucent," 165px,  transparent 45%, ").concat(e.palette.panelBackground.default," 87%)"),pointerEvents:"none",bottom:0,left:"auto",[e.breakpoints.up("lg")]:{width:"100vw"},[e.breakpoints.down("sm")]:{width:"calc(100vw + 200px)",background:"linear-gradient(180deg, ".concat(e.palette.panelBackground.default," 0px, ").concat(e.palette.panelBackground.translucent," 300px,  transparent 45%, ").concat(e.palette.panelBackground.default," 87%)")}},overlayX:{position:"absolute",top:0,right:0,width:"100vw",height:"100vh",background:"linear-gradient(-90deg, transparent 48%, ".concat(e.palette.panelBackground.default," 95%)"),pointerEvents:"none",[e.breakpoints.down("sm")]:{display:"none"}},overlayDiag:{position:"absolute",top:0,right:0,width:"100vw",height:"100vh",background:"linear-gradient(225deg, transparent 48%, ".concat(e.palette.panelBackground.default," 95%)"),pointerEvents:"none",[e.breakpoints.down("sm")]:{display:"none"}}})),e3=e=>{var t,n,o;let{post:i}=e,r=(0,M.useStyles)(e5),{selectedImageInfo:l,setImageInfo:d}=(0,P.useImageContext)(),[m,p]=(0,a.useState)((null==l?void 0:l.splashArtImageUrl)||(null==(n=i.reviewWinner)||null==(t=n.reviewWinnerArt)?void 0:t.splashArtImageUrl)),[u,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(1),x=(0,c.useCurrentUser)(),y=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e,t;(null==(e=i.reviewWinner)?void 0:e.reviewWinnerArt)&&d(null==(t=i.reviewWinner)?void 0:t.reviewWinnerArt)},[null==(o=i.reviewWinner)?void 0:o.reviewWinnerArt,d]),(0,a.useEffect)(()=>{var e,t;let n=null==(t=i.reviewWinner)||null==(e=t.reviewWinnerArt)?void 0:e.splashArtImageUrl,o=(null==l?void 0:l.splashArtImageUrl)||n;o&&p(o.replace("upload/",u?"upload/a_hflip/":"upload/"))},[i,l,u]),(0,a.useEffect)(()=>{let e=()=>{f(Math.max(0,1-(window.scrollY-100)/400))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.jsxs)("div",{className:r.root,children:[(0,s.jsxs)("div",{className:r.backgroundImageWrapper,style:{opacity:g},children:[(0,s.jsx)("img",{ref:y,src:m,className:r.backgroundImage,alt:"Background Image"}),(0,s.jsx)("div",{className:r.overlayY}),(0,s.jsx)("div",{className:r.overlayX}),(0,s.jsx)("div",{className:r.overlayDiag})]}),(0,eW.userIsAdminOrMod)(x)&&(0,s.jsx)(e2,{imgRef:y,imageFlipped:u,setImageFlipped:h,post:i})]})};var e4=e.i(937636),e6=e.i(959294),e8=e.i(444098);e.i(793794);var e7=e.i(527633),e9=e.i(895488),te=e.i(144437),tt=e.i(122342),tn=e.i(100916),to=e.i(630136);let ti=e=>{let{label:t,icon:n,clickAction:o,classes:i}=e;return(0,s.jsxs)("div",{className:i.shareButton,children:[(0,s.jsx)("div",{onClick:o,className:i.shareButtonIcon,children:n}),(0,s.jsx)("div",{className:i.shareButtonLabel,children:t})]})},ts=(0,r.registerComponent)("SharePostPopup",e=>{let{post:t,onClose:n,classes:o}=e,i=(0,a.useRef)(null),{captureEvent:r}=(0,u.useTracking)(),{flash:d}=(0,te.useMessages)(),[c,m]=(0,a.useState)(!1),p=new URL((0,tn.getSiteUrl)()).hostname;(0,e9.useRerenderOnce)(),(0,a.useEffect)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.bottom="80px",e.style.right="16px",document.body.appendChild(e),i.current=e,()=>{document.body.removeChild(e)}},[]);let g=e=>"".concat((0,l.postGetPageUrl)(t,!0),"?utm_campaign=publish_share&utm_source=").concat(e),x=e=>{window.open(e,"_blank")},y=h.forumTitleSetting.get(),v="".concat(t.title," - ").concat(y),b=[{label:"Copy link",icon:(0,s.jsx)(E.default,{icon:"Link",className:o.icon}),clickAction:()=>{r("sharePost",{pageElementContext:"sharePostPopup",postId:t._id,option:"copyLink"}),navigator.clipboard.writeText(g("link")),d("Link copied to clipboard")},classes:o},{label:"Twitter",icon:(0,s.jsx)(to.default,{className:o.icon,name:"twitter"}),clickAction:()=>{r("sharePost",{pageElementContext:"sharePostPopup",postId:t._id,option:"twitter"});let e="".concat(v," ").concat(g("twitter"));x("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e)))},classes:o},{label:"Facebook",icon:(0,s.jsx)(to.default,{className:o.icon,name:"facebook"}),clickAction:()=>{r("sharePost",{pageElementContext:"sharePostPopup",postId:t._id,option:"facebook"}),x("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(g("facebook")),"&t=").concat(encodeURIComponent(v)))},classes:o},{label:"LinkedIn",icon:(0,s.jsx)(to.default,{className:o.icon,name:"linkedin"}),clickAction:()=>{r("sharePost",{pageElementContext:"sharePostPopup",postId:t._id,option:"linkedIn"}),x("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(g("linkedin"))))},classes:o}],w=(0,a.useCallback)(()=>{m(!0),setTimeout(n,270)},[n]);return(0,s.jsx)(e0.default,{open:!0,anchorEl:i.current,placement:"top-end",className:o.popper,children:(0,s.jsx)(e8.Paper,{children:(0,s.jsxs)("div",{className:(0,f.default)(o.root,{[o.rootAnimateOut]:c}),children:[(0,s.jsx)("div",{className:o.closeButtonRow,children:(0,s.jsx)(e7.default,{className:o.closeButton,onClick:w,children:(0,s.jsx)(E.default,{icon:"Close",className:o.closeIcon})})}),(0,s.jsxs)("div",{className:o.title,children:[(0,s.jsx)(E.default,{icon:"CheckCircle",className:o.checkIcon}),(0,s.jsx)(ev.Typography,{variant:"title",className:o.titleText,children:"Post published"})]}),(0,s.jsx)("div",{className:o.sharePost,children:"Share post"}),(0,s.jsxs)("div",{className:o.contentContainer,children:[(0,s.jsx)("img",{className:o.image,src:t.socialPreviewData.imageUrl||h.siteImageSetting.get()}),(0,s.jsxs)("div",{className:o.postPreviewTextWrapper,children:[(0,s.jsx)("div",{className:o.postTitle,children:t.title}),(0,s.jsx)("div",{className:o.postPreviewText,children:(0,tt.getPostDescription)(t)}),(0,s.jsx)("div",{className:o.postPreviewHostname,children:p})]})]}),(0,s.jsx)("div",{className:o.shareButtonRow,children:b.map((e,t)=>(0,s.jsx)(ti,{...e},"shareButton_".concat(t)))})]})})})},{styles:e=>({popper:{zIndex:e.zIndexes.loginDialog,borderRadius:e.borderRadius.default,boxShadow:"none","& .MuiPaper-elevation2":{boxShadow:"none"},[e.breakpoints.down("md")]:{display:"none"}},root:{padding:"11px 16px 28px 20px",fontFamily:e.palette.fonts.sansSerifStack,boxShadow:e.palette.boxShadow.eaCard,borderRadius:e.borderRadius.default,maxWidth:380,animation:"animateIn ".concat(300,"ms ease-out")},rootAnimateOut:{animation:"animateOut ".concat(300,"ms ease-out")},"@keyframes animateIn":{"0%":{transform:"translateY(100%)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},"@keyframes animateOut":{"0%":{transform:"translateY(0)",opacity:1},"100%":{transform:"translateY(100%)",opacity:0}},closeButtonRow:{textAlign:"right",height:9},closeButton:{padding:0,minWidth:"fit-content",minHeight:"fit-content"},closeIcon:{fontSize:22,color:e.palette.grey[600]},checkIcon:{color:e.palette.icon.filledGreenCheckmark,width:22,height:22,marginRight:10},title:{display:"flex",alignItems:"center",marginBottom:22,width:"fit-content",marginLeft:"auto",marginRight:"auto"},titleText:{color:e.palette.grey[1e3],fontWeight:600,margin:0,fontSize:22},sharePost:{margin:0,fontSize:"14px",fontWeight:700,color:e.palette.grey[600],textTransform:"uppercase",marginBottom:12},image:{width:78,height:78,marginRight:12,objectFit:"cover",borderRadius:e.borderRadius.small},postPreviewTextWrapper:{display:"flex",flexDirection:"column",height:78,width:220},postTitle:{fontSize:14,minHeight:18,fontWeight:700,marginBottom:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},postPreviewText:{fontSize:12,color:e.palette.grey[600],marginBottom:6,fontWeight:500,display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden"},postPreviewHostname:{fontSize:12,color:e.palette.grey[600],marginTop:"auto",fontWeight:500},contentContainer:{display:"flex",border:"1px solid ".concat(e.palette.grey[200]),borderRadius:e.borderRadius.default,padding:12},shareButtonIcon:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"20px 20px 8px 20px",width:44,height:44,borderRadius:"50%",backgroundColor:e.palette.grey[110],color:e.palette.grey[1e3],fill:e.palette.grey[1e3],cursor:"pointer","&:hover":{backgroundColor:e.palette.grey[300]}},shareButtonRow:{display:"flex",justifyContent:"space-between"},shareButton:{display:"flex",flexDirection:"column"},shareButtonLabel:{color:e.palette.grey[600],fontSize:"13px",textAlign:"center",fontWeight:500},icon:{width:20,height:20}})});var ta=e.i(78136),tr=e.i(423748);let tl=(0,r.registerComponent)("CitationTags",e=>{let{title:t,author:n,coauthors:o,date:i}=e;return i&&(i instanceof Date||(i=new Date(i)),i=(i=i.toISOString()).slice(0,i.indexOf("T")).replace(/-/g,"/")),(0,s.jsxs)(tr.Helmet,{name:"citationTags",children:[t&&(0,s.jsx)("meta",{name:"citation_title",content:t}),n&&(0,s.jsx)("meta",{name:"citation_author",content:n}),o&&o.map((e,t)=>(0,s.jsx)("meta",{name:"citation_author",content:e},t)),i&&(0,s.jsx)("meta",{name:"citation_publication_date",content:i})]})});var td=e.i(985794),tc=e.i(583864),tm=e.i(934180),tp=e.i(717017),tu=e.i(974728),th=e.i(942430);let tg=(0,r.registerComponent)("BottomNavigationItem",e=>{let{direction:t,post:n,sequence:o,classes:i}=e,a=(0,tu.useUpdateContinueReading)(n._id,null==o?void 0:o._id),r=(0,l.postGetCommentCount)(n)||"No",d=(0,l.postGetPageUrl)(n,!1,null==o?void 0:o._id);return(0,s.jsxs)("span",{children:[(0,s.jsx)(ea.Link,{onClick:()=>a(),to:d,children:(0,s.jsxs)("div",{className:(0,f.default)(i.root,{[i.previous]:"Previous"===t}),children:[(0,s.jsxs)("div",{className:i.direction,children:[t,":"]}),(0,s.jsx)("div",{className:i.postTitle,children:n.title}),(0,s.jsxs)("div",{className:i.meta,children:[(0,s.jsxs)("span",{className:i.metaEntry,children:[r," comments"]}),(0,s.jsxs)("span",{className:i.metaEntry,children:[n.baseScore," karma"]})]})]})}),"Next"===t&&(0,s.jsx)("span",{className:i.login,children:(0,s.jsx)(th.default,{})})]})},{styles:e=>({root:{paddingTop:28,[tp.legacyBreakpoints.maxSmall]:{width:"100%"},"&:hover, &:visited, &:focus":{color:e.palette.link.dim},fontFamily:e.typography.uiSecondary.fontFamily},direction:{fontSize:"1.2rem",marginBottom:".5em",fontWeight:600},postTitle:{fontSize:"1.4rem",marginBottom:".5em",marginTop:0,fontWeight:500},previous:{textAlign:"right",[tp.legacyBreakpoints.maxSmall]:{textAlign:"left"}},meta:{color:e.palette.text.dim,fontSize:12},metaEntry:{paddingRight:10},login:{position:"relative",top:e.spacing.unit}})}),tf=(0,r.registerComponent)("BottomNavigation",e=>{let{post:t,classes:n}=e,{nextPost:o,prevPost:i,sequence:a}=t,r=(0,c.useCurrentUser)();return(o||i)&&(null==t?void 0:t.sequence)&&(!t.sequence.draft||r&&r._id===t.sequence.userId||(null==r?void 0:r.isAdmin))?(0,s.jsxs)("div",{className:n.root,children:[i&&(0,s.jsx)("div",{className:(0,f.default)(n.post,n.prevPost),children:(0,s.jsx)(tg,{direction:"Previous",post:i,sequence:i.sequence})}),(0,s.jsx)("div",{className:n.divider}),o&&(0,s.jsx)("div",{className:(0,f.default)(n.post,n.nextPost),children:(0,s.jsx)(tg,{direction:"Next",post:o,sequence:o.sequence})}),(0,s.jsx)("div",{className:n.clear})]}):null},{styles:e=>({root:{position:"relative"},post:{width:300,display:"inline-block",marginTop:-15,paddingBottom:55,[tp.legacyBreakpoints.maxSmall]:{width:"100%",textAlign:"left",paddingLeft:25,paddingBottom:10},[tp.legacyBreakpoints.maxTiny]:{paddingLeft:5}},prevPost:{},nextPost:{float:"right",[tp.legacyBreakpoints.maxSmall]:{paddingBottom:50}},divider:{position:"absolute",height:"110px",marginTop:"10px",marginLeft:"auto",marginRight:"auto",width:"0px",borderLeftStyle:"solid",borderLeftWidth:"1px",color:e.palette.icon.dim5,left:0,right:0,top:0,[tp.legacyBreakpoints.maxSmall]:{display:"none"}},nextSequenceDirection:{fontWeight:600,fontSize:"1.2rem"},clear:{clear:"both"}}),hocs:[m.default]});var tx=e.i(512752),ty=e.i(64278);let tv=(0,r.registerComponent)("PostsPagePostFooter",e=>{var t,n,o;let{post:i,sequenceId:a,classes:r}=e,l=(0,c.useFilteredCurrentUser)(e=>(0,x.userHasPingbacks)(e)),d=i.votingSystem||"default",m=(0,F.getVotingSystemByName)(d);null==(t=i.contents)||t.wordCount;let p=null!=(o=null==(n=ty.postBottomSecondaryVotingComponents[d])?void 0:n.call(ty.postBottomSecondaryVotingComponents))?o:null,h="eaEmojis"===d;return(0,s.jsxs)(s.Fragment,{children:[(0,g.isLWorAF)()&&!i.shortform&&!i.isEvent&&(0,s.jsx)(eA.SuspenseWrapper,{name:"FooterTagList",children:(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"tagFooter",children:(0,s.jsx)("div",{className:r.footerTagList,children:(0,s.jsx)(eg.default,{post:i})})})}),!i.shortform&&((0,g.isLW)()||h)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:r.footerSection,children:[(0,s.jsx)("div",{className:(0,f.default)(r.voteBottom,(0,g.isLWorAF)()&&r.lwVote),children:(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"lowerVoteButton",children:(0,s.jsx)(ej.default,{post:i,useHorizontalLayout:(0,k.isFriendlyUI)(),isFooter:!0})})}),(0,k.isFriendlyUI)()&&(0,s.jsxs)("div",{className:r.secondaryInfoRight,children:[(0,s.jsx)(tc.default,{documentId:i._id,collectionName:"Posts",className:r.bookmarkButton,placement:"bottom-start"}),(0,s.jsx)(tm.default,{post:i}),(0,s.jsx)("span",{className:r.actions,children:(0,s.jsx)(u.AnalyticsContext,{pageElementContext:"tripleDotMenu",children:(0,s.jsx)(U.default,{post:i,includeBookmark:!(0,k.isFriendlyUI)()})})})]})]}),p&&(0,s.jsx)(p,{document:i,votingSystem:m,isFooter:!0})]}),a&&(0,s.jsx)("div",{className:r.bottomNavigation,children:"sequence"in i&&(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"bottomSequenceNavigation",children:(0,s.jsx)(tf,{post:i})})}),l&&(0,s.jsx)(eA.SuspenseWrapper,{name:"pingbacks",children:(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"pingbacks",children:(0,s.jsx)(tx.default,{postId:i._id})})})]})},{styles:e=>({footerSection:{display:"flex",columnGap:20,alignItems:"center",fontSize:"1.4em",paddingTop:e.isFriendlyUI?30:void 0,borderTop:e.isFriendlyUI?e.palette.border.grey300:void 0,marginTop:e.isFriendlyUI?40:void 0,marginBottom:e.isFriendlyUI?40:void 0},bookmarkButton:{marginBottom:-5,height:22,color:e.palette.grey[600],"&:hover":{opacity:.5}},actions:{"&:hover":{opacity:.5},"& svg":{color:"inherit"}},voteBottom:{flexGrow:e.isFriendlyUI?1:void 0,position:"relative",fontSize:42,textAlign:"center",display:"inline-block",marginLeft:e.isFriendlyUI?void 0:"auto",marginRight:e.isFriendlyUI?void 0:"auto",marginBottom:e.isFriendlyUI?void 0:40,"@media print":{display:"none"}},secondaryInfoRight:{flex:"none",display:"flex",columnGap:20,color:e.palette.text.dim3},bottomNavigation:{width:640,margin:"auto",[e.breakpoints.down("sm")]:{width:"100%",maxWidth:eB.MAX_COLUMN_WIDTH}},lwVote:{marginTop:66,marginBottom:70},footerTagList:{marginTop:16,marginBottom:66,[e.breakpoints.up("sm")]:{display:"none"}}}),areEqual:"auto"});var tb=e.i(275828);let tw=(0,r.registerComponent)("AlignmentPendingApprovalMessage",e=>{let{post:t,classes:n}=e,o=(0,c.useCurrentUser)();if(!o)return null;let i=!!t.suggestForAlignmentUserIds&&t.suggestForAlignmentUserIds.includes(o._id);return!t.af&&i&&(0,g.isAF)()?(0,s.jsxs)("div",{className:n.root,children:[(0,s.jsxs)("p",{children:["This post is pending approval to the Alignment Forum and is currently only visible to you. However, it is already visible (and commentable) to everyone on LessWrong."," ",(0,s.jsx)("a",{href:"https://lesswrong.com/posts/".concat(t._id,"/").concat(t.slug),children:"View your post on LessWrong"}),"."]}),(0,s.jsxs)("p",{children:["For more info about Alignment Forum membership and posting policies, see ",(0,s.jsx)(ea.Link,{to:"/faq",children:"the FAQ"}),"."]})]}):null},{styles:e=>({root:{...e.typography.contentNotice,...e.typography.postStyle}})});var tC=e.i(77754),tj=e.i(758623);let tS=(0,r.registerComponent)("PostsRevisionMessage",e=>{let{post:t,classes:n}=e;return t.contents&&"editedAt"in t.contents?(0,s.jsxs)("div",{className:n.root,children:["You are viewing a version of this post published on the ",(0,s.jsx)(tj.default,{date:t.contents.editedAt,format:"Do MMM YYYY"}),"."," ",(0,s.jsx)(ea.QueryLink,{query:{revision:void 0},children:"This link"})," will always display the most recent version of the post."]}):null},{styles:e=>({root:{...e.typography.contentNotice,...e.typography.postStyle}})});var tk=e.i(690118),tI=e.i(87828),tN=e.i(698609),tT=e.i(415617);let tP=(0,O.defineStyles)("PostPageReviewButton",e=>({reviewVoting:{padding:2*e.spacing.unit,paddingBottom:6*e.spacing.unit,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},reviewButton:{border:"solid 1px ".concat(e.palette.primary.main),paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit,paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,marginTop:e.spacing.unit,display:"inline-block",borderRadius:3}})),tA=(0,r.registerComponent)("PostPageReviewButton",function(e){let{post:t}=e,n=(0,M.useStyles)(tP),o=(0,c.useCurrentUser)();return(0,e_.postEligibleForReview)(t)?(0,s.jsxs)("div",{className:n.reviewVoting,children:[(0,e_.canNominate)(o,t)&&(0,s.jsx)(tN.default,{post:t}),(0,s.jsx)(tT.default,{post:t,year:e_.REVIEW_YEAR+"",reviewMessage:(0,s.jsx)(D.default,{title:"Write up your thoughts on what was good about a post, how it could be improved, and how you think stands the tests of time as part of the broader ".concat(h.forumTitleSetting.get()," conversation"),placement:"bottom",children:(0,s.jsx)("div",{className:n.reviewButton,children:"Review"})})})]}):null}),tB=(0,r.registerComponent)("PostBodyPrefix",e=>{var t,n;let{post:o,query:i,classes:a}=e,r=(0,c.useCurrentUser)();return(0,s.jsxs)(s.Fragment,{children:[(0,e_.reviewIsActive)()&&(0,e_.postEligibleForReview)(o)&&"RESULTS"!==(0,e_.getReviewPhase)()&&(0,s.jsx)(tA,{post:o}),(0,s.jsx)(tw,{post:o}),o.shortform&&o.draft&&(0,s.jsx)("div",{className:a.contentNotice,children:(0,k.isFriendlyUI)()?"This is a special post that holds your quick takes. Because it's marked as a draft, your quick takes will not be displayed. To un-draft it, pick Edit from the menu above, then click Publish.":"This is a special post that holds your short-form writing. Because it's marked as a draft, your short-form posts will not be displayed. To un-draft it, pick Edit from the menu above, then click Publish."}),o.shortform&&!o.draft&&(0,s.jsx)("div",{className:a.contentNotice,children:(0,s.jsxs)(s.Fragment,{children:["This is a special post for quick takes by ",(0,s.jsx)(Z.default,{user:o.user}),". Only they can create top-level comments. Comments here also appear on the ",(0,s.jsx)(ea.Link,{to:"/quicktakes",children:"Quick Takes page"})," and ",(0,s.jsx)(ea.Link,{to:"/allPosts",children:"All Posts page"}),"."]})}),o.rejected&&(0,s.jsxs)("div",{className:a.rejectionNotice,children:[(0,s.jsxs)("p",{children:["This post was rejected",o.rejectedReason&&" for the following reason(s):"]}),(0,s.jsx)(tI.default,{contentType:"postHighlight",children:(0,s.jsx)(tk.ContentItemBody,{dangerouslySetInnerHTML:{__html:o.rejectedReason||""}})})]}),!o.rejected&&o.authorIsUnreviewed&&!o.draft&&(0,s.jsxs)("div",{className:a.contentNotice,children:[(null==r?void 0:r._id)===o.userId?"Because this is your first post, this post is awaiting moderator approval.":"This post is unlisted and is still awaiting moderation.\nUsers' first posts need to be approved by a moderator.",(0,s.jsx)(D.default,{title:(0,s.jsxs)("p",{children:["New users' first posts on ",h.siteNameWithArticleSetting.get()," are checked by moderators before they appear on the site. Most posts will be approved within ",(0,g.forumSelect)({EAForum:24,LessWrong:72,AlignmentForum:72,default:24})," hours; posts that are spam or that don't meet site standards will be deleted. After you've had a post approved, future posts will appear immediately without waiting for review."]}),children:(0,s.jsx)(tb.default,{className:a.infoIcon})})]}),((0,k.isFriendlyUI)()||(null!=(n=null==(t=o.contents)?void 0:t.wordCount)?n:0)<eB.BOOKUI_LINKPOST_WORDCOUNT_THRESHOLD)&&(0,s.jsx)(tC.default,{post:o,negativeTopMargin:(0,k.isFriendlyUI)()}),(null==i?void 0:i.revision)&&o.contents&&(0,s.jsx)(tS,{post:o})]})},{styles:e=>({reviewInfo:{textAlign:"center",marginBottom:32},reviewLabel:{...e.typography.postStyle,...e.typography.contentNotice,marginBottom:e.spacing.unit},contentNotice:{...e.typography.contentNotice,...e.typography.postStyle,maxWidth:600,...e.isFriendlyUI&&{fontFamily:e.palette.fonts.sansSerifStack}},rejectionNotice:{...e.typography.contentNotice,...e.typography.postStyle,maxWidth:600,opacity:.75,marginBottom:40},infoIcon:{width:16,height:16,marginLeft:e.spacing.unit,verticalAlign:"top",color:e.palette.icon.dim2}})});var tR=e.i(791111),tL=e.i(324596),tF=e.i(636867),t_=e.i(885072),tW=e.i(305040);let tM={LessWrong:{title:"New to LessWrong?",contents:[{to:"/about",children:"Getting Started"},{to:"/faq",children:"FAQ"},{to:"/library",children:"Library"}]},default:null},tO=(0,r.registerComponent)("WelcomeBox",e=>{let{classes:t}=e,n=(0,c.useCurrentUser)(),o=(0,t_.useABTest)(tW.welcomeBoxABTest),i=(0,g.forumSelect)(tM),[a,r]=(0,b.useCookiesWithConsent)([w.HIDE_WELCOME_BOX_COOKIE]);if(!("welcomeBox"===o&&!n&&i&&!a[w.HIDE_WELCOME_BOX_COOKIE]))return null;let{title:l,contents:d}=i;return(0,s.jsx)("div",{className:t.wrapper,children:(0,s.jsx)(u.AnalyticsContext,{pageElementContext:"welcomeBox",children:(0,s.jsxs)("div",{className:t.welcomeBox,children:[(0,s.jsxs)("span",{className:t.welcomeBoxHeaderSeparator,children:[(0,s.jsx)(ev.Typography,{variant:"title",className:t.welcomeBoxHeader,children:l}),(0,s.jsx)(e7.default,{className:t.welcomeBoxCloseButton,onClick:()=>r(w.HIDE_WELCOME_BOX_COOKIE,"true",{path:"/"}),children:(0,s.jsx)(tF.default,{className:t.welcomeBoxCloseIcon})})]}),d.map((e,n)=>{let{children:o,...i}=e;return(0,s.jsx)(ev.Typography,{variant:"body1",className:t.welcomeBoxLink,children:(0,s.jsx)(ea.Link,{...i,children:o})},"welcomeBoxContent_".concat(n))})]})})})},{styles:e=>({wrapper:{"@media print":{display:"none"},[e.breakpoints.down("md")]:{display:"none"}},welcomeBox:{paddingTop:14,paddingLeft:24,paddingRight:16,paddingBottom:16,display:"flex",flexDirection:"column",border:e.palette.border.normal,borderRadius:3},welcomeBoxCloseButton:{padding:0,marginBottom:14,minHeight:".75em",minWidth:".75em"},welcomeBoxCloseIcon:{width:".6em",height:".6em",color:e.palette.icon.dim6},welcomeBoxHeader:{...e.typography.body2,fontWeight:400,paddingBottom:8,borderBottom:e.palette.border.faint,marginBottom:6,marginRight:16,whiteSpace:"pre"},welcomeBoxHeaderSeparator:{display:"flex",justifyContent:"space-between",alignItems:"center"},welcomeBoxLink:{fontFamily:e.typography.body2.fontFamily,fontSize:e.typography.body2.fontSize,color:e.palette.primary.main,whiteSpace:"pre"}})});var tE=e.i(396906),tD=e.i(834519),tH=e.i(425415),tU=e.i(460793),tz=e.i(821058),tq=e.i(395504),tV=e.i(289078),tG=e.i(621938),tQ=e.i(788099),tY=e.i(276320);(0,ee.gql)("\n  fragment CommentsList on Comment {\n    _id\n    postId\n    tagId\n    tag {\n      _id\n      slug\n    }\n    relevantTagIds\n    relevantTags {\n      ...TagPreviewFragment\n    }\n    tagCommentType\n    parentCommentId\n    topLevelCommentId\n    descendentCount\n    title\n    contents {\n      _id\n      html\n      plaintextMainText\n      wordCount\n    }\n    postedAt\n    lastEditedAt\n    repliesBlockedUntil\n    userId\n    draft\n    deleted\n    deletedPublic\n    deletedByUserId\n    deletedReason\n    hideAuthor\n    authorIsUnreviewed\n    user {\n      ...UsersMinimumInfo\n    }\n    currentUserVote\n    currentUserExtendedVote\n    baseScore\n    extendedScore\n    score\n    voteCount\n    emojiReactors\n    af\n    afDate\n    moveToAlignmentUserId\n    afBaseScore\n    afExtendedScore\n    suggestForAlignmentUserIds\n    reviewForAlignmentUserId\n    needsReview\n    answer\n    parentAnswerId\n    retracted\n    postVersion\n    reviewedByUserId\n    shortform\n    shortformFrontpage\n    lastSubthreadActivity\n    moderatorHat\n    hideModeratorHat\n    nominatedForReview\n    reviewingForReview\n    promoted\n    promotedByUser {\n      ...UsersMinimumInfo\n    }\n    directChildrenCount\n    votingSystem\n    isPinnedOnProfile\n    debateResponse\n    rejected\n    rejectedReason\n    originalDialogueId\n\n    forumEventId\n    forumEventMetadata\n  }\n"),(0,ee.gql)("\n  fragment CommentsListWithTopLevelComment on Comment {\n    ...CommentsList\n    topLevelComment {\n      ...CommentsList\n    }\n  }\n"),(0,ee.gql)("\n  fragment UltraFeedComment on Comment {\n    ...CommentsList\n    post {\n      ...PostsListWithVotes\n    }\n  }\n"),(0,ee.gql)("\n  fragment ShortformComments on Comment {\n    ...CommentsList\n    post {\n      ...PostsMinimumInfo\n    }\n    relevantTags {\n      ...TagPreviewFragment\n    }\n  }\n"),(0,ee.gql)("\n  fragment FrontpageShortformComments on Comment {\n    ...ShortformComments\n    latestChildren {\n      _id\n      postedAt\n      user {\n        _id\n        displayName\n      }\n    }\n  }\n"),(0,ee.gql)("\n  fragment DraftComments on Comment {\n    ...CommentsList\n    post {\n      ...PostsMinimumInfo\n    }\n    parentComment {\n      _id\n      user {\n        ...UsersMinimumInfo\n      }\n    }\n  }\n");let t$=(0,ee.gql)("\n  fragment CommentWithRepliesFragment on Comment {\n    ...CommentsList\n    lastSubthreadActivity\n    latestChildren {\n      ...CommentsList\n    }\n    tag {\n      ...TagBasicInfo\n    }\n    post {\n      ...PostsBase\n    }\n  }\n");(0,ee.gql)("\n  fragment CommentEdit on Comment {\n    ...CommentsList\n    relevantTagIds\n    contents {\n      ...RevisionEdit\n    }\n  }\n"),(0,ee.gql)("\n  fragment DeletedCommentsMetaData on Comment {\n    _id\n    deleted\n    deletedDate\n    deletedByUser {\n      _id\n      displayName\n    }\n    deletedReason\n    deletedPublic\n  }\n"),(0,ee.gql)("\n  fragment DeletedCommentsModerationLog on Comment {\n    ...DeletedCommentsMetaData\n    user {\n      ...UsersMinimumInfo\n    }\n    post {\n      title\n      slug\n      _id\n    }\n  }\n"),(0,ee.gql)("\n  fragment CommentsListWithParentMetadata on Comment {\n    ...CommentsList\n    post {\n      ...PostsMinimumInfo\n      isRead\n    }\n    tag {\n      ...TagBasicInfo\n    }\n  }\n"),(0,ee.gql)("\n  fragment SunshineCommentsList on Comment {\n    ...CommentsListWithParentMetadata\n    automatedContentEvaluations {\n      ...AutomatedContentEvaluationsFragment\n    }\n  }\n"),(0,ee.gql)("\n  fragment StickySubforumCommentFragment on Comment {\n    ...CommentWithRepliesFragment\n    tag {\n      ...TagBasicInfo\n    }\n  }\n"),(0,ee.gql)("\n  fragment WithVoteComment on Comment {\n    __typename\n    _id\n    currentUserVote\n    currentUserExtendedVote\n    baseScore\n    extendedScore\n    score\n    afBaseScore\n    afExtendedScore\n    voteCount\n  }\n"),(0,ee.gql)("\n  fragment CommentsListWithModGPTAnalysis on Comment {\n    ...CommentsList\n    post {\n      ...PostsMinimumInfo\n    }\n    modGPTAnalysis\n  }\n"),(0,ee.gql)("\n  fragment CommentsForAutocomplete on Comment {\n    _id\n    postId\n    baseScore\n    extendedScore\n    createdAt\n    user {\n      ...UsersMinimumInfo\n    }\n    contents {\n      markdown\n    }\n    post {\n      ...PostsForAutocomplete\n    }\n  }\n"),(0,ee.gql)("\n  fragment CommentsForAutocompleteWithParents on Comment {\n    ...CommentsForAutocomplete\n    parentComment {\n      ...CommentsForAutocomplete\n      parentComment {\n        ...CommentsForAutocomplete\n        parentComment {\n          ...CommentsForAutocomplete\n          parentComment {\n            ...CommentsForAutocomplete\n            parentComment {\n              ...CommentsForAutocomplete\n              parentComment {\n                ...CommentsForAutocomplete\n                parentComment {\n                  ...CommentsForAutocomplete\n                  parentComment {\n                    ...CommentsForAutocomplete\n                    parentComment {\n                      ...CommentsForAutocomplete\n                      parentComment {\n                        ...CommentsForAutocomplete\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"),(0,ee.gql)("\n  fragment SuggestAlignmentComment on Comment {\n    ...CommentsList\n    post {\n      ...PostsMinimumInfo\n    }\n    suggestForAlignmentUserIds\n    suggestForAlignmentUsers {\n      _id\n      displayName\n    }\n  }\n");var tK=e.i(833851),tX=e.i(6598),tZ=e.i(105736),tJ=e.i(550391);let t0=(0,O.defineStyles)("SideCommentIcon",e=>({sideCommentIconWrapper:{color:e.palette.icon.dim6,paddingLeft:8,"@media print":{display:"none"}},sideCommentIcon:{cursor:"pointer",paddingTop:4,whiteSpace:"nowrap","& svg":{height:17},"&:hover":{color:e.palette.icon.dim5}},clickToPinMessage:{position:"absolute",display:"inline-block",top:-2,left:36,fontSize:13,color:e.palette.text.dim45,fontFamily:e.palette.fonts.sansSerifStack},extendHoverTarget:{position:"absolute",top:0,left:0,width:350,height:30,display:"inline-block"},pinned:{color:e.palette.icon.dim},popper:{width:350,zIndex:e.zIndexes.sideCommentBox},sideCommentHover:{},seeInContext:{color:e.palette.link.dim,paddingBottom:8,paddingTop:4},badge:{fontSize:12,color:e.palette.text.dim45},desktopIcon:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},lineColor:{background:e.palette.sideItemIndicator.sideComment}})),t1=e=>{let{commentCount:t,children:n}=e,o=(0,M.useStyles)(t0);return t>1?(0,s.jsx)(tG.Badge,{badgeClassName:o.badge,badgeContent:t,children:n}):(0,s.jsx)(s.Fragment,{children:n})},t2=e=>{let{commentIds:t,post:n}=e;return(0,eG.useIsAboveBreakpoint)("sm")?(0,s.jsx)(t6,{commentIds:t,post:n}):(0,s.jsx)(t4,{commentIds:t,post:n})},t5=(0,O.defineStyles)("SideCommentDialog",e=>({dialogPaper:{marginTop:48,marginBottom:48,marginLeft:18,marginRight:18}})),t3=e=>{let{commentIds:t,post:n,onClose:o}=e,i=(0,M.useStyles)(t5);return(0,s.jsx)(tK.default,{open:!0,onClose:o,paperClassName:i.dialogPaper,children:(0,s.jsx)(t8,{commentIds:t,post:n,closeDialog:o})})},t4=e=>{let{commentIds:t,post:n}=e,o=(0,M.useStyles)(t0),{openDialog:i}=(0,y.useDialog)();return(0,s.jsx)(ta.SideItem,{options:{format:"icon"},children:(0,s.jsx)("div",{className:o.sideCommentIconWrapper,onClick:()=>{i({name:"SideCommentDialog",contents:e=>{let{onClose:o}=e;return(0,s.jsx)(t3,{onClose:o,commentIds:t,post:n})}})},children:(0,s.jsx)("span",{className:o.sideCommentIcon,children:(0,s.jsx)(tX.default,{colorClass:o.lineColor})})})})},t6=e=>{let{commentIds:t,post:n}=e,o=(0,M.useStyles)(t0),{eventHandlers:i,hover:r,anchorEl:l}=(0,eM.useHover)(),[d,c]=(0,a.useState)("auto"),m="open"===d||"auto"===d&&r;return(0,s.jsx)(ta.SideItem,{options:{format:"icon"},children:(0,s.jsxs)("div",{className:o.sideCommentIconWrapper,onMouseLeave:()=>{"closed"===d&&c("auto")},children:[(0,s.jsx)("span",{...i,onClick:()=>{"open"===d?c("closed"):c("open")},className:o.sideCommentIcon,children:(0,s.jsxs)("span",{className:o.desktopIcon,children:[(0,s.jsx)(t1,{commentCount:t.length,children:(0,s.jsx)(z.default,{className:(0,f.default)({[o.pinned]:"open"===d})})}),m&&(0,s.jsxs)("span",{className:o.clickToPinMessage,children:["Click to ","open"===d?"close":"pin"]}),m&&(0,s.jsx)("span",{className:o.extendHoverTarget})]})}),(0,s.jsx)(e0.default,{open:m,anchorEl:l,className:o.popper,clickable:!0,allowOverflow:!0,placement:"bottom-start",children:(0,s.jsx)(tZ.default,{onClickAway:e=>{(0,tQ.default)(e.composedPath(),e=>{var t;return null==(t=e.classList)?void 0:t.contains(o.sideCommentIcon)})||c("auto")},children:(0,s.jsx)(t8,{post:n,commentIds:t})})})]})})},t8=e=>{let{commentIds:t,post:n,closeDialog:o}=e,i=(0,M.useStyles)(t0),a=1===t.length;return(0,s.jsx)("div",{className:i.sideCommentHover,children:t.map(e=>(0,s.jsx)(t9,{commentId:e,post:n,dontTruncateRoot:a,closeDialog:o},e))})},t7=(0,ee.gql)("\n  query SideCommentSingle($commentId: String!) {\n    comment(input: { selector: { _id: $commentId } }) {\n      result {\n        ...CommentWithRepliesFragment\n      }\n    }\n  }\n"),t9=e=>{var t,n;let{commentId:o,post:i,dontTruncateRoot:r=!1,closeDialog:l}=e,d=(0,M.useStyles)(t0),c=(0,tV.useTheme)(),m=(0,tV.useThemeColor)(e=>e.palette.blockquoteHighlight.commentHovered),p=(0,tY.useApolloClient)().cache.readFragment({fragment:t$,fragmentName:"CommentWithRepliesFragment",id:"Comments:"+o}),{data:u}=(0,J.useQuery)(t7,{variables:{commentId:o}}),h=null==u||null==(t=u.comment)?void 0:t.result,g=null!=h?h:p,f=g?{...g,post:i,tag:null,latestChildren:null!=(n=null==h?void 0:h.latestChildren)?n:[]}:null,[x,y]=(0,a.useState)(null),v=(0,a.useRef)(null);return((0,a.useEffect)(()=>{let e=v.current;if(!e)return;let t=e=>{let t=null;for(let n of e.composedPath())if("BLOCKQUOTE"===n.tagName){t="blockquote_".concat(o,"_1");break}t!==x&&y(t)};return e.addEventListener("mousemove",t),()=>{e.removeEventListener("mousemove",t)}},[o,x,v.current]),f)?(0,s.jsxs)("div",{ref:v,children:[m&&(0,s.jsx)("style",{children:".blockquote_".concat(o,"_1 {\n          background: ").concat(m,";\n          ").concat(c.palette.blockquoteHighlight.addedBlockquoteHighlightStyles,"\n      }")}),(0,s.jsx)(tJ.default,{comment:f,post:i,commentNodeProps:{treeOptions:{showPostTitle:!1,showCollapseButtons:!1,replaceReplyButtonsWith:e=>(0,s.jsx)("a",{href:"#"+e._id,className:d.seeInContext,onClick:l,children:"See in context"}),hideActionsMenu:!0,isSideComment:!0},...r?{forceUnTruncated:!0}:{}}})]}):null};var ne=e.i(916449),nt=e.i(121319);let nn=(0,ee.gql)("\n  query PostBody($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostSideComments\n      }\n    }\n  }\n"),no=(0,r.registerComponent)("PostBody",e=>{var t,n,o;let i,{post:r,html:l,isOldVersion:d,voteProps:c}=e,{showAllTerms:m,setShowAllTerms:p,termsToHighlight:g,unapprovedTermsCount:f,approvedTermsCount:y}=function(e){let{captureEvent:t}=(0,u.useTracking)(),[n,o]=(0,a.useState)(!1),i="glossary"in e;(0,tq.useGlobalKeydown)(e=>{e.altKey&&e.shiftKey&&71===e.keyCode&&(e.preventDefault(),i&&(o(!n),t("toggleShowAllTerms",{newValue:!n,source:"hotkey"})))});let s=(0,a.useCallback)((e,n,i)=>{e.preventDefault(),e.stopPropagation(),o(n),t("toggleShowAllTerms",{newValue:n,source:i})},[o,t]);if(!i)return{showAllTerms:!1,setShowAllTerms:()=>{},termsToHighlight:[],unapprovedTermsCount:0,approvedTermsCount:0};let r=e.glossary.filter(e=>e.approved&&!e.deleted),l=n?e.glossary:r,d=r.length;return{showAllTerms:n,setShowAllTerms:s,termsToHighlight:l,unapprovedTermsCount:e.glossary.length-d,approvedTermsCount:d}}(r),v=(0,a.useContext)(W.SideItemVisibilityContext),b=d?"hidden":null!=(o=null==v?void 0:v.sideCommentMode)?o:"hidden",w=(0,x.hasSideComments)()&&b&&"hidden"!==b,{data:C}=(0,J.useQuery)(nn,{variables:{documentId:r._id},skip:!w}),j=null==C||null==(t=C.post)?void 0:t.result,S=r.votingSystem||"default",k=(0,F.getVotingSystemByName)(S),I=((null==(n=r.user)?void 0:n.karma)||0)<h.nofollowKarmaThreshold.get(),N=(0,a.useRef)(null),T=[...k.getPostHighlights?k.getPostHighlights({post:r,voteProps:c}):[],..."glossary"in r?(0,tz.jargonTermsToTextReplacements)(g):[]],P="glossary"in r&&(0,s.jsx)(nt.default,{post:r,showAllTerms:m,setShowAllTerms:p,unapprovedTermsCount:f,approvedTermsCount:y});if(w&&(null==j?void 0:j.sideComments)){let e=j.sideComments.html,t="highKarma"===b?j.sideComments.highKarmaCommentsByBlock:j.sideComments.commentsByBlock,n=(0,tU.default)(t,e=>(0,s.jsx)(t2,{post:r,commentIds:e}));i=(0,s.jsx)(tk.ContentItemBody,{dangerouslySetInnerHTML:{__html:e},ref:N,description:"post ".concat(r._id),nofollow:I,replacedSubstrings:T,idInsertions:n},"".concat(r._id,"_").concat(b))}else i=(0,s.jsx)(tk.ContentItemBody,{dangerouslySetInnerHTML:{__html:l},ref:N,description:"post ".concat(r._id),nofollow:I,replacedSubstrings:T});return(0,x.inlineReactsHoverEnabled)()?(0,s.jsxs)(ne.default,{contentRef:N,voteProps:c,styling:"post",children:[P,i]}):(0,s.jsxs)(s.Fragment,{children:[P,i]})},{areEqual:"auto"});var ni=e.i(312104),ns=e.i(537872),na=e.i(576955),nr=e.i(909817),nl=e.i(166540),nd=e.i(780239),nc=e.i(555336),nm=e.i(113436),np=e.i(245314),nu=e.i(820010),nh=e.i(819131),ng=e.i(86378),nf=e.i(403276),nx=e.i(907031);let ny=(0,r.registerComponent)("DebateCommentsListSection",e=>{let{post:t,totalComments:n,comments:o,newForm:i=!0,newFormProps:a={},classes:r}=e,d=(0,c.useCurrentUser)(),m=(0,N.unflattenComments)(o),p=(null==t?void 0:t.lastVisitedAt)?new Date(t.lastVisitedAt):void 0,u=t.user,h=d&&(null==t?void 0:t.debate)&&(d._id===(null==u?void 0:u._id)||(0,l.userIsPostCoauthor)(d,t));return(0,s.jsxs)("div",{className:(0,f.default)(r.root,r.maxWidthRoot),children:[(0,s.jsx)("div",{id:"comments"}),i&&(!d||!t||(0,nu.userIsAllowedToComment)(d,t,u,!1))&&(!(null==t?void 0:t.draft)||h||(0,eW.userIsAdmin)(d))&&(0,s.jsxs)("div",{id:"posts-debate-thread-new-comment",className:r.newComment,children:[(0,s.jsx)("div",{className:r.newCommentLabel,children:"New Comment"}),(0,s.jsx)(nh.default,{post:t,interactionType:"comment",...a})]}),d&&t&&!(0,nu.userIsAllowedToComment)(d,t,u,!1)&&(0,s.jsx)(ng.default,{post:t}),(0,s.jsx)("div",{className:r.debateCommentsList,children:(0,s.jsx)(nf.default,{treeOptions:{highlightDate:null!=p?p:void 0,post:t,postPage:!0,showCollapseButtons:!0,hideParentCommentToggle:!0,forceSingleLine:!0},totalComments:n,comments:m})}),(0,s.jsx)(nx.default,{})]})},{styles:e=>({root:{fontWeight:400,margin:"10px auto 5px auto",...e.typography.commentStyle,position:"relative"},maxWidthRoot:{maxWidth:720},inline:{display:"inline",color:e.palette.text.secondary},clickToHighlightNewSince:{display:"inline",color:e.palette.text.secondary,"@media print":{display:"none"}},button:{color:e.palette.lwTertiary.main},newComment:{border:e.palette.border.commentBorder,position:"relative",borderRadius:3,marginBottom:"1.3em","@media print":{display:"none"}},newCommentLabel:{paddingLeft:1.5*e.spacing.unit,...e.typography.commentStyle,...e.typography.body2,fontWeight:600,marginTop:12},newCommentSublabel:{paddingLeft:1.5*e.spacing.unit,...e.typography.commentStyle,color:e.palette.grey[600],fontStyle:"italic",marginTop:4},debateCommentsList:{}})});var nv=e.i(536059);let nb=(0,r.registerComponent)("DebateResponse",e=>{var t,n,o,i;let{classes:r,comment:l,replies:d,idx:m,responseCount:p,orderedParticipantList:u,post:h}=e,[g,x]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),b=l.votingSystem||"default",w=(0,F.getVotingSystemByName)(b),C=(0,L.useVote)(l,"Comments",w),j=(0,a.useRef)(null),S=null!=(n=null==(t=ty.commentBottomComponents[b])?void 0:t.call(ty.commentBottomComponents))?n:null,k=new Set([h.userId,...h.coauthorUserIds]),I=(0,c.useCurrentUser)(),N=m===p-1,T=u.indexOf(null!=(o=l.userId)?o:""),P=I&&k.has(I._id),A=N&&!P,B=d.length>0||A,R=null!=(i=r["border".concat(T)])?i:r.border0,_=0===m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nd.default,{comment:l,className:r.username}),(0,s.jsx)("span",{children:" "}),(0,s.jsx)(nc.default,{comment:l,post:h})]}),W=(0,s.jsx)(np.default,{comment:l,post:h,showEdit:()=>v(!0),className:r.menu}),M=y?(0,s.jsx)(nm.default,{comment:l,successCallback:()=>v(!1),cancelCallback:()=>v(!1),className:r.editForm,formProps:{post:h}}):(0,s.jsx)("div",{children:(0,s.jsx)(K.default,{comment:l,voteProps:C,commentBodyRef:j})}),O=B&&(0,s.jsxs)("a",{className:(0,f.default)("comments-item-reply-link",r.replyLink),onClick:e=>x(!g),children:["Reply ",(0,s.jsxs)("span",{children:["(",d.filter(e=>e.topLevelCommentId===l._id).length,")"]})]}),E=(0,s.jsx)(ny,{comments:d,totalComments:d.length,post:h,newForm:A,newFormProps:{parentComment:l,formStyle:"minimalist"}}),D=g&&B&&E;return(0,s.jsx)(nv.default,{voteProps:C,children:(0,s.jsxs)("div",{id:"debate-comment-".concat(l._id),className:(0,f.default)(r.innerDebateComment,R,{[r.blockMargin]:N}),children:[_,W,(0,s.jsx)("div",{className:r.commentWithReplyButton,children:M}),D,(0,s.jsxs)("div",{className:r.bottomUI,children:[S&&(0,s.jsx)(S,{document:l,hideKarma:h.hideCommentKarma,collectionName:"Comments",votingSystem:w,commentBodyRef:j,voteProps:C,post:h}),O]})]},"debate-comment-".concat(l._id))})},{styles:e=>({innerDebateComment:{marginTop:6,padding:"8px 8px 8px 16px",borderLeft:"solid",borderLeftWidth:"2px","&:hover $menu":{opacity:.5},...e.typography.commentStyle,position:"relative"},blockMargin:{marginBottom:16},commentWithReplyButton:{display:"flex",justifyContent:"space-between",alignItems:"end"},username:{marginRight:6,fontSize:"1.35rem"},replyLink:{color:e.palette.link.dim,"@media print":{display:"none"},minWidth:"fit-content",marginLeft:10},hideReplyLink:{visibility:"hidden"},menu:{opacity:0,marginRight:"-30px",float:"right"},editForm:{width:"100%"},border0:{borderColor:e.palette.text.debateComment[1]},border1:{borderColor:e.palette.text.debateComment[2]},border2:{borderColor:e.palette.text.debateComment[3]},border3:{borderColor:e.palette.text.debateComment[4]},border4:{borderColor:e.palette.text.debateComment[5]},border5:{borderColor:e.palette.text.debateComment[6]},bottomUI:{position:"absolute",right:10,bottom:-12,display:"flex",alignItems:"center"}})}),nw=(0,r.registerComponent)("DebateResponseBlock",e=>{let{responses:t,post:n,orderedParticipantList:o,daySeparator:i,classes:a}=e;return(0,s.jsxs)("div",{children:[i&&(0,s.jsx)("div",{className:a.divider,children:(0,s.jsx)("span",{className:a.dividerLabel,children:i})}),t.map((e,i)=>{let{comment:a,replies:r}=e;return(0,s.jsx)(nb,{comment:a,replies:r,idx:i,responseCount:t.length,orderedParticipantList:o,responses:t,post:n},"debateBlock".concat(a._id))})]})},{styles:e=>({divider:{display:"flex",alignItems:"center",justifyContent:"center",borderTop:e.palette.border.normal,height:0,position:"relative",marginBottom:"16px"},dividerLabel:{width:"fit-content",paddingLeft:6,paddingRight:6,background:e.palette.background.pageActiveAreaBackground,...e.typography.subheading}}),stylePriority:200});var nC=e.i(345955);let nj=(0,r.registerComponent)("DebateBody",e=>{let{debateResponses:t,post:n,classes:o}=e,i=(0,nC.filterNonnull)((0,nr.default)(t.map(e=>{let{comment:t}=e;return t.userId})));return(0,s.jsx)(_.default,{ssr:!1,children:(0,s.jsx)("div",{className:o.root,children:Object.entries((0,na.default)(t,e=>{let{comment:t}=e;return(0,nl.default)(t.postedAt).format("MMM DD, YYYY")})).sort((e,t)=>{let[n]=e,[o]=t;return(0,nl.default)(n).diff(o)}).flatMap((e,t)=>{let o,[a,r]=e,l=[];return r.sort((e,t)=>(0,nl.default)(e.comment.postedAt).diff(t.comment.postedAt)).forEach(e=>{let t=e.comment.userId;if(t===o){var n;let t=null!=(n=l.pop())?n:[];t.push(e),l.push(t)}else{o=t;let n=[e];l.push(n)}}),l.map((e,o)=>{let r=0===o;return(0,s.jsx)(nw,{responses:e,post:n,orderedParticipantList:i,...r?{daySeparator:a}:{}},"debate-comment-block-".concat(t,"-").concat(o))})})})})},{styles:e=>({root:{}})});var nS=e.i(782611),nk=e.i(197623),nI=e.i(900914),nN=e.i(128380);let nT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[o]=(0,eO.useMutation)((0,ee.gql)("\n      mutation observeRecommendation($postId: String!) {\n        observeRecommendation(postId: $postId)\n      }\n    "),{errorPolicy:"all"}),[i]=(0,eO.useMutation)((0,ee.gql)("\n      mutation clickRecommendation($postId: String!) {\n        clickRecommendation(postId: $postId)\n      }\n    "),{errorPolicy:"all"});return{ref:(e=>{let{onEnter:t,onExit:n,threshold:o=.8,maxTriggers:i=-1}=e,s=(0,a.useRef)(0),r=(0,a.useRef)(0),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=l.current;if(e){let a=new IntersectionObserver(e=>{let[{isIntersecting:o}]=e;o?(i<0||s.current<i)&&(s.current++,null==t||t()):(i<0||r.current<i)&&(r.current++,null==n||n())},{threshold:o});return a.observe(e),()=>a.unobserve(e)}},[l,t,n,o,i]),l})({onEnter:(0,a.useCallback)(()=>{n||o({variables:{postId:e}})},[e,o,n]),maxTriggers:1}),onClick:(0,a.useCallback)(o=>{n||i({variables:{postId:e}}),null==t||t(o)},[e,i,n,t])}};var nP=e.i(764226),nA=e.i(927907),nB=e.i(93495);let nR=(0,r.registerComponent)("PostsPageRecommendationItem",e=>{var t,n;let{post:o,disableAnalytics:i,className:a,classes:r}=e,d=(0,l.postGetPageUrl)(o,!1,null==(t=o.canonicalSequence)?void 0:t._id),{onClick:c}=(0,nN.useClickableCell)({href:d}),{ref:m,onClick:p}=nT(o._id,c,i);return(0,s.jsxs)("div",{onClick:p,ref:m,className:(0,f.default)(r.root,a),children:[(0,s.jsxs)("div",{className:r.karma,children:[(0,s.jsx)("div",{children:(0,s.jsx)(nA.default,{document:o})}),(0,s.jsx)("div",{className:r.voteArrow,children:(0,s.jsx)(nI.SoftUpArrowIcon,{})})]}),(0,s.jsxs)("div",{className:r.titleContainer,children:[(0,s.jsx)(nB.default,{post:o,Wrapper:e=>{let{children:t}=e;return(0,s.jsx)(nP.default,{post:o,As:"span",children:(0,s.jsx)(ea.Link,{to:d,children:t})})},isLink:!1,curatedIconLeft:!0,className:r.title}),(0,s.jsx)("div",{className:r.author,children:(0,s.jsxs)(nN.InteractionWrapper,{className:r.interactionWrapper,children:[(0,s.jsx)($.default,{user:o.user}),!!(null==(n=o.coauthors)?void 0:n.length)&&(0,s.jsx)(D.default,{title:(0,s.jsx)("div",{children:o.coauthors.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)($.default,{user:e})},t))}),children:(0,s.jsxs)("span",{className:r.coauthors,children:["+",o.coauthors.length," more"]})})]})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(nN.InteractionWrapper,{children:(0,s.jsx)(U.default,{post:o,vertical:!0,autoPlace:!0})})})]})},{styles:e=>({root:{position:"relative",display:"flex",gap:"10px",alignItems:"baseline",color:e.palette.grey[600],fontFamily:e.palette.fonts.sansSerifStack,fontSize:13,fontWeight:500,padding:"10px 0",cursor:"pointer",borderRadius:e.borderRadius.default,"&:hover":{background:e.palette.grey[100]}},karma:{display:"flex","& *:first-child":{width:24,textAlign:"right"}},voteArrow:{transform:"translateY(-2px)",color:e.palette.grey[400]},titleContainer:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"baseline",[e.breakpoints.down("xs")]:{whiteSpace:"unset",flexDirection:"column"}},title:{fontSize:16,fontWeight:600,color:e.palette.grey[1e3],flexGrow:1},author:{textAlign:"right",whiteSpace:"nowrap",[e.breakpoints.down("xs")]:{marginTop:4}},coauthors:{marginLeft:3},interactionWrapper:{"&:hover":{opacity:1}}})});var nL=e.i(563665);let nF=(eB.MAX_COLUMN_WIDTH-eB.CENTRAL_COLUMN_WIDTH)/4,n_=(0,r.registerComponent)("PostsPageRecommendationsList",e=>{var t;let{title:n="More posts like this",strategy:o="moreFromTag",bias:i,features:a,forceLoggedOutView:r,classes:l}=e,d=null==(t=(0,v.usePostsPageContext)())?void 0:t.fullPost;if(!d)return null;let c={strategy:{name:o,postId:d._id,bias:i,features:a,forceLoggedOutView:r,context:"post-bottom"},count:3},m=(0,s.jsx)("div",{className:l.listWrapper,children:(0,s.jsx)(nL.default,{})});return(0,s.jsxs)("div",{className:l.root,children:[n&&(0,s.jsx)(nS.default,{title:n,titleClassName:l.title}),(0,s.jsx)(_.default,{ssr:!1,fallback:m,children:(0,s.jsx)(nk.default,{algorithm:c,loadingFallback:m,ListItem:e=>(0,s.jsx)(nR,{...e,translucentBackground:!0,className:l.item,disableAnalytics:r})})})]})},{styles:e=>({root:{background:e.palette.grey[55],borderRadius:e.borderRadius.default,padding:"0 ".concat(nF,"px 16px ").concat(nF,"px"),maxWidth:"100%"},title:{paddingTop:20,paddingLeft:nF},item:{paddingLeft:nF},listWrapper:{minHeight:126,[e.breakpoints.down("sm")]:{minHeight:180}}})});var nW=e.i(315174);let nM=(0,r.registerComponent)("SideRecommendation",e=>{let{post:t,classes:n}=e,o=(0,l.postGetPageUrl)(t),{onClick:i}=(0,nN.useClickableCell)({href:o}),{ref:r,onClick:d}=nT(t._id),c=(0,a.useCallback)(e=>{d(e),i(e)},[i,d]);return(0,s.jsxs)("div",{className:n.root,onClick:c,ref:r,children:[(0,s.jsxs)("div",{className:n.karma,children:[(0,s.jsx)("div",{className:n.voteArrow,children:(0,s.jsx)(E.default,{icon:"SoftUpArrow"})}),(0,s.jsx)(nA.default,{document:t})]}),(0,s.jsx)(nP.default,{post:t,children:(0,s.jsx)(ea.Link,{to:o,onClick:e=>e.preventDefault(),children:t.title})})]})},{styles:e=>({root:{display:"flex",alignItems:"center",fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:500,lineHeight:"160%",background:"transparent",borderRadius:e.borderRadius.default,padding:"8px 8px 8px 0",marginBottom:4,cursor:"pointer","& a":{color:e.palette.grey[1e3],"&:hover":{opacity:1}},"&:hover":{background:e.palette.grey[100]}},karma:{width:50,minWidth:50,display:"flex",marginLeft:-6,flexDirection:"column",alignItems:"center",color:e.palette.grey[600]},voteArrow:{color:e.palette.grey[400],margin:"-6px 0 2px 0",height:16,"& svg":{width:10}}})}),nO=(e,t)=>{let n={strategy:{context:"post-right",...t},count:3,disableFallbacks:!0},{recommendations:o=[],recommendationsLoading:i}=(0,nW.useRecommendations)({algorithm:n});return{loading:i,title:e,items:o.map(e=>()=>(0,s.jsx)(nM,{post:e}))}},nE=e=>nO("More posts like this",{name:"tagWeightedCollabFilter",postId:e._id}),nD=e=>{let t=(0,l.postGetPrimaryTag)(e,!0);if(!t)throw Error("Couldn't choose recommendation tag");return nO("More in ".concat(t.name),{name:"newAndUpvotedInTag",postId:e._id,tagId:t._id})},nH=(0,r.registerComponent)("IntercomFeedbackButton",e=>{let{title:t="Give feedback",eventName:n,className:o,classes:i}=e,r=(0,c.useCurrentUser)(),{captureEvent:l}=(0,u.useTracking)(),d=(0,a.useCallback)(()=>{window.Intercom("trackEvent",n),l(n)},[n,l]);return(0,s.jsx)(D.default,{title:(null==r?void 0:r.hideIntercom)?"You must enable Intercom in your user settings":"",children:(0,s.jsx)("a",{onClick:d,className:(0,f.default)(i.root,o),children:t})})},{styles:e=>({root:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:13,fontWeight:600,color:"".concat(e.palette.grey[600]," !important"),"&:hover":{color:"".concat(e.palette.grey[800]," !important"),opacity:1}}}),stylePriority:-5}),nU=(0,r.registerComponent)("PostSideRecommendations",e=>{var t;let{post:n,className:o,classes:i}=e,{captureEvent:r}=(0,u.useTracking)(),{loading:l,title:d,Container:m="div",items:p,hideCookieName:h}=(t=(0,c.useCurrentUser)(),((e,t,n)=>{let[o]=(0,b.useCookiesWithConsent)(),i=(0,a.useRef)(null);if(!i.current){let s,a=(s=[nE.bind(null,n)],n.tags.length&&s.push(nD.bind(null,n)),t||o[w.HIDE_MORE_FROM_THE_FORUM_RECOMMENDATIONS_COOKIE],s),r=Math.floor(e)%a.length;i.current=a[r]}return i.current})((0,eF.useSsrRenderedAt)().getTime(),t,n)(n)),[g,x]=(0,b.useCookiesWithConsent)(h?[h]:[]),y=(0,a.useCallback)(e=>{e.preventDefault(),h&&(x(h,"true",{expires:(0,nl.default)().add(365,"days").toDate(),path:"/"}),r("hidePostSideRecommendations",{title:d,hideCookieName:h}))},[h,x,r,d]);return h&&"true"===g[h]||!l&&p.length<1?null:(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"postSideRecommendations",children:(0,s.jsxs)("div",{className:(0,f.default)(i.root,o),children:[(0,s.jsx)("div",{className:i.title,children:d}),l&&(0,s.jsx)(eH.default,{}),(0,s.jsx)(m,{className:i.list,children:p.map((e,t)=>(0,s.jsx)(e,{},t))}),(0,s.jsxs)("div",{className:i.buttons,children:[(0,s.jsx)(nH,{eventName:"postSideRecommendationsFeedback"}),h&&(0,s.jsx)("a",{onClick:y,className:i.hideButton,children:"Hide"})]})]})})},{styles:e=>({root:{marginTop:"100vh",background:e.palette.grey[55],padding:16,borderRadius:e.borderRadius.default,width:250,minWidth:250,maxWidth:250,"@media (max-width: 1250px)":{display:"none"}},title:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:600},list:{margin:"12px 0","& li":{fontFamily:e.palette.fonts.sansSerifStack,fontSize:13,fontWeight:500,marginBottom:4,lineHeight:"1.5em"},"& a":{color:e.palette.primary.main}},buttons:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between"},hideButton:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:13,fontWeight:600,color:"".concat(e.palette.grey[600]," !important"),"&:hover":{color:"".concat(e.palette.grey[800]," !important"),opacity:1}}})});var nz=e.i(633731),nq=e.i(107799),nV=e.i(846552);let nG=(0,ee.gql)("\n  query RecentOpportunitiesQuery($selector: PostSelector, $limit: Int) {\n    posts(selector: $selector, limit: $limit) {\n      results {\n        ...PostsListWithVotes\n      }\n    }\n  }\n"),nQ=(0,ee.gql)("\n  query RecentOpportunitiesWithSequenceQuery($selector: PostSelector, $limit: Int) {\n    posts(selector: $selector, limit: $limit) {\n      results {\n        ...PostsListWithVotesAndSequence\n      }\n    }\n  }\n"),nY=["z8qFsGt5iXyZiLbjN"],n$=["fCcrMpyRbozMfwYPF","be4pBryMKxLhkmgvE","2BvgFyR85zX25osTT","54Ls7K7N53kYws9ja","vgT4Fiybt4qjHLoBv","ihpwNfh2ZxR4ZHaAK"];var nK=e.i(622224),nX=e.i(387736),nZ=e.i(232794);let nJ=(0,r.registerComponent)("EALargePostsItem",e=>{var t;let{post:n,isNarrow:o,noImagePlaceholder:i,className:r,classes:d}=e,c=(0,a.useRef)(null),m=(0,l.postGetPageUrl)(n),{onClick:p}=(0,nN.useClickableCell)({href:m}),{eventHandlers:g}=(0,eM.useHover)({eventProps:{pageElementContext:"postListItem",documentId:n._id,documentSlug:n.slug}}),x=(0,nl.default)(new Date(n.postedAt)).fromNow(),y="now"!==x?(0,s.jsx)("span",{className:d.xsHide,children:"Â ago"}):null,v=n.socialPreviewData.imageUrl;v||i||(v=h.siteImageSetting.get());let b=null==n||null==(t=n.contents)?void 0:t.plaintextDescription;return(0,s.jsx)(u.AnalyticsContext,{documentSlug:n.slug,children:(0,s.jsxs)("div",{...g,onClick:p,className:(0,f.default)(d.postListItem,r),children:[(0,s.jsxs)("div",{className:d.postListItemTextSection,children:[(0,s.jsx)("div",{className:d.postListItemTitle,children:(0,s.jsx)(nP.default,{post:n,placement:"bottom",As:"span",children:(0,s.jsx)(nN.InteractionWrapper,{children:(0,s.jsx)(ea.Link,{to:m,children:n.title})})})}),(0,s.jsxs)("div",{className:d.postListItemMeta,children:[(0,s.jsx)("div",{ref:c,children:(0,s.jsx)(nN.InteractionWrapper,{children:(0,s.jsx)(nX.default,{post:n,expandContainer:c,className:d.authors})})}),"Â Â·Â ",(0,s.jsxs)(nZ.default,{dateTime:n.postedAt,children:[x,y]}),"Â Â·Â ",n.readTimeMinutes,"m read",(0,s.jsx)("div",{children:!o&&(0,s.jsxs)("span",{className:(0,f.default)(d.commentCount,d.xsHide),children:["Â Â·Â ",(0,s.jsx)(nN.InteractionWrapper,{children:(0,s.jsxs)(ea.Link,{to:"".concat(m,"#comments"),className:d.commentCount,children:[(0,s.jsx)(E.default,{icon:"Comment"}),n.commentCount]})})]})})]}),(0,s.jsx)("div",{className:d.postListItemPreview,children:b})]}),v&&(0,s.jsx)("img",{className:d.postListItemImage,src:v})]})})},{styles:e=>({postListItem:{cursor:"pointer",display:"flex",width:"100%",background:e.palette.grey[0],border:"1px solid ".concat(e.palette.grey[100]),borderRadius:e.borderRadius.default,padding:"16px 16px","&:hover":{background:e.palette.grey[50],border:"1px solid ".concat(e.palette.grey[250])}},postListItemTextSection:{fontFamily:e.palette.fonts.sansSerifStack,display:"flex",flexDirection:"column",fontWeight:500,flex:1,maxHeight:160,minWidth:0},postListItemTitle:{color:e.palette.text.normal,fontSize:16,fontWeight:600,marginBottom:2,lineHeight:"24px",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":2},postListItemMeta:{display:"flex",marginBottom:12,fontSize:13,lineHeight:"20px",color:e.palette.grey[600]},authors:{fontSize:"13px !important"},commentCount:{minWidth:58,marginLeft:4,display:"flex",alignItems:"center",cursor:"pointer","& svg":{height:18,marginRight:1},"&:hover":{color:e.palette.grey[800],opacity:1}},postListItemPreview:{fontSize:14,lineHeight:"1.5em",color:e.palette.grey[600],position:"relative",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":3,marginTop:"auto",marginBottom:"auto"},postListItemImage:{width:170,height:121,objectFit:"cover",marginLeft:16,borderRadius:e.borderRadius.small,[e.breakpoints.down("xs")]:{display:"none"}},xsHide:{[e.breakpoints.down("xs")]:{display:"none"}}}),stylePriority:-1});var n0=e.i(300891),n1=e.i(206697);let n2=(0,O.defineStyles)("PostBottomRecommendations",e=>({root:{background:e.isFriendlyUI?e.palette.grey[55]:"transparent",padding:"60px 0 80px 0",marginTop:60,[e.breakpoints.down("sm")]:{paddingLeft:8,paddingRight:8,marginLeft:-8,marginRight:-8}},section:{maxWidth:tL.MAX_CONTENT_WIDTH,margin:"0 auto 60px"},sectionHeading:{fontFamily:e.palette.fonts.sansSerifStack,fontSize:20,fontWeight:600,color:e.palette.grey[1e3],marginBottom:16},largePostItem:{marginTop:8},viewMore:{marginTop:12,fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:600,color:e.palette.grey[600]}})),n5=e=>{let{hasTableOfContents:t,children:n}=e;return(0,k.isFriendlyUI)()?(0,s.jsx)(tL.default,{tableOfContents:t?(0,s.jsx)("div",{}):null,notHideable:!0,children:n}):(0,s.jsx)(s.Fragment,{children:n})},n3=(0,r.registerComponent)("PostBottomRecommendations",e=>{var t;let{post:n,hasTableOfContents:o,ssr:i=!1}=e,r=(0,M.useStyles)(n2),l=n._id,d=(0,a.useMemo)(()=>({strategy:{name:"moreFromAuthor",postId:l,context:"post-footer"},count:3,disableFallbacks:!0}),[l]),{recommendationsLoading:c,recommendations:m}=(0,nW.useRecommendations)({algorithm:d,ssr:i}),{data:p,loading:h}=(0,J.useQuery)((0,ee.gql)("\n    query CuratedAndPopularThisWeek($limit: Int) {\n      CuratedAndPopularThisWeek(limit: $limit) {\n        results {\n          ...PostsListWithVotes\n        }\n      }\n    }\n  "),{variables:{limit:3},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:i}),g=null==p||null==(t=p.CuratedAndPopularThisWeek)?void 0:t.results,{results:f,loading:x,coreTagLabel:y}=(e=>{var t,n,o,i;let{fragmentName:s,limit:a=3,maxAgeInDays:r=7,post:l,ssr:d,skip:c}=e,m=null!=(o=null==l||null==(t=l.tags)?void 0:t.filter(e=>e.core&&!nY.includes(e._id)).sort((e,t)=>e.name<t.name?-1:1))?o:[],p=null!=(i=null==m?void 0:m.map(e=>e._id))?i:[],u=(0,nz.default)(n$,p),h=p.map(e=>({tagId:e,filterMode:"x30"})),g=(0,eF.useCurrentTime)(),f=(0,nl.default)(g).subtract(24*r,"hours").startOf("hour").toISOString(),x={magic:{filterSettings:{tags:[...nY.map(e=>({tagId:e,filterMode:"Required"})),...u.map(e=>({tagId:e,filterMode:"Subscribed"})),...h]},after:f}},{data:y,loading:v,error:b,networkStatus:w,refetch:C,loadMoreProps:j}=(0,nV.useQueryWithLoadMore)("PostsListWithVotesAndSequence"===s?nQ:nG,{variables:{selector:x,limit:a},skip:c,fetchPolicy:"cache-and-network",ssr:d}),S=null==y||null==(n=y.posts)?void 0:n.results,k=w===nq.NetworkStatus.loading,I={loading:v,loadingInitial:k,loadingMore:w===nq.NetworkStatus.fetchMore,refetch:C,showLoadMore:!j.hidden,loadMore:j.loadMore,loadMoreProps:j,limit:j.limit,error:b,count:null==S?void 0:S.length,totalCount:j.totalCount},N=null==S?void 0:S.flatMap(e=>Object.keys(e.tagRelevance)).filter(e=>p.includes(e)),T=(0,na.default)(N,e=>e),P=Object.keys(T).filter(e=>T[e].length===(null==S?void 0:S.length)),A=m.filter(e=>P.includes(e._id)),B=A.length?A[0].name:null;return{results:S,...I,coreTagLabel:B}})({fragmentName:"PostsListWithVotes",post:n,maxAgeInDays:60,ssr:i,skip:!(0,k.isFriendlyUI)()}),v=(0,nu.userGetProfileUrl)(n.user),b=n.user,w=b&&(c||!!(null==m?void 0:m.length));return(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"postPageFooterRecommendations",children:(0,s.jsx)("div",{className:r.root,children:(0,s.jsx)(n5,{hasTableOfContents:!!o,children:(0,s.jsxs)("div",{children:[w&&(0,s.jsxs)("div",{className:r.section,children:[(0,s.jsxs)("div",{className:r.sectionHeading,children:["More from"," ",(0,s.jsx)(n0.default,{user:b,inlineBlock:!1,children:(0,s.jsx)(ea.Link,{to:v,children:b.displayName})})]}),c&&!(null==m?void 0:m.length)&&(0,s.jsx)(nL.default,{}),(0,s.jsxs)(u.AnalyticsContext,{pageSubSectionContext:"moreFromAuthor",children:[null==m?void 0:m.map(e=>(0,s.jsx)(n1.default,{post:e},e._id)),(0,s.jsx)("div",{className:r.viewMore,children:(0,s.jsx)(ea.Link,{to:v,children:"View more"})})]})]}),(0,s.jsxs)("div",{className:r.section,children:[(0,s.jsx)("div",{className:r.sectionHeading,children:"Curated and popular this week"}),h&&!(null==g?void 0:g.length)&&(0,s.jsx)(nL.default,{}),(0,s.jsx)(u.AnalyticsContext,{pageSubSectionContext:"curatedAndPopular",children:null==g?void 0:g.map(e=>(0,k.isFriendlyUI)()?(0,s.jsx)(nJ,{post:e,className:r.largePostItem,noImagePlaceholder:!0},e._id):(0,s.jsx)(n1.default,{post:e},e._id))})]}),(0,k.isFriendlyUI)()&&(0,s.jsxs)("div",{className:r.section,children:[(0,s.jsxs)("div",{className:r.sectionHeading,children:[y?"Recent":"Relevant"," opportunities",y?" in ".concat(y):""]}),x&&!(null==f?void 0:f.length)&&(0,s.jsx)(nL.default,{}),(0,s.jsxs)(u.AnalyticsContext,{pageSubSectionContext:"recentOpportunities",children:[null==f?void 0:f.map(e=>(0,s.jsx)(nK.default,{post:e},e._id)),(0,s.jsx)("div",{className:r.viewMore,children:(0,s.jsx)(ea.Link,{to:"/topics/opportunities-to-take-action",children:"View more"})})]})]})]})})})})},{areEqual:"auto"});var n4=e.i(644971),n6=e.i(756838),n8=e.i(139267),n7=e.i(574589),n9=e.i(231080);let oe=(0,r.registerComponent)("AnswerCommentsList",e=>{let{post:t,parentAnswer:n,commentTree:o,treeOptions:i,classes:r}=e,l=n.descendentCount,d=(0,eF.useCurrentTime)(),c=(0,a.useMemo)(()=>({...i,highlightDate:(null==t?void 0:t.lastVisitedAt)?new Date(t.lastVisitedAt):d}),[i,null==t?void 0:t.lastVisitedAt,d]);return(0,s.jsx)("div",{className:r.commentsList,children:(0,s.jsx)(nf.default,{treeOptions:c,totalComments:l,comments:o,parentCommentId:n._id,parentAnswerId:n._id,defaultNestingLevel:1,startThreadTruncated:!0})})},{styles:e=>({commentsList:{marginLeft:-4,marginRight:-12,marginBottom:16,marginTop:8},noComments:{position:"relative",textAlign:"right",top:-(8*e.spacing.unit)},noCommentAnswersList:{borderTop:"transparent"},editor:{marginLeft:4*e.spacing.unit,marginTop:2*e.spacing.unit,paddingLeft:1.5*e.spacing.unit,paddingBottom:1.5*e.spacing.unit,borderTop:"solid 1px ".concat(e.palette.grey[300])},newComment:{padding:2.5*e.spacing.unit,textAlign:"right",color:e.palette.grey[600]},loadMore:{color:e.palette.primary.main,textAlign:"right"}})});var ot=e.i(197837);let on=(0,r.registerComponent)("Answer",e=>{let{comment:t,post:n,childComments:o,classes:i}=e,[r,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),m=(0,a.useRef)(null),p=t.votingSystem||"default",g=(0,F.getVotingSystemByName)(p),x=(0,L.useVote)(t,"Comments",g),{scrollToCommentId:y}=(0,eL.useCommentLinkState)(),v=(0,a.useCallback)(()=>{l(!0)},[l]),b=(0,a.useCallback)(()=>{l(!1)},[l]);(0,a.useCallback)(()=>{c(!0)},[]);let w=(0,a.useCallback)(()=>{c(!1)},[]),C=(0,eL.useCommentLink)({comment:t,post:n}),j=(0,k.isFriendlyUI)()?void 0:(0,s.jsx)(n7.default,{}),S=(0,a.useMemo)(()=>({postPage:!0,showCollapseButtons:!0,post:n,switchAlternatingHighlights:!0}),[n]),I="in-context"===h.commentPermalinkStyleSetting.get()&&y===t._id;return(0,s.jsx)("div",{className:(0,f.default)(i.root,{[i.promoted]:t.promoted}),children:t.deleted?(0,s.jsxs)("div",{className:i.deletedSection,id:t._id,children:[(0,s.jsx)(ev.Typography,{variant:"body2",className:i.deleted,children:"Answer was deleted"}),(0,k.isFriendlyUI)()&&(0,s.jsx)(C,{children:(0,s.jsx)(E.default,{icon:"Link",className:(0,f.default)(i.linkIcon,{[i.linkIconHighlighted]:I})})}),(0,s.jsx)(np.default,{className:i.menu,showEdit:v,comment:t,post:n,icon:j})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(u.AnalyticsContext,{pageElementContext:"answerItem",children:(0,s.jsx)(nv.default,{voteProps:x,children:(0,s.jsxs)("div",{className:i.answer,id:t._id,children:[(0,s.jsxs)("div",{className:i.answerHeader,children:[t.user&&(0,s.jsx)(ev.Typography,{variant:"body1",className:i.author,children:(0,s.jsx)($.default,{user:t.user})}),(0,s.jsx)(ev.Typography,{variant:"subheading",className:i.date,children:(0,s.jsx)(nc.default,{comment:t,post:n})}),(0,s.jsx)("span",{className:i.vote,children:(0,s.jsx)(X.default,{document:t,collectionName:"Comments"})}),(0,k.isFriendlyUI)()&&(0,s.jsx)(C,{children:(0,s.jsx)(E.default,{icon:"Link",className:(0,f.default)(i.linkIcon,{[i.linkIconHighlighted]:I})})}),(0,s.jsx)(np.default,{className:i.menu,showEdit:v,comment:t,post:n,icon:j})]}),t.promotedByUser&&(0,s.jsxs)("div",{className:i.metaNotice,children:["Pinned by ",t.promotedByUser.displayName]}),r?(0,s.jsx)(nm.default,{comment:t,successCallback:b,cancelCallback:b}):(0,s.jsx)(K.default,{commentBodyRef:m,comment:t,voteProps:x}),(0,s.jsx)(ot.default,{comment:t,post:n,treeOptions:S,votingSystem:g,voteProps:x,commentBodyRef:m,replyButton:!d&&(0,s.jsx)(ev.Typography,{variant:"body2",onClick:()=>c(!0),className:(0,f.default)(i.newComment),children:(0,s.jsx)("a",{children:"Add Comment"})})})]})})}),(0,s.jsx)("div",{children:d&&(0,s.jsx)("div",{children:(0,s.jsx)(nh.default,{post:n,parentComment:t,prefilledProps:{parentAnswerId:t._id},successCallback:w,cancelCallback:w,interactionType:"reply"})})}),(0,s.jsx)(oe,{post:n,commentTree:o,treeOptions:S,parentAnswer:t})]})})},{styles:e=>({root:{marginBottom:4*e.spacing.unit,paddingTop:2.5*e.spacing.unit,paddingLeft:2.5*e.spacing.unit,paddingRight:2.5*e.spacing.unit,border:"solid 2px ".concat(e.palette.grey[300]),[e.breakpoints.down("md")]:{marginLeft:"auto",marginRight:"auto"}},answer:{},answerHeader:{display:"flex",alignItems:"center",marginBottom:2*e.spacing.unit,flexWrap:"wrap"},author:{display:"inline-block",fontWeight:600,...e.typography.postStyle,...e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack}:{}},date:{display:"inline-block",marginLeft:10,flexGrow:0,flexShrink:0},vote:{display:"flex",marginLeft:10,fontFamily:e.typography.commentStyle.fontFamily,color:e.palette.grey[500],flexShrink:0,flexGrow:1,position:"relative",top:e.isFriendlyUI?0:-4},footer:{marginTop:5,marginLeft:-13,display:"flex",alignItems:"center"},separator:{borderColor:e.palette.grey[200],width:"25%",marginTop:4*e.spacing.unit,marginBottom:8*e.spacing.unit},linkIcon:{fontSize:"1.2rem",color:e.palette.icon.dim,margin:"0 4px",position:"relative"},linkIconHighlighted:{strokeWidth:"0.7px",stroke:"currentColor",color:e.palette.primary.main},menu:{opacity:.5,cursor:"pointer","&:hover":{opacity:1}},deletedSection:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,marginTop:50},deleted:{color:e.palette.grey[500]},footerVote:{fontSize:42,textAlign:"center",marginRight:e.spacing.unit},footerRight:{marginTop:2*e.spacing.unit},newComment:{marginTop:16,color:e.palette.grey[500]},metaData:{textAlign:"right"},promoted:{border:"solid 2px ".concat(e.palette.lwTertiary.main)},metaNotice:{...(0,n9.metaNoticeStyles)(e),...e.typography.commentStyle,marginTop:-12,marginBottom:10},retracted:{textDecoration:"line-through"}}),hocs:[m.default]});var oo=e.i(819983);let oi=()=>({top:(0,k.isFriendlyUI)()?"Top":"top scoring",magic:(0,k.isFriendlyUI)()?"New & upvoted":"magic (new & upvoted)",newest:(0,k.isFriendlyUI)()?"New":"newest",oldest:(0,k.isFriendlyUI)()?"Old":"oldest",recentComments:(0,k.preferredHeadingCase)("latest reply")}),os=(0,r.registerComponent)("AnswersSorting",e=>{let{post:t}=e,n=(0,e4.useNavigate)(),o=(0,e4.useLocation)(),{query:i}=o,a=[...Object.keys(oi())],r=(null==i?void 0:i.answersSorting)||"top",l=a.map(e=>({value:e,label:oi()[e]||e})),d=l.find(e=>e.value===r)||l[0];return(0,s.jsx)(oo.default,{options:l,selected:d,handleSelect:e=>{let i=e.value,{query:s}=o,a={...(0,j.default)(s)?{answersSorting:"top"}:s,answersSorting:i,postId:t?t._id:void 0};n({...o.location,search:"?".concat(S.default.stringify(a))})}})}),oa=(0,r.registerComponent)("AnswersList",e=>{let{post:t,answersTree:n,classes:o}=e,{query:i}=(0,e4.useLocation)();return(null==n?void 0:n.length)?(0,s.jsxs)("div",{className:o.root,children:[(0,s.jsx)(nS.default,{title:(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{children:[n.length," Answers "]}),(0,s.jsxs)("span",{className:o.answersSorting,children:["sorted by ",(0,s.jsx)(os,{post:t})]})]})}),(0,s.jsx)("div",{className:o.answersList,children:n.map((e,n)=>(0,s.jsx)(on,{comment:e.item,post:t,childComments:e.children},e.item._id))})]}):null},{styles:e=>({root:{width:650+4*e.spacing.unit,[e.breakpoints.down("md")]:{width:"unset"}},answersList:{marginTop:2*e.spacing.unit,marginBottom:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},answersSorting:{...e.typography.body1,color:e.palette.text.secondary,...e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack}:{}},loading:{opacity:.5}})});var or=e.i(355727),ol=e.i(290391),od=e.i(851364);let oc=(0,r.registerComponent)("NewAnswerCommentQuestionForm",e=>{let{post:t,classes:n}=e,[o,i]=(0,a.useState)("answer"),[r,l]=(0,a.useState)(!1),d=(0,c.useCurrentUser)(),{openDialog:m}=(0,y.useDialog)();return(0,s.jsxs)("div",{className:n.root,onFocus:()=>(0,od.afNonMemberDisplayInitialPopup)(d,m),children:[(0,s.jsx)("div",{className:(0,f.default)(n.whitescreen,{[n.displayWhitescreen]:r})}),(0,s.jsxs)("div",{className:n.form,children:[(0,s.jsxs)("div",{className:n.chooseResponseType,children:[(0,s.jsx)(ex.TooltipRef,{title:"Write an answer or partial-answer to the question (i.e. something that gives the question author more information, or helps others to do so)",children:e=>(0,s.jsx)("div",{ref:e,onClick:()=>i("answer"),className:(0,f.default)(n.responseType,{[n.selected]:"answer"===o}),children:"New Answer"})}),(0,s.jsx)(ex.TooltipRef,{title:"Discuss the question or ask clarifying questions",children:e=>(0,s.jsx)("div",{onClick:()=>i("comment"),className:(0,f.default)(n.responseType,{[n.selected]:"comment"===o}),children:"New Comment"})}),(0,s.jsx)("div",{className:n.toggleFocus,onClick:()=>{l(!r)},children:r?(0,s.jsx)(ex.TooltipSpan,{title:"Exit focus mode",children:(0,s.jsx)(ol.default,{})}):(0,s.jsx)(ex.TooltipSpan,{title:"Enter focus mode",children:(0,s.jsx)(or.default,{})})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(nh.default,{post:t,interactionType:"comment",isAnswer:"answer"===o})})]})]})},{styles:e=>({root:{borderTop:e.palette.border.intense,maxWidth:650+4*e.spacing.unit,[e.breakpoints.down("md")]:{marginLeft:"auto",marginRight:"auto"}},chooseResponseType:{display:"flex",justifyContent:"space-between",padding:e.spacing.unit},responseType:{...e.typography.commentStyle,fontSize:16,width:"calc(50% - 12px)",textAlign:"center",padding:2*e.spacing.unit,color:e.palette.grey[500],marginRight:1.5*e.spacing.unit,cursor:"pointer","&:hover":{color:e.palette.text.normal,borderBottom:e.palette.border.normal}},selected:{color:e.palette.text.normal,borderBottom:e.palette.border.slightlyIntense3},form:{position:"relative",zIndex:e.zIndexes.textbox},disabled:{cursor:"default",color:e.palette.grey[400],"&:hover":{color:e.palette.grey[400],borderBottom:"unset"}},whitescreen:{display:"none",position:"fixed",inset:0,backgroundColor:e.palette.panelBackground.default,zIndex:e.zIndexes.questionPageWhitescreen},displayWhitescreen:{display:"block"},toggleFocus:{cursor:"pointer",paddingTop:1.5*e.spacing.unit,padding:e.spacing.unit}})}),om=(0,r.registerComponent)("RelatedQuestionsList",e=>{let{post:t,classes:n}=e,o=t.sourcePostRelations.filter(e=>!!e.sourcePost),i=t.targetPostRelations.filter(e=>e.sourcePostId===t._id&&!!e.targetPost),a=o.length+i.length,r=o.length>0,l=o.length>0&&i.length>0;return a?(0,s.jsxs)("div",{className:n.root,children:[a>0&&(0,s.jsx)(nS.default,{title:"".concat(a," Related Questions")}),r&&(0,s.jsxs)("div",{className:n.header,children:["Parent Question",o.length>1&&"s"]}),o.map((e,t)=>e.sourcePost&&(0,s.jsx)(n1.default,{post:e.sourcePost,index:t},e._id)),l&&(0,s.jsx)("div",{className:n.header,children:"Sub-Questions"}),i.map((e,o)=>{let i=e.targetPostId,a=t.targetPostRelations.filter(e=>e.sourcePostId===i),r=a.length>=1;return e.targetPost?(0,s.jsxs)("div",{className:n.subQuestion,children:[(0,s.jsx)(n1.default,{post:e.targetPost,index:o,showPostedAt:!1,showIcons:!1,showBottomBorder:!r,defaultToShowComments:!0}),r&&(0,s.jsx)("div",{className:n.subSubQuestions,children:a.map((e,t)=>e.targetPost&&(0,s.jsx)(n1.default,{post:e.targetPost,showPostedAt:!1,showIcons:!1,defaultToShowComments:!0,index:t},e._id))})]},e._id):null})]}):null},{styles:e=>({root:{width:650+4*e.spacing.unit,marginBottom:100,[e.breakpoints.down("md")]:{width:"unset",marginLeft:"auto",marginRight:"auto"}},header:{...e.typography.body2,marginTop:2*e.spacing.unit,marginBottom:e.spacing.unit/2,color:e.palette.grey[700]},subQuestion:{marginBottom:e.spacing.unit},subSubQuestions:{paddingLeft:e.spacing.unit,borderLeft:e.palette.border.slightlyFaint}}),hocs:[m.default]}),op=(0,r.registerComponent)("PostsPageQuestionContent",e=>{let{post:t,answersTree:n,refetch:o}=e,i=(0,c.useCurrentUser)(),a=t.user;return(0,s.jsxs)("div",{children:[(!i||(0,nu.userIsAllowedToComment)(i,t,a,!1))&&!t.draft&&(0,s.jsx)(oc,{post:t}),i&&!(0,nu.userIsAllowedToComment)(i,t,a,!1)&&(0,s.jsx)(ng.default,{post:t}),(0,s.jsx)(oa,{post:t,answersTree:n}),"sourcePostRelations"in t&&"targetPostRelations"in t&&(0,s.jsx)(om,{post:t})]})},{hocs:[m.default]}),ou=(0,ee.gql)("\n  query multiCommentAFUnreviewedCommentCountQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...SuggestAlignmentComment\n      }\n      totalCount\n    }\n  }\n"),oh=(0,r.registerComponent)("AFUnreviewedCommentCount",e=>{var t,n,o;let{post:i,classes:a}=e,{data:r,loading:l}=(0,J.useQuery)(ou,{variables:{selector:{alignmentSuggestedComments:{postId:i._id}},limit:10,enableTotal:!1},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),d=null!=(o=null==r||null==(n=r.comments)||null==(t=n.results)?void 0:t.length)?o:0;return l||!d?null:(0,s.jsxs)(tI.default,{contentType:"comment",className:a.root,children:["There are ".concat(d," comments pending acceptance to the Alignment Forum."),(0,s.jsx)("a",{href:"https://www.lesswrong.com/posts/".concat(i._id),className:a.viewLink,children:"View them on LessWrong."})]})},{styles:e=>({root:{fontWeight:400,marginTop:32,display:"flex",justifyContent:"center"},viewLink:{marginLeft:4}})});var og=e.i(732177),of=e.i(182312),ox=e.i(152302),oy=e.i(611138),ov=e.i(696589);let ob="CommentsTableOfContentsTitle",ow=(0,O.defineStyles)("CommentsTableOfContents",e=>({root:{color:e.palette.text.dim,"& .TableOfContentsRow-title":{borderBottom:"none"}},comment:{display:"inline-flex"},commentKarma:{width:20,textAlign:"right",marginRight:4},collapseButtonWrapper:{marginLeft:4,height:24},collapseButton:{"&:hover":{background:e.palette.greyAlpha(.1),borderRadius:8}},collapseButtonExpanded:{},collapseButtonCollapsed:{transform:"rotate(-90deg)"},postTitle:{minHeight:76,paddingTop:16,...e.typography.body2,...e.typography.postStyle,...e.typography.smallCaps,cursor:"pointer",fontSize:"1.3rem",paddingBottom:16,display:"flex",alignItems:"center"},tocPostedAt:{color:e.palette.link.tocLink},highlightUnread:{paddingLeft:4,marginLeft:-7,borderLeft:"solid 3px ".concat(e.palette.secondary.main)},"@global":{["body:has(.headroom--pinned) .".concat(ob,", body:has(.headroom--unfixed) .").concat(ob)]:{opacity:0}}})),oC=e=>{var t;let{post:n}=e,o=(0,M.useStyles)(ow),[i,r]=(0,a.useState)(!1),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=l.current;if(e){let t=new IntersectionObserver(e=>{let[t]=e;r(t.intersectionRatio<1)},{threshold:[1]});return t.observe(e),()=>t.unobserve(e)}},[]),(0,s.jsx)("a",{id:"comments-table-of-contents",href:"#",className:(0,f.default)(o.postTitle,{[ob]:i}),onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},ref:l,children:null==(t=n.title)?void 0:t.trim()})},oj=e=>{let{commentTree:t,indentLevel:n,highlightedCommentId:o,highlightDate:i}=e,a=(0,M.useStyles)(ow),r=(0,e4.useNavigate)(),{query:l,location:d}=(0,e4.useLocation)(),c=t.item,m=(0,g.isAF)()?c.afBaseScore:c.baseScore;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.default,{indentLevel:n,highlighted:o===c._id,dense:!0,href:"#"+c._id,onClick:e=>{let t=(0,ox.getLandmarkY)((0,ox.commentIdToLandmark)(c._id));if(t){let e=t+window.scrollY-(0,ox.getCurrentSectionMark)()+1;window.scrollTo({top:e,behavior:"smooth"})}delete l.commentId,r({...d,search:(0,j.default)(l)?"":"?".concat(S.default.stringify(l)),hash:"#".concat(c._id)},{skipRouter:!0}),e.stopPropagation(),e.preventDefault()},children:(0,s.jsxs)("span",{className:(0,f.default)(a.comment,{[a.highlightUnread]:i&&new Date(c.postedAt)>new Date(i)}),children:[(0,s.jsx)("span",{className:a.commentKarma,children:m}),(0,s.jsx)(oS,{comment:c})]})}),t.children.map(e=>(0,s.jsx)(oj,{highlightedCommentId:o,highlightDate:i,commentTree:e,indentLevel:n+1},e.item._id))]})};function oS(e){let{comment:t}=e;return t.deleted?(0,s.jsx)("span",{children:"[comment deleted]"}):t.hideAuthor||!t.user||t.user.deleted?(0,s.jsx)("span",{children:"[anonymous]"}):(0,s.jsx)(Z.default,{user:t.user,simple:!0})}let ok=(0,r.registerComponent)("CommentsTableOfContents",e=>{let{commentTree:t,answersTree:n,post:o,highlightDate:i}=e,a=(0,M.useStyles)(ow),r=function(e){let t=[];for(let n of e)!function e(n){for(let o of(n.item&&t.push(n.item),n.children))e(o)}(n);return t}([...null!=n?n:[],...null!=t?t:[]]),{landmarkName:l}=(0,of.useScrollHighlight)(r.map(e=>(0,ox.commentIdToLandmark)(e._id)));return 0!==r.length&&(0,x.commentsTableOfContentsEnabled)()?(0,s.jsxs)("div",{className:a.root,children:[(0,s.jsx)(oC,{post:o}),n&&n.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(oj,{commentTree:e,indentLevel:1,highlightedCommentId:l,highlightDate:i},e.item._id),(0,s.jsx)(oy.default,{})]})),t&&t.map(e=>(0,s.jsx)(oj,{commentTree:e,indentLevel:1,highlightDate:i,highlightedCommentId:l},e.item._id))]}):null},{areEqual:"auto"});var oI=e.i(61530),oN=e.i(84377),oT=e.i(130697);let oP=()=>{let e=(0,c.useCurrentUser)(),t=(0,oN.useUpdateCurrentUser)(),n=(0,a.useRef)(null),o=(0,oT.getBrowserLocalStorage)(),[i,s]=(0,a.useState)(!e&&(null==o?void 0:o.getItem("hideHomeDigestAd"))||(null==e?void 0:e.subscribedToDigest)||(null==e?void 0:e.hideSubscribePoke)),[r,l]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),{flash:p}=(0,te.useMessages)(),{captureEvent:h}=(0,u.useTracking)(),g=!e||!(0,nu.userHasEmailAddress)(e),f=(0,a.useCallback)(()=>{s(!0),h("digestAdClosed"),e?t({hideSubscribePoke:!0}):null==o||o.setItem("hideHomeDigestAd","true")},[s,h,e,t,o]),y=(0,a.useCallback)(async()=>{var i;if(l(!0),m(!0),h("digestAdSubscribed"),e)try{await t({subscribedToDigest:!0})}catch(e){m(!1),p("There was a problem subscribing you to the digest. Please try again later.")}g&&(null==(i=n.current)?void 0:i.value)&&(null==o||o.setItem("hideHomeDigestAd","true")),l(!1)},[l,m,h,e,t,p,g,o]);return(0,x.hasDigests)()&&(e||o)&&(!i||d)?{showDigestAd:!0,emailRef:n,showForm:g,loading:r,subscribeClicked:d,handleClose:f,handleUserSubscribe:y}:{showDigestAd:!1}};var oA=e.i(81500);let oB="Sign up for the weekly EA Forum Digest",oR="A curated reading list of Forum posts, every Wednesday";(0,r.registerComponent)("SidebarDigestAd",e=>{var t;let{className:n,classes:o}=e,i=(0,c.useCurrentUser)(),{showDigestAd:a,emailRef:r,showForm:l,loading:d,subscribeClicked:m,handleClose:p,handleUserSubscribe:h}=oP();if(!a)return null;let g=d?{disabled:!0}:{},x=(0,s.jsx)(E.default,{icon:"ArrowRight",className:o.formBtnArrow}),y=l||!i?(0,s.jsxs)("form",{action:oI.eaForumDigestSubscribeURL,method:"post",className:o.form,children:[(0,s.jsx)("input",{ref:r,name:"EMAIL",placeholder:"Email address",className:o.formInput,required:!0}),(0,s.jsx)(oA.default,{type:"submit",onClick:h,className:o.formBtn,...g,children:x})]}):(0,s.jsxs)("div",{className:o.form,children:[(0,s.jsx)("input",{value:null!=(t=i.email)?t:void 0,className:o.formInput,disabled:!0,required:!0}),(0,s.jsx)(oA.default,{onClick:h,className:o.formBtn,...g,children:x})]});return!l&&m&&(y=(0,s.jsxs)("div",{className:o.success,children:[(0,s.jsx)(E.default,{icon:"CheckCircle",className:o.successCheckIcon}),(0,s.jsxs)("div",{children:["Thanks for signing up! You can edit your subscription via your ",(0,s.jsx)(ea.Link,{to:"/account?highlightField=subscribedToDigest",className:o.successLink,children:"account settings"}),"."]})]})),(0,s.jsx)(u.AnalyticsContext,{pageSubSectionContext:"digestAd",children:(0,s.jsx)(n8.default,{eventProps:{inViewType:"sidebarDigestAd"},children:(0,s.jsxs)("div",{className:(0,f.default)(o.root,n),children:[(0,s.jsxs)("div",{className:o.headingRow,children:[(0,s.jsx)("h2",{className:o.heading,children:oB}),(0,s.jsx)(E.default,{icon:"Close",className:o.close,onClick:p})]}),(0,s.jsx)("div",{className:o.body,children:oR}),y]})})})},{styles:e=>({root:{backgroundColor:e.palette.grey[200],fontSize:13,fontWeight:450,fontFamily:e.typography.fontFamily,padding:"12px 16px",borderRadius:e.borderRadius.default},headingRow:{display:"flex",justifyContent:"space-between",columnGap:8,marginBottom:12},heading:{fontWeight:600,fontSize:16,margin:0},close:{height:16,width:16,color:e.palette.grey[600],cursor:"pointer","&:hover":{color:e.palette.grey[800]}},body:{fontSize:13,lineHeight:"19px",fontWeight:500,color:e.palette.grey[600],textWrap:"pretty",marginBottom:15},form:{flexGrow:1,display:"flex",columnGap:8,rowGap:"12px"},formInput:{minWidth:0,flex:"1 1 0",background:e.palette.grey[0],padding:11,borderRadius:e.borderRadius.default,border:e.palette.border.normal,"&:hover":{border:e.palette.border.slightlyIntense2},"&:focus":{border:"1px solid ".concat(e.palette.primary.main)}},formBtn:{flex:"none"},formBtnArrow:{fontSize:15},success:{display:"flex",alignItems:"center",columnGap:10,fontSize:13,lineHeight:"19px",color:e.palette.grey[800],textWrap:"pretty"},successCheckIcon:{color:e.palette.icon.greenCheckmark},successLink:{color:e.palette.primary.main}}),stylePriority:-1});var oL=e.i(714818);let oF=(0,O.defineStyles)("StickyDigestAd",e=>({"@keyframes digest-fade-in":{"0%":{opacity:0},"100%":{opacity:1}},root:{animation:"digest-fade-in 1s ease",position:"fixed",bottom:28,left:"50%",transform:"translateX(-50%)",width:880,maxWidth:"85%",display:"flex",alignItems:"center",justifyContent:"space-between",columnGap:20,backgroundColor:e.palette.grey[900],color:e.palette.grey[0],fontSize:13,fontWeight:450,fontFamily:e.typography.fontFamily,padding:"16px 20px",borderRadius:e.borderRadius.default,zIndex:e.zIndexes.intercomButton,"@media (max-width: 1000px)":{display:"block",width:500,maxWidth:"90%"}},textCol:{flexGrow:1},heading:{fontWeight:600,fontSize:19,margin:"0 0 4px",[e.breakpoints.down("sm")]:{fontSize:18}},body:{fontSize:14,lineHeight:"20px",fontWeight:500,color:e.palette.grey[400],textWrap:"pretty",marginBottom:0,"@media (max-width: 1000px)":{fontSize:13,marginBottom:12}},form:{flexGrow:1,display:"flex",columnGap:4,rowGap:"8px",flexWrap:"wrap"},formInput:{minWidth:240,flex:"1 1 0",fontSize:14,background:e.palette.text.alwaysWhite,color:e.palette.text.alwaysBlack,padding:12,borderRadius:e.borderRadius.default,border:e.palette.border.grey800,"&:focus":{border:"1px solid ".concat(e.palette.primary.main),color:e.palette.text.alwaysBlack},"&::placeholder":{color:e.palette.grey[600]}},formBtns:{display:"flex",columnGap:4},formBtn:{flex:"none"},noThanksBtn:{background:e.palette.buttons.digestAdBannerNoThanks.background,color:e.palette.grey[0],"&:hover":{background:e.palette.buttons.digestAdBannerNoThanks.hoverBackground}},success:{display:"flex",alignItems:"center",columnGap:10,fontSize:13,lineHeight:"19px",color:e.palette.grey[400],textWrap:"pretty"},successCheckIcon:{color:e.palette.icon.greenCheckmark},successLink:{color:e.palette.primary.main}}),{stylePriority:-1}),o_=e=>{var t,n;let{className:o}=e,i=(0,M.useStyles)(oF),a=(0,c.useCurrentUser)(),{showDigestAd:r,emailRef:l,showForm:d,loading:m,subscribeClicked:p,handleClose:h,handleUserSubscribe:g}=oP(),x=(0,oT.getBrowserLocalStorage)(),y=parseInt(null!=(t=null==x?void 0:x.getItem("postReadCount"))?t:"0");if(!r||y<10)return null;let v=m?{disabled:!0}:{},b=(0,s.jsx)(oA.default,{onClick:h,className:(0,f.default)(i.formBtn,i.noThanksBtn),...v,children:"No thanks"}),w=d||!a?(0,s.jsxs)("form",{action:oI.eaForumDigestSubscribeURL,method:"post",className:i.form,children:[(0,s.jsx)("input",{ref:l,name:"EMAIL",placeholder:"Email address",className:i.formInput,required:!0}),(0,s.jsxs)("div",{className:i.formBtns,children:[(0,s.jsx)(oA.default,{type:"submit",onClick:g,className:i.formBtn,...v,children:"Sign up"}),b]})]}):(0,s.jsxs)("div",{className:i.form,children:[(0,s.jsx)("input",{value:null!=(n=a.email)?n:void 0,className:i.formInput,disabled:!0,required:!0}),(0,s.jsxs)("div",{className:i.formBtns,children:[(0,s.jsx)(oA.default,{onClick:g,className:i.formBtn,...v,children:"Sign up"}),b]})]});return!d&&p&&(w=(0,s.jsxs)("div",{className:i.success,children:[(0,s.jsx)(E.default,{icon:"CheckCircle",className:i.successCheckIcon}),(0,s.jsxs)("div",{children:["Thanks for signing up! You can edit your subscription via your ",(0,s.jsx)(ea.Link,{to:"/account?highlightField=subscribedToDigest",className:i.successLink,children:"account settings"}),"."]})]})),(0,s.jsx)(u.AnalyticsContext,{pageSubSectionContext:"digestAd",children:(0,s.jsx)(n8.default,{eventProps:{inViewType:"stickyDigestAd"},children:(0,s.jsxs)("div",{className:(0,f.default)(i.root,o),children:[(0,s.jsxs)("div",{className:i.textCol,children:[(0,s.jsx)("h2",{className:i.heading,children:oB}),(0,s.jsx)("div",{className:(0,f.default)(i.body),children:oR})]}),w]})})})},oW=e=>{let{post:t}=e,[n,o]=(0,a.useState)(!1),i=(0,oT.getBrowserLocalStorage)();(0,a.useEffect)(()=>{if(i&&(0,x.hasDigests)()){var e;let t=null!=(e=i.getItem("postReadCount"))?e:"0";i.setItem("postReadCount","".concat(parseInt(t)+1))}},[]),(0,a.useEffect)(()=>{if((0,g.isEAForum)()&&!oL.isServer&&!t.isEvent&&!t.question&&!t.shortform)return r(),window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[]);let r=()=>{o(e=>e||window.scrollY>1e3)};if(n)return(0,s.jsx)(o_,{})};var oM=e.i(712434),oO=e.i(229863);let oE=(0,r.registerComponent)("AttributionInViewTracker",e=>{let{eventProps:t,observerProps:n,children:o}=e,{setNode:i,entry:r}=(0,u.useIsInView)(n),[d,m]=(0,a.useState)(!1),p=(0,c.useCurrentUser)(),g=(0,oO.useClientId)(),f=(0,a.useCallback)(e=>oM.recombeeApi.createViewPortion(e),[]);return(0,a.useEffect)(()=>{var e;let n=null!=(e=null==p?void 0:p._id)?e:g;if(r&&n){let{isIntersecting:e,intersectionRatio:o}=r;if(!d&&e&&o>0&&h.recombeeEnabledSetting.get()){let{post:e,...o}=t;if((0,l.isRecombeeRecommendablePost)(e)){let t=e._id;f({...o,postId:t,timestamp:new Date,userId:n})}m(!0)}}},[r,f,d]),(0,s.jsx)("span",{ref:i,children:o})});var oD=e.i(249514),oH=e.i(963788),oU=e.i(174080),oz=a,oq=e.i(581298);function oV(e,t){return e+Math.random()*(t-e)}(t=o||(o={}))[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip",(n=i||(i={}))[n.Positive=1]="Positive",n[n.Negative=-1]="Negative";class oG{update(){let{gravity:e,wind:t,friction:n,opacity:s,drawShape:a}=this.getOptions();this.x+=this.vx,this.y+=this.vy,this.vy+=e,this.vx+=t,this.vx*=n,this.vy*=n,this.rotateY>=1&&this.rotationDirection===i.Positive?this.rotationDirection=i.Negative:this.rotateY<=-1&&this.rotationDirection===i.Negative&&(this.rotationDirection=i.Positive);let r=.1*this.rotationDirection;if(this.rotateY+=r,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&"function"==typeof a)a.call(this,this.context);else switch(this.shape){case o.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case o.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case o.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}constructor(e,t,n,o){this.getOptions=t;const{colors:s,initialVelocityX:a,initialVelocityY:r}=this.getOptions();this.context=e,this.x=n,this.y=o,this.w=oV(5,20),this.h=oV(5,20),this.radius=oV(5,10),this.vx="number"==typeof a?oV(-a,a):oV(a.min,a.max),this.vy="number"==typeof r?oV(-r,0):oV(r.min,r.max),this.shape=Math.floor(0+3*Math.random()),this.angle=oV(0,360)*Math.PI/180,this.angularSpin=oV(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=oV(0,1),this.rotationDirection=oV(0,1)?i.Positive:i.Negative}}class oQ{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenInitTime=Date.now(),this.particles=[],this.particlesGenerated=0,this.removeParticleAt=e=>{this.particles.splice(e,1)},this.getParticle=()=>{let e=oV(this.x,this.w+this.x),t=oV(this.y,this.h+this.y);return new oG(this.context,this.getOptions,e,t)},this.animate=()=>{let{canvas:e,context:t,particlesGenerated:n,lastNumberOfPieces:o}=this,{run:i,recycle:s,numberOfPieces:a,debug:r,tweenFunction:l,tweenDuration:d}=this.getOptions();if(!i)return!1;let c=this.particles.length,m=s?c:n,p=Date.now();if(m<a){o!==a&&(this.tweenInitTime=p,this.lastNumberOfPieces=a);let{tweenInitTime:e}=this,t=Math.round(l(p-e>d?d:Math.max(0,p-e),m,a,d)-m);for(let e=0;e<t;e++)this.particles.push(this.getParticle());this.particlesGenerated+=t}return r&&(t.font="12px sans-serif",t.fillStyle="#333",t.textAlign="right",t.fillText("Particles: ".concat(c),e.width-10,e.height-20)),this.particles.forEach((t,n)=>{t.update(),(t.y>e.height||t.y<-100||t.x>e.width+100||t.x<-100)&&(s&&m<=a?this.particles[n]=this.getParticle():this.removeParticleAt(n))}),c>0||m<a},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw Error("Could not get canvas context");this.context=n,this.getOptions=t}}let oY={width:"undefined"!=typeof window?window.innerWidth:300,height:"undefined"!=typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:oq.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class o${get options(){return this._options}set options(e){var t,n;let o=null==(t=this._options)?void 0:t.run,i=null==(n=this._options)?void 0:n.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"==typeof e.recycle&&e.recycle&&!1===i&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"==typeof e.run&&e.run&&!1===o&&this.update()}constructor(e,t){this.lastFrameTime=Date.now(),this.setOptionsWithDefaults=e=>{let t={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...t,...oY,...e},Object.assign(this,e.confettiSource)},this.update=()=>{let{options:{run:e,onConfettiComplete:t,frameRate:n},canvas:o,context:i}=this;if(n){let e=Date.now(),t=e-this.lastFrameTime;if(t<1e3/n){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=e-t%n}e&&(i.fillStyle="white",i.clearRect(0,0,o.width,o.height)),this.generator.animate()?this.rafId=requestAnimationFrame(this.update):(t&&"function"==typeof t&&this.generator.particlesGenerated>0&&t.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw Error("Could not get canvas context");this.context=n,this.generator=new oQ(this.canvas,()=>this.options),this.options=t,this.update()}}let oK=oz.default.createRef();class oX extends oz.default.Component{componentDidMount(){if(this.canvas.current){let e=oZ(this.props)[0];this.confetti=new o$(this.canvas.current,e)}}componentDidUpdate(){let e=oZ(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){let[e,t]=oZ(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return(0,s.jsx)("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:n})}constructor(e){super(e),this.canvas=oz.default.createRef(),this.canvas=e.canvasRef||oK}}function oZ(e){let t={},n={},o=[...Object.keys(oY),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(let s in e){let a=e[s];o.includes(s)?t[s]=a:i.includes(s)?i[s]=a:n[s]=a}return[t,n,{}]}oX.defaultProps={...oY},oX.displayName="ReactConfetti";let oJ=oz.default.forwardRef((e,t)=>(0,s.jsx)(oX,{canvasRef:t,...e})),o0=(0,r.registerComponent)("FundraisingThermometer",e=>{let t,n,o,{classes:i,onPost:r=!1}=e,l=h.lightconeFundraiserThermometerGoalAmount.get(),d=h.lightconeFundraiserThermometerGoal2Amount.get(),c=h.lightconeFundraiserThermometerGoal3Amount.get(),[m,p]=(t=(()=>{let{data:e}=(0,J.useQuery)((0,ee.gql)("\n    query Lightcone2024FundraiserStripeAmounts {\n      Lightcone2024FundraiserStripeAmounts\n    }\n  "),{ssr:!0});return Math.floor(((null==e?void 0:e.Lightcone2024FundraiserStripeAmounts)||[]).reduce((e,t)=>e+t,0)/100)})(),[Math.min((n=h.lightconeFundraiserUnsyncedAmount.get()+t)/c*100,100),n]),u=Math.min(p/l*100,100),g=p>l?Math.min((p-l)/(d-l)*100,100):0,x=p>d?Math.min((p-d)/(c-d)*100,100):0,y=new Date("2025-01-14T11:59:00Z"),v=(0,eF.useCurrentTime)(),b=y.getTime()-v.getTime(),w=b<=0,C=Math.ceil(b/864e5),j=Math.ceil(b/36e5),S=j<=72?"".concat(j," hours remaining"):"".concat(C," days remaining"),[k,I]=(0,a.useState)(!1),[N,T]=(0,a.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,f.default)(i.root,r&&i.onPost),children:[(0,s.jsxs)("div",{className:i.textContainer,children:[r?(0,s.jsx)("span",{className:(0,f.default)(i.header,{[i.hideHeaderOnMobile]:r}),children:"Fundraiser Progress"}):(0,s.jsx)(D.default,{title:"12,000 words about why you should give us money",placement:"top-start",children:(0,s.jsx)(ea.Link,{className:(0,f.default)(i.header,i.headerLinkIcon),to:"/posts/".concat(h.lightconeFundraiserPostId.get()),children:"Lightcone Infrastructure Fundraiser"})}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:i.goalTextBold,children:w?"Total raised:":"Goal ".concat(p<l?1:p<d?2:3,":")}),(0,s.jsxs)("span",{className:i.raisedGoalNumber,children:["$",Math.round(p).toLocaleString()]})," ",!w&&"of ".concat((p<l?l:p<d?d:c).toLocaleString())]})]}),(0,s.jsxs)("div",{className:i.thermometerContainer,style:{"--stage1Overlay":100-u,"--stage2Overlay":100-g,"--stage3Overlay":100-x},children:[(0,s.jsxs)("div",{className:(0,f.default)(i.backgroundSlider,p>l&&i.backgroundSliderAnimation),children:[(0,s.jsx)("div",{className:i.backgroundImage,style:{backgroundImage:"url(".concat(h.lightconeFundraiserThermometerBgUrl.get(),")")}}),(0,s.jsx)("div",{className:i.backgroundImage,style:{backgroundImage:"url(".concat("https://res.cloudinary.com/lesswrong-2-0/image/upload/f_auto,w_1530,h_200,c_limit/v1735085464/Fundraiser_2_wttlis.png",")")}}),(0,s.jsx)("div",{className:i.backgroundImage,style:{backgroundImage:"url(".concat("https://res.cloudinary.com/lesswrong-2-0/image/upload/f_auto,w_1530,h_200,c_limit/v1736822993/wgfexpdeikepryhu1und_uz6lap.png",")")}})]}),(0,s.jsx)("div",{className:i.fundraiserHeader,children:(0,s.jsx)(ea.Link,{className:i.fundraiserDonateText,to:"https://lightconeinfrastructure.com/donate",onMouseEnter:()=>{w?T(!0):j<=72&&(o=setTimeout(()=>{I(!0)},2e3))},onMouseLeave:()=>{clearTimeout(o),I(!1),T(!1)},children:(0,s.jsxs)("div",{className:i.fundraiserHeaderDonateButton,children:[w?"Fundraiser over":"Donate",(0,s.jsx)("div",{className:i.fundraiserHeaderRemainingDays,children:w?"(You can still donate though)":S})]})})}),u>0&&(0,s.jsx)("div",{className:(0,f.default)(i.blurredOverlay,i.blurredOverlayStage1)}),g>0&&(0,s.jsx)("div",{className:(0,f.default)(i.blurredOverlay,i.blurredOverlayStage2)}),x>0&&(0,s.jsx)("div",{className:(0,f.default)(i.blurredOverlay,i.blurredOverlayStage3)})]})]}),(0,s.jsx)(_.default,{ssr:!1,children:oL.isClient&&!w&&oU.default.createPortal((0,s.jsx)("div",{className:(0,f.default)(i.countdownOverlay,k&&i.countdownVisible),children:(0,s.jsxs)("div",{className:i.countdownText,children:[(0,s.jsx)("div",{children:"Dawn of"}),(0,s.jsx)("div",{children:"The Final Push"}),(0,s.jsxs)("div",{children:["-",j," Hours Remain-"]})]})}),document.body)}),oL.isClient&&w&&N&&(0,s.jsx)(oJ,{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%"},numberOfPieces:250,gravity:.25})]})},{styles:e=>({root:{"&:hover $header":{color:e.palette.review.winner,textShadow:"0px 0px 1px ".concat(e.palette.review.winner),"&:after":{border:"1px solid ".concat(e.palette.review.winner)}}},thermometerContainer:{width:"100%",aspectRatio:"765 / 100",position:"relative",borderRadius:"5px",overflow:"hidden",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",[e.breakpoints.down("xs")]:{aspectRatio:"300 / 40"},"--stage1Overlay":"100","--stage2Overlay":"100","--stage3Overlay":"100",animation:"backgroundChange 4s ease forwards"},blurredOverlay:{position:"absolute",top:0,right:0,bottom:0,backdropFilter:"blur(10px)"},blurredOverlayStage1:{width:"100%",animation:"fillStage1 1.3s ease forwards"},"@keyframes fillStage1":{"0%":{width:"100%"},"40%":{width:"100%"},"100%":{width:"calc(var(--stage1Overlay) * 1%)"}},blurredOverlayStage2:{width:"100%",animation:"fillStage2 1.3s ease forwards 1.3s",opacity:0},"@keyframes fillStage2":{"0%":{width:"100%",opacity:1},"40%":{width:"100%",opacity:1},"100%":{width:"calc(var(--stage2Overlay) * 1%)",opacity:1}},blurredOverlayStage3:{width:"100%",animation:"fillStage3 1.3s ease forwards 2.6s",opacity:0},"@keyframes fillStage3":{"0%":{width:"100%",opacity:1},"40%":{width:"100%",opacity:1},"100%":{width:"calc(var(--stage3Overlay) * 1%)",opacity:1}},onPost:{marginTop:-12},textContainer:{display:"flex",justifyContent:"space-between",width:"100%",fontFamily:e.typography.body2.fontFamily,fontSize:"1.2rem",paddingBottom:6,textShadow:"0px 0px 20px ".concat(e.palette.background.default,", 0px 0px 30px ").concat(e.palette.background.default,", 0px 0px 40px ").concat(e.palette.background.default,", 0px 0px 50px ").concat(e.palette.background.default),alignItems:"flex-end",backdropFilter:"blur(3px)",[e.breakpoints.down("xs")]:{flexDirection:"column",alignItems:"flex-start"}},header:{fontSize:"1.6rem",marginTop:0,marginBottom:0,fontFamily:e.typography.headerStyle.fontFamily,transition:"color 0.2s ease-in-out"},headerLinkIcon:{"&:after":{content:'""',width:4,height:4,background:e.palette.background.default,border:"1px solid ".concat(e.palette.grey[800]),display:"inline-block",position:"relative",marginLeft:2,borderRadius:"50%",top:-7}},hideHeaderOnMobile:{[e.breakpoints.down("xs")]:{display:"none"}},goalTextBold:{fontWeight:"bold",fontFamily:e.typography.headerStyle.fontFamily,marginRight:6},raisedGoalNumber:{color:e.palette.review.winner},fundraiserHeader:{display:"flex",justifyContent:"flex-end",alignItems:"center",color:e.palette.background.pageActiveAreaBackground,zIndex:10,position:"relative",width:"100%",height:"100%",padding:"0 24px",pointerEvents:"auto"},fundraiserDonateText:{"&:hover":{textDecoration:"none",opacity:"unset"}},fundraiserHeaderDonateButton:{textAlign:"center",padding:"10px 20px",borderRadius:"5px",marginRight:"3px",fontSize:"1.6rem",fontWeight:"bold",fontFamily:e.typography.headerStyle.fontFamily,color:e.palette.text.alwaysWhite,textShadow:"1px 1px 15px ".concat(e.palette.text.alwaysBlack),transition:"background 0.2s ease-in-out, color 0.2s ease-in-out","&:hover":{background:"".concat(e.palette.inverseGreyAlpha(.8)," !important"),boxShadow:"0px 0px 10px ".concat(e.palette.inverseGreyAlpha(.5)),color:e.palette.text.alwaysWhite},[e.breakpoints.down("xs")]:{color:e.palette.text.alwaysWhite}},fundraiserHeaderRemainingDays:{fontSize:"0.8rem",fontFamily:e.typography.commentStyle.fontFamily,color:e.palette.text.alwaysWhite},backgroundSlider:{position:"absolute",top:0,left:0,width:"300%",height:"100%",display:"flex"},backgroundSliderAnimation:{animation:"slideBackgrounds 3.9s ease forwards"},backgroundImage:{width:"33.333%",height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},"@keyframes slideBackgrounds":{"0%":{left:"0"},"33%":{left:"0"},"40%":{left:"-100%"},"66%":{left:"-100%"},"72%":{left:"-200%"},"100%":{left:"-200%"}},countdownOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:e.palette.text.alwaysBlack,zIndex:9999,opacity:0,visibility:"hidden",transition:"opacity 1s ease-in-out, visibility 1s ease-in-out",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:e.palette.text.alwaysWhite,pointerEvents:"none"},countdownVisible:{opacity:1,visibility:"visible"},countdownText:{fontFamily:e.typography.headerStyle.fontFamily,fontSize:"4rem",textAlign:"center","& > div:first-child":{fontSize:"2.5rem",marginBottom:"1rem"},"& > div:last-child":{fontSize:"3rem",color:e.palette.error.main}}})}),o1=(0,r.registerComponent)("PostFixedPositionToCHeading",e=>{var t;let{post:n,classes:o}=e,i=null==(t=n.contents)?void 0:t.wordCount,a=(0,s.jsxs)("div",{className:o.readTime,children:[n.readTimeMinutes," min read"]});return i?(0,s.jsx)(D.default,{title:"".concat(Number(i.toPrecision(2)).toLocaleString()," words"),children:a}):a},{styles:e=>({readTime:{marginLeft:12,marginBottom:12,fontFamily:e.palette.fonts.sansSerifStack,color:e.palette.greyAlpha(.5)}})});var o2=e.i(597464);let o5=(0,O.defineStyles)("ReadingProgressBar",e=>({readingProgressBar:{position:"fixed",top:0,height:4,width:"var(--scrollAmount)",background:e.palette.primary.main,"--scrollAmount":"0%",zIndex:e.zIndexes.commentBoxPopup,[e.breakpoints.down("sm")]:{marginLeft:-8,marginRight:-8}}})),o3=e=>{let{post:t}=e,n=(0,k.isBookUI)()||oL.isServer||t.isEvent||t.question||t.debate||t.shortform||t.readTimeMinutes<3,{readingProgressBarRef:o}=(0,o2.usePostReadProgress)({updateProgressBar:(e,t)=>e.style.setProperty("--scrollAmount","".concat(t,"%")),disabled:n,useFixedToCScrollCalculation:!1}),i=(0,M.useStyles)(o5);return(0,s.jsx)("div",{ref:o,className:i.readingProgressBar})};var o4=e.i(458017),o6=e.i(710007);let o8=[],o7=(0,O.defineStyles)("PostsPage",e=>({title:{marginBottom:32,[e.breakpoints.down("sm")]:{marginBottom:e.spacing.titleDividerSpacing}},titleWithMarket:{[e.breakpoints.down("sm")]:{marginBottom:35}},centralColumn:{marginLeft:"auto",marginRight:"auto",maxWidth:eB.CENTRAL_COLUMN_WIDTH,...e.isFriendlyUI&&{[e.breakpoints.down("sm")]:{maxWidth:"min(100%, ".concat(eB.CENTRAL_COLUMN_WIDTH,"px)")}}},postBody:{...e.isFriendlyUI&&{width:"100%"}},audioPlayerHidden:{"& .t3a-heading-play-button":{display:"none !important"}},postContent:{marginBottom:e.isFriendlyUI?40:void 0},betweenPostAndComments:{minHeight:24},recommendations:{maxWidth:eB.MAX_COLUMN_WIDTH,margin:"0 auto 40px"},commentsSection:{minHeight:(0,x.hasPostRecommendations)()?void 0:"calc(70vh - 100px)",[e.breakpoints.down("sm")]:{paddingRight:0,marginLeft:0},background:e.palette.background.pageActiveAreaBackground,position:"relative",paddingTop:e.isFriendlyUI?16:void 0},noCommentsPlaceholder:{marginTop:60,color:e.palette.grey[600],textAlign:"center",fontFamily:e.palette.fonts.sansSerifStack,fontWeight:500,fontSize:14,lineHeight:"1.6em"},headerImageContainer:{paddingBottom:15,[e.breakpoints.up("md")]:{marginTop:-e.spacing.mainLayoutPaddingTop},[e.breakpoints.down("sm")]:{marginTop:-12,marginLeft:-8,marginRight:-8},[e.breakpoints.down("xs")]:{marginTop:-10}},headerImageContainerWithComment:{[e.breakpoints.up("md")]:{marginTop:10},[e.breakpoints.down("sm")]:{marginTop:10},[e.breakpoints.down("xs")]:{marginTop:10}},headerImage:{width:"100vw",maxWidth:682},embeddedPlayer:{marginBottom:"30px"},hideEmbeddedPlayer:{display:"none"},welcomeBox:{marginTop:110,maxWidth:220,[e.breakpoints.down("md")]:{display:"none"}},bottomOfPostSubscribe:{marginBottom:40,marginTop:40,border:e.palette.border.commentBorder,borderRadius:5,display:"flex",justifyContent:"center"},splashHeaderImage:{position:"absolute",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw","@media print":{display:"none"}},reserveSpaceForSidenotes:{width:eB.RIGHT_COLUMN_WIDTH_WITH_SIDENOTES,[(0,eB.sidenotesHiddenBreakpoint)(e)]:{width:eB.RIGHT_COLUMN_WIDTH_WITHOUT_SIDENOTES,[e.breakpoints.down("xs")]:{width:eB.RIGHT_COLUMN_WIDTH_XS}}},reserveSpaceForIcons:{width:0,[e.breakpoints.up("xs")]:{width:eB.RIGHT_COLUMN_WIDTH_XS,[e.breakpoints.up("sm")]:{width:eB.RIGHT_COLUMN_WIDTH_WITHOUT_SIDENOTES}}},subscribeToGroup:{padding:"8px 16px",...e.typography.body2},dateAtBottom:{color:e.palette.text.dim3,fontSize:e.isFriendlyUI?void 0:e.typography.body2.fontSize,cursor:"default"},reviewVoting:{marginTop:60,marginBottom:-20}})),o9=(0,r.registerComponent)("PostsPage",e=>{var t,n,o,i,r,m,O,E,H,U,z,q,G,Q,Y,$,K,X,Z,ee,et,en,eo,ei,es,ea;let{fullPost:er,postPreload:el,refetch:ec,embedded:em}=e,ep=(0,M.useStyles)(o7),eu=null!=er?er:el,eh=(0,e4.useSubscribedLocation)(),eg=(0,e4.useNavigate)(),ef=(0,c.useCurrentUser)(),ex=(0,eF.useCurrentTime)(),{openDialog:ey}=(0,y.useDialog)(),{recordPostView:ev}=(0,p.useRecordPostView)(eu),[eb,ew]=(0,a.useState)((null==eu?void 0:eu.lastVisitedAt)?new Date(eu.lastVisitedAt):void 0),{currentForumEvent:eC}=(0,e6.useCurrentAndRecentForumEvents)(),{captureEvent:ej}=(0,u.useTracking)(),[eS,ek]=(0,b.useCookiesWithConsent)([w.SHOW_PODCAST_PLAYER_COOKIE]),{query:eN,params:eT}=eh,[eA,eW]=(0,a.useState)(),[eM,eO]=(0,a.useState)(),eE=(0,F.getVotingSystemByName)(eu.votingSystem||"default"),eD=(0,L.useVote)(eu,"Posts",eE),eH="true"===eS[w.SHOW_PODCAST_PLAYER_COOKIE],[eU,ez]=(0,a.useState)(eH),eq=(0,a.useCallback)(()=>{if(!eu||!(0,T.postHasAudioPlayer)(eu))return;let e=eU?"close":"open",t=eU?"false":"true";ej("toggleAudioPlayer",{action:e}),ek(w.SHOW_PODCAST_PLAYER_COOKIE,t,{path:"/"}),ez(!eU)},[eu,eU,ej,ek]),eV=()=>eT.sequenceId||(null==er?void 0:er.canonicalSequenceId)||null,eG="reviewWinner"in eu&&eu.reviewWinner,eQ=(0,g.isLWorAF)()&&!!eG&&!eT.sequenceId;(0,a.useEffect)(()=>{if(!eN[eB.SHARE_POPUP_QUERY_PARAM])return;er&&ey({name:"SharePostPopup",contents:e=>{let{onClose:t}=e;return(0,s.jsx)(ts,{onClose:t,post:er})},closeOnNavigate:!0});let e={...(0,j.default)(eN)?{}:eN,[eB.SHARE_POPUP_QUERY_PARAM]:void 0};eg({...eh.location,search:"?".concat(S.default.stringify(e))})},[eg,eh.location,ey,er,eN]);let eY=eN.answersSorting||"top",{data:e$}=(0,J.useQuery)(o6.CommentsListMultiQuery,{variables:{selector:{answersAndReplies:{postId:eu._id,sortBy:eY}},limit:1e4,enableTotal:!1},skip:!eu.question,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),eK=null==e$||null==(t=e$.comments)?void 0:t.results,eX=null!=(X=null==eK?void 0:eK.filter(e=>e.answer))?X:[],{data:eZ,refetch:eJ}=(0,J.useQuery)(o6.CommentsListMultiQuery,{variables:{selector:{debateResponses:{postId:eu._id}},limit:1e3,enableTotal:!1},skip:!eu.debate,notifyOnNetworkStatusChange:!0}),e0=null!=(Z=null==eZ||null==(n=eZ.comments)?void 0:n.results)?Z:o8,e1=(0,d.commentGetDefaultView)(eu,ef),{view:e2,limit:e5}=function(e,t,n){let o,i,s={includeAdminViews:null==e?void 0:e.isAdmin};if((0,C.isValidCommentView)(n.view,s)){let{view:e,limit:t}=n;o=e,i=(0,nC.returnIfValidNumber)(t)}else{let{view:e,limit:n}=t;o=e,i=n}return null!=i||(i=1e3),(0,a.useMemo)(()=>({view:o,limit:i}),[o,i])}(ef,{view:e1,limit:1e3},eN),{data:e8}=(0,J.useQuery)(o6.CommentsListMultiQuery,{variables:{selector:{[e2]:{postId:eu._id}},limit:e5,enableTotal:!1},skip:!eu.debate||!er,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),e7=null==e8||null==(o=e8.comments)?void 0:o.results;(0,a.useEffect)(()=>{let e=eN[eB.RECOMBEE_RECOMM_ID_QUERY_PARAM];if(ev({post:eu,extraEventProperties:{sequenceId:eV()},recommendationOptions:{recombeeOptions:{recommId:e}}}),!h.recombeeEnabledSetting.get())return;eW(e),eO(eM);let t=(0,j.default)(eN)?{}:eN;if(t[eB.RECOMBEE_RECOMM_ID_QUERY_PARAM]){let e={...t,[eB.RECOMBEE_RECOMM_ID_QUERY_PARAM]:void 0};eg({...eh.location,search:"?".concat(S.default.stringify(e))},{replace:!0})}},[eu._id]);let e9=!!(eN.revision&&eu.contents),te=eV(),tn=(0,B.useDynamicTableOfContents)({html:null!=(et=null!=(ee=null==eu||null==(i=eu.contents)?void 0:i.html)?ee:null==eu||null==(r=eu.contents)?void 0:r.htmlHighlight)?et:"",post:eu,answers:eX}),to=(null==tn?void 0:tn.html)||(null==er||null==(m=er.contents)?void 0:m.html)||(null==el||null==(O=el.contents)?void 0:O.htmlHighlight)||"",ti=(0,x.hasPostRecommendations)()&&!(null==ef?void 0:ef.hidePostsRecommendations)&&!eu.shortform&&!eu.draft&&!eu.question&&!eu.debate&&!eu.isEvent&&!te&&(null!=(en=null==(E=eu.contents)?void 0:E.wordCount)?en:0)>=500,{linkedCommentId:tr}=(0,eL.useCommentLinkState)(),tc=tr||eT.commentId,tm=er?(0,tt.getPostDescription)(er):null,tp=new Set((null!=e0?e0:[]).map(e=>e._id)),tu=null==e7?void 0:e7.filter(e=>e.topLevelCommentId&&tp.has(e.topLevelCommentId)),th=tc&&tp.has(tc);(0,a.useEffect)(()=>{if(th){let e="#debate-comment-".concat(tc);window.location.hash!==e&&eg({...eh.location,hash:"#debate-comment-".concat(tc)},{replace:!0})}},[th,tc]);let tg=eu.question&&(null==(H=eu.fmCrosspost)?void 0:H.isCrosspost)&&!(null==(U=eu.fmCrosspost)?void 0:U.hostedHere),tf=(0,A.getMarketInfo)(eu),{loading:tx,data:ty,networkStatus:tb,loadMoreProps:{loadMore:tw}}=(0,nV.useQueryWithLoadMore)(o6.postCommentsThreadQuery,{variables:{selector:{[e2]:{postId:eu._id}},limit:e5,enableTotal:!1},fetchPolicy:"cache-and-network"}),tC=null==ty||null==(z=ty.comments)?void 0:z.results,tj=tb===nq.NetworkStatus.fetchMore,tS=(0,a.useMemo)(()=>{if(!(0,g.isEAForum)()||!tC||"postCommentsMagic"!==e2)return tC;let e=tC.filter(e=>e.userId===(null==ef?void 0:ef._id)&&ex.getTime()-new Date(e.postedAt).getTime()<6e4).sort((e,t)=>new Date(t.postedAt).getTime()-new Date(e.postedAt).getTime());return e.length?[...e,...tC.filter(t=>!e.includes(t))]:tC},[e2,tC,null==ef?void 0:ef._id]),tk=null!=(eo=null==tS||null==(q=tS.filter(e=>(0,d.commentIncludedInCounts)(e)))?void 0:q.length)?eo:0,{commentCount:tN}=(0,l.getResponseCounts)({post:eu,answers:eX}),tT=(0,a.useMemo)(()=>(0,N.unflattenComments)(null!=tS?tS:[]),[tS]),tP=(0,a.useMemo)(()=>(0,N.unflattenComments)(null!=eK?eK:[]),[eK]),tF=eu.question?tP.length:void 0,t_=!!tn&&!tg,tW=t_?(0,g.isLWorAF)()?(0,s.jsx)(tE.default,{sectionData:tn,title:eu.title,heading:(0,s.jsx)(o1,{post:eu}),fixedPositionToc:!0}):(0,s.jsx)(tE.default,{sectionData:tn,title:eu.title,fixedPositionToc:!1}):null,tM=eh.hash.length>=1?eh.hash.slice(1):null,tU=(0,a.useMemo)(()=>tM&&!tx&&![...null!=tS?tS:[],...null!=eK?eK:[]].map(e=>{let{_id:t}=e;return t}).includes(tM),[eK,tM,tx,tS]),[tz,tq]=(0,a.useState)(er&&!th&&null!=tc?tc:null),tV=tz===tM;(0,a.useEffect)(()=>{th||(tc?tq(tc):tU?tq(tM):tq(null))},[er,tM,th,tc,tU]);let tG=er&&eQ&&(0,s.jsx)("div",{className:ep.splashHeaderImage,children:(0,s.jsx)(P.ImageProvider,{children:(0,s.jsx)(e3,{post:er})})}),tQ=(0,s.jsxs)(s.Fragment,{children:[er&&!tc&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o4.StructuredData,{generate:()=>(0,tt.getStructuredData)({post:er,description:tm,commentTree:tT,answersTree:tP})}),(0,s.jsx)(tl,{title:eu.title,author:null==(G=eu.user)?void 0:G.displayName,coauthors:null==(Q=eu.coauthors)?void 0:Q.map(e=>{let{displayName:t}=e;return t}),date:null!=(ei=eu.postedAt)?ei:void 0})]}),(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"postHeader",children:(0,s.jsx)("div",{className:(0,f.default)(ep.title,{[ep.titleWithMarket]:(0,A.highlightMarket)(tf)}),children:(0,s.jsxs)("div",{className:ep.centralColumn,children:[tz&&(0,s.jsx)(tR.default,{documentId:tz,post:null!=el?el:er,silentLoading:tV}),eu.eventImageId&&(0,s.jsx)("div",{className:(0,f.default)(ep.headerImageContainer,{[ep.headerImageContainerWithComment]:tz}),children:(0,s.jsx)(tH.default,{publicId:eu.eventImageId,imgProps:{ar:"191:100",w:"682",q:"100"},className:ep.headerImage})}),(0,k.isBookUI)()&&(0,s.jsx)(eR,{post:eu,showEmbeddedPlayer:eU,dialogueResponses:e0,answerCount:tF,toggleEmbeddedPlayer:eq,annualReviewMarketInfo:tf,showSplashPageHeader:eQ}),!(0,k.isBookUI)()&&(0,s.jsx)(td.default,{post:eu,answers:null!=eX?eX:[],showEmbeddedPlayer:eU,toggleEmbeddedPlayer:eq,dialogueResponses:e0,annualReviewMarketInfo:tf}),"5n2ZQcbc7r4R8mvqc"===eu._id&&(0,s.jsx)(o0,{onPost:!0})]})})})]}),tY=(0,s.jsx)(_.default,{ssr:!1,children:(0,s.jsx)("div",{className:ep.welcomeBox,children:(0,s.jsx)(tO,{})})}),t$=(tY||(0,x.hasSidenotes)()||ti&&false)&&(0,s.jsxs)(s.Fragment,{children:[tY,ti&&false,(0,x.hasSidenotes)()&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:ep.reserveSpaceForSidenotes}),(0,s.jsx)(ta.SideItemsSidebar,{})]})]}),tK=(0,a.useMemo)(()=>({fullPost:null!=er?er:null,postPreload:null!=el?el:null}),[er,el]);if((0,g.isAF)()&&!eu.af){let e="https://www.lesswrong.com"+eh.url;return(0,s.jsx)(ns.default,{url:e})}let tX=ef&&(0,l.isDialogueParticipant)(ef._id,eu),tZ=eu.collabEditorDialogue&&!tX,tJ=((null==eC?void 0:eC.tagId)&&null!=(es=null==eu||null==(Y=eu.tagRelevance)?void 0:Y[eC.tagId])?es:0)>=1,t0=(0,s.jsxs)("div",{id:"postBody",className:(0,f.default)(ep.centralColumn,ep.postBody,!eU&&ep.audioPlayerHidden),children:[(0,k.isBookUI)()&&tQ,er&&(0,g.isEAForum)()&&(0,s.jsx)(T.default,{showEmbeddedPlayer:eU,post:er}),er&&eu.isEvent&&er.activateRSVPs&&(0,s.jsx)(tD.default,{post:er}),!eu.debate&&(0,s.jsxs)(tI.default,{contentType:"post",className:(0,f.default)(ep.postContent,"instapaper_body"),children:[(0,s.jsx)(tB,{post:eu,query:eN}),(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"postBody",children:(0,s.jsx)(nv.default,{voteProps:eD,children:(0,s.jsx)(ni.CommentOnSelectionContentWrapper,{post:eu,children:(0,s.jsx)("div",{id:"postContent",children:to&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(no,{post:eu,html:to,isOldVersion:e9,voteProps:eD}),eu.isEvent&&(0,k.isBookUI)()&&(0,s.jsxs)("p",{className:ep.dateAtBottom,children:["Posted on: ",(0,s.jsx)(ed.default,{post:eu,hasMajorRevision:!1})]})]})})})})})]}),tZ&&(0,s.jsx)(n6.default,{justifyContent:"center",children:(0,s.jsx)("div",{className:ep.bottomOfPostSubscribe,children:(0,s.jsx)(n4.NotifyMeDropdownItem,{document:eu,enabled:!!eu.collabEditorDialogue,subscribeMessage:"Subscribe to dialogue",unsubscribeMessage:"Unsubscribe from dialogue",subscriptionType:I.subscriptionTypes.newPublishedDialogueMessages,tooltip:"Notifies you when there is new activity in the dialogue"})})}),eu.isEvent&&eu.group&&(0,k.isBookUI)()&&(0,s.jsx)(n6.default,{justifyContent:"center",children:(0,s.jsx)("div",{className:ep.bottomOfPostSubscribe,children:(0,s.jsx)(D.default,{title:(0,s.jsxs)("div",{children:["Subscribed users get emails for future events by",(0,s.jsx)("div",{children:null==($=eu.group)?void 0:$.name})]}),placement:"bottom",children:(0,s.jsx)(oH.default,{showIcon:!0,document:eu.group,subscribeMessage:"Subscribe to group",unsubscribeMessage:"Unsubscribe from group",className:ep.subscribeToGroup})})})}),eu.debate&&e0&&tu&&er&&(0,s.jsx)(nj,{debateResponses:e0.map(e=>({comment:e,replies:tu.filter(t=>t.topLevelCommentId===e._id)})),post:er})]}),t1=(0,s.jsxs)("div",{className:(0,f.default)(ep.centralColumn,ep.betweenPostAndComments),children:[(0,e_.reviewIsActive)()&&(0,e_.postEligibleForReview)(eu)&&"RESULTS"!==(0,e_.getReviewPhase)()&&(0,s.jsx)("div",{className:ep.reviewVoting,children:(0,s.jsx)(tA,{post:eu})}),(0,s.jsx)(tv,{post:eu,sequenceId:te}),tJ&&(0,s.jsx)(_.default,{ssr:!1,children:(0,s.jsx)(oD.default,{postId:eu._id})}),ti&&true&&(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"postBottomRecommendations",children:(0,s.jsx)("div",{className:ep.recommendations,children:(0,s.jsx)(n_,{strategy:"tagWeightedCollabFilter"})})})]}),t2=(0,s.jsx)(n8.default,{eventProps:{inViewType:"commentsSection"},children:(0,s.jsxs)(oE,{eventProps:{post:eu,portion:1,recommId:eA},children:[eu.question&&(0,s.jsxs)("div",{className:ep.centralColumn,children:[(0,s.jsx)("div",{id:"answers"}),er&&(0,s.jsx)(u.AnalyticsContext,{pageSectionContext:"answersSection",children:(0,s.jsx)(op,{post:er,answersTree:null!=tP?tP:[],refetch:ec})})]}),(0,s.jsxs)("div",{className:ep.commentsSection,children:[(0,s.jsxs)(u.AnalyticsContext,{pageSectionContext:"commentsSection",children:[er&&(0,s.jsx)(og.default,{comments:null!=tS?tS:[],loadMoreComments:tw,totalComments:tN,commentCount:tk,loadingMoreComments:tj,loading:tx,post:er,newForm:!eu.question&&(!eu.shortform||eu.userId===(null==ef?void 0:ef._id)),highlightDate:null!=eb?eb:void 0,setHighlightDate:ew}),(0,g.isAF)()&&(0,s.jsx)(oh,{post:eu})]}),(0,k.isFriendlyUI)()&&1>Math.max(eu.commentCount,null!=(ea=null==tS?void 0:tS.length)?ea:0)&&(0,s.jsxs)("div",{className:ep.noCommentsPlaceholder,children:[(0,s.jsx)("div",{children:"No comments on this post yet."}),(0,s.jsx)("div",{children:"Be the first to respond."})]})]})]})}),t5=er?(0,s.jsx)(ok,{commentTree:tT,answersTree:tP,post:er,highlightDate:null!=eb?eb:void 0}):void 0;return(0,s.jsx)(u.AnalyticsContext,{pageContext:"postsPage",postId:eu._id,children:(0,s.jsxs)(v.PostsPageContext.Provider,{value:tK,children:[(0,s.jsx)(R.RecombeeRecommendationsContextWrapper,{postId:eu._id,recommId:eA,children:(0,s.jsx)(ta.SideItemsContainer,{children:(0,s.jsx)(P.ImageProvider,{children:(0,s.jsxs)(W.SideItemVisibilityContextProvider,{post:er,children:[(0,s.jsx)(o3,{post:eu}),tG,(0,x.commentsTableOfContentsEnabled)()?(0,s.jsx)(eI.default,{segments:[{toc:((null==(K=eu.contents)?void 0:K.wordCount)||0)>300&&tW,centralColumn:t0,rightColumn:t$},{centralColumn:t1},{toc:t5,centralColumn:t2,isCommentToC:!0},{centralColumn:(0,s.jsx)(n3,{post:eu,hasTableOfContents:t_})}],tocRowMap:[0,0,2,2],showSplashPageHeader:eQ,sharedToCFooter:(0,s.jsx)(eP,{answerCount:tF,commentCount:tk}),embedded:em}):(0,s.jsxs)(tL.default,{tableOfContents:tW,header:tQ,rightColumnChildren:t$,children:[t0,t1,t2]}),(0,g.isEAForum)()&&(0,s.jsx)(_.default,{ssr:!1,children:(0,s.jsx)(oW,{post:eu})}),(0,x.hasPostRecommendations)()&&er&&(0,s.jsx)(n8.default,{eventProps:{inViewType:"postPageFooterRecommendations"},children:(0,s.jsx)(n3,{post:eu,hasTableOfContents:t_})})]})})})}),(0,s.jsx)(V,{})]})})},{hocs:[m.default],areEqual:"auto"});e.s(["default",0,o9,"styles",0,o7],333359)}]);

//# debugId=d9012e92-e111-4ac0-e11e-935162a3a4b9
//# sourceMappingURL=f280b16366440d6d.js.map
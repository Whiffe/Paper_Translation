;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="da157ffa-86db-b917-2314-0990ec11758a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,791111,e=>{"use strict";var t=e.i(843476),o=e.i(566721),n=e.i(552275),s=e.i(935132),r=e.i(538794),i=e.i(2942),l=e.i(152302),a=e.i(946271);e.i(813868);var d=e.i(122756),m=e.i(239832),c=e.i(697724),u=e.i(738022),p=e.i(550391);let g=(0,d.gql)("\n  query CommentPermalink($documentId: String) {\n    comment(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...CommentWithRepliesFragment\n      }\n    }\n  }\n"),h=(0,r.registerComponent)("CommentPermalink",e=>{var r;let{documentId:d,post:h,silentLoading:f=!1,classes:y}=e,C="in-context"===n.commentPermalinkStyleSetting.get(),{data:v,loading:x,error:b,refetch:j}=(0,a.useQuery)(g,{variables:{documentId:d},skip:(0,i.isNotRandomId)(d)}),k=null==v||null==(r=v.comment)?void 0:r.result;if(f&&!k)return null;if(b||!k&&!x)return(0,t.jsx)("div",{children:"Comment not found"});if(x)return(0,t.jsx)(m.default,{});if(!k||!d)return null;if((0,o.commentIsHiddenPendingReview)(k)&&!k.rejected)return(0,t.jsxs)("div",{className:y.root,children:[(0,t.jsxs)("div",{className:y.permalinkLabel,children:["Comment Permalink",(0,t.jsx)("p",{children:"Error: Sorry, this comment is hidden"})]}),(0,s.isLWorAF)()&&(0,t.jsx)("div",{className:y.dividerMargins,children:(0,t.jsx)(c.default,{})})]});let S={treeOptions:{refetch:j,showPostTitle:!1},forceUnTruncated:!0,forceUnCollapsed:!0,noAutoScroll:!0};return h&&k.postId!==h._id?null:(0,t.jsxs)("div",{className:y.root,children:[(0,t.jsx)("div",{className:y.permalinkLabel,children:"Comment Permalink"}),(0,t.jsxs)("div",{children:[h?(0,t.jsx)(u.default,{post:h,comment:k,commentNodeProps:S},k._id):(0,t.jsx)(p.default,{comment:k,commentNodeProps:S,initialMaxChildren:5},k._id),(0,t.jsx)("div",{className:y.seeInContext,children:(0,t.jsx)("a",{href:"#".concat(d),onClick:e=>{C&&((0,l.scrollFocusOnElement)({id:k._id,options:{behavior:"smooth"}}),e.preventDefault())},children:"See in context"})})]}),(0,s.isLWorAF)()&&(0,t.jsx)("div",{className:y.dividerMargins,children:(0,t.jsx)(c.default,{})})]})},{styles:e=>({root:{...e.typography.body2,...e.typography.commentStyle,...e.isBookUI?{marginTop:64}:{}},dividerMargins:{marginTop:150,marginBottom:150},permalinkLabel:{color:e.palette.grey[600],marginBottom:2*e.spacing.unit,marginLeft:10,[e.breakpoints.down("md")]:{marginTop:2*e.spacing.unit}},seeInContext:{textAlign:"right",color:e.palette.lwTertiary.main,marginRight:10}})});e.s(["default",0,h])},462676,e=>{"use strict";var t=e.i(843476),o=e.i(271645),n=e.i(538794),s=e.i(161517),r=e.i(343794),i=e.i(915077);e.i(552275);var l=e.i(935132),a=e.i(977684);let d=(0,n.registerComponent)("T3AudioPlayer",e=>{let{classes:n,showEmbeddedPlayer:d,documentId:m,collectionName:c}=e,u=(0,o.useRef)(!1),p=(0,o.useRef)(null),{captureEvent:g}=(0,s.useTracking)(),h=e=>{u.current=e};(0,i.useEventListener)("blur",e=>{u.current&&g("clickInsidePodcastPlayer",{documentId:m,collectionName:c,playerType:"t3-audio"})});let{ready:f}=(0,a.useExternalScript)("https://embed.type3.audio/player.js",{defer:"true",type:"module","cross-origin":"anonymous"});return(0,t.jsx)("div",{ref:p,onMouseOver:()=>h(!0),onMouseOut:()=>h(!1),children:(0,t.jsx)("div",{className:(0,r.default)(n.embeddedPlayer,{[n.hideEmbeddedPlayer]:!d}),children:f&&((0,l.isEAForum)()?(0,t.jsx)("type-3-player",{analytics:"custom",sticky:"true","header-play-buttons":"true",title:""}):(0,t.jsx)("type-3-player",{sticky:"true",analytics:"custom"}))})})},{styles:e=>({embeddedPlayer:{marginBottom:"30px"},hideEmbeddedPlayer:{display:"none"}})});e.s(["default",0,d])},539958,e=>{"use strict";var t=e.i(299749),o=e.i(50270),n=e.i(100916),s=e.i(552275);class r{getRequestSchema(){return this.config.requestSchema}getResponseSchema(){return this.config.responseSchema}getPath(){return"/api/v2/crosspost/".concat(this.config.routeName)}getForeignPath(){let e=s.fmCrosspostBaseUrlSetting.get();if(!e)throw Error("Foreign crosspost base URL is not configured");return(0,n.combineUrls)(e,this.getPath())}async makeRequest(e){let{foreignRequest:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t?this.getForeignPath():this.getPath(),n=this.config.requestSchema.parse(e),s=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await s.json();if("string"==typeof(null==r?void 0:r.error))throw Error(r.error);return this.config.responseSchema.parse(r)}constructor(e){(0,t._)(this,"config",void 0),this.config=e}}new r({routeName:"crossposterDetails",requestSchema:o.z.object({userId:o.z.string().nonempty()}),responseSchema:o.z.object({displayName:o.z.string().nonempty(),slug:o.z.string().nonempty(),fmCrosspostUserId:o.z.string().nullable().optional()})});let i=new r({routeName:"crosspostDetails",requestSchema:o.z.object({postId:o.z.string().nonempty()}),responseSchema:o.z.object({canonicalLink:o.z.string().nonempty(),commentCount:o.z.number().int().gte(0)})}),l=new r({routeName:"generateToken",requestSchema:o.z.any(),responseSchema:o.z.object({token:o.z.string().nonempty()})});new r({routeName:"connectCrossposter",requestSchema:o.z.object({token:o.z.string().nonempty(),localUserId:o.z.string().nonempty()}),responseSchema:o.z.object({foreignUserId:o.z.string().nonempty(),localUserId:o.z.string().nonempty(),status:o.z.enum(["connected"])})}),new r({routeName:"unlinkCrossposter",requestSchema:o.z.object({token:o.z.string().nonempty()}),responseSchema:o.z.object({status:o.z.enum(["unlinked"])})}),new r({routeName:"crosspost",requestSchema:o.z.object({token:o.z.string().nonempty()}),responseSchema:o.z.object({postId:o.z.string().nonempty(),status:o.z.enum(["posted"])})}),new r({routeName:"updateCrosspost",requestSchema:o.z.object({token:o.z.string().nonempty()}),responseSchema:o.z.object({status:o.z.enum(["updated"])})}),e.s(["crosspostDetailsRoute",0,i,"generateTokenRoute",0,l])},749494,e=>{"use strict";var t=e.i(843476),o=e.i(271645),n=e.i(538794),s=e.i(688167),r=e.i(819131),i=e.i(343794),l=e.i(791434),a=e.i(725788),d=e.i(308544),m=e.i(727880),c=e.i(293958);let u=(0,n.registerComponent)("QuickTakesEntry",e=>{var n;let{currentUser:m,defaultExpanded:u=!1,defaultFocus:p=!1,submitButtonAtBottom:g=!1,className:h,successCallback:f,cancelCallback:y,classes:C}=e,v=(0,o.useRef)(null),{openDialog:x}=(0,a.useDialog)(),{onSignup:b}=(0,d.useLoginPopoverContext)(),[j,k]=(0,o.useState)(u),{frontpage:S,selectedTagIds:w}=(0,s.useQuickTakesTags)(),T=(0,o.useCallback)(async e=>{null==e||e.preventDefault(),k(!1),null==y||y()},[y]),I=(0,o.useRef)(!1),N=(0,o.useCallback)(()=>{j||(k(!0),I.current=!0)},[k,j]),P=(0,o.useCallback)(()=>{m||j&&!I.current||(I.current=!1,(0,l.isFriendlyUI)()?b():x({name:"LoginPopup",contents:e=>{let{onClose:o}=e;return(0,t.jsx)(c.default,{onClose:o})}}))},[m,x,b,j]);if((0,o.useEffect)(()=>{setTimeout(()=>{if(p&&v.current){var e;let t=v.current.querySelector('[contenteditable="true"]');null==t||null==(e=t.focus)||e.call(t)}},0)},[]),(null==m?void 0:m.markDownPostEditor)&&!g)return null;let F=!(null==m?void 0:m.reviewedByUserId)&&!(0,l.isFriendlyUI)();return(0,t.jsxs)("div",{className:(0,i.default)(C.root,h),ref:v,children:[j&&F&&(0,t.jsx)("div",{className:C.userNotApprovedMessage,children:"Quick Takes is an excellent place for your first contribution!"}),(0,t.jsx)("div",{className:(0,i.default)(C.commentEditor,{[C.collapsed]:!j}),onFocus:N,onClick:P,children:(0,t.jsx)(r.default,{interactionType:"reply",prefilledProps:{shortform:!0,shortformFrontpage:S,relevantTagIds:w},enableGuidelines:!1,className:(0,i.default)(C.commentForm,{[C.commentFormCollapsed]:!j}),cancelCallback:T,successCallback:f,overrideHintText:"Share exploratory, draft-stage, rough thoughts...",quickTakesSubmitButtonAtBottom:g},null!=(n=null==m?void 0:m._id)?n:"logged-out")})]})},{styles:e=>({root:{background:e.palette.panelBackground.default,border:"1px solid ".concat(e.palette.grey[200]),...e.isBookUI&&{background:e.palette.panelBackground.bannerAdTranslucentStrong,border:"none"},borderRadius:e.borderRadius.quickTakesEntry,fontFamily:e.palette.fonts.sansSerifStack},commentEditor:{"& .ck-placeholder":{marginTop:e.isFriendlyUI?"-3px !important":void 0,"&::before":{color:e.isFriendlyUI?e.palette.grey[600]:void 0,fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:500}}},collapsed:{height:40+2*(0,m.getCommentsNewFormPadding)(e),overflow:"hidden"},commentForm:{"& .form-input":{margin:0,minHeight:30},"& .ck.ck-editor__editable_inline":{border:"none !important"},"& .EditorTypeSelect-select":{display:"none"}},commentFormCollapsed:{"& .form-input":{height:40,overflow:"hidden",borderRadius:e.borderRadius.quickTakesEntry},"& .EditorFormComponent-commentEditorHeight":{minHeight:"unset"},"& .EditorFormComponent-commentEditorHeight .ck.ck-content":{minHeight:"unset"},"& .LocalStorageCheck-root":{display:"none"},"& .ck .ck-placeholder":{position:"unset"},"& .CommentSubmit-submitQuickTakes":{display:"none"}},userNotApprovedMessage:{background:"none",border:"none",padding:"10px 10px 0 10px",fontSize:14,color:e.palette.grey[600],fontStyle:"italic"}})});e.s(["default",0,u])},588086,e=>{"use strict";var t=e.i(791434);e.i(552275);var o=e.i(935132);let n=["postCommentsDeleted"],s=["postLWComments"],r=e=>["postCommentsMagic",(0,o.isAF)()?"afPostCommentsTop":"postCommentsTop","postCommentsNew","postCommentsOld","postCommentsRecentReplies",...(null==e?void 0:e.includeAdminViews)?n:[],...(0,o.isAF)()?s:[]];e.s(["getCommentViewOptions",0,e=>r(e).map(e=>{var o;return{value:e,label:null!=(o=({postCommentsMagic:(0,t.isFriendlyUI)()?"New & upvoted":"magic (new & upvoted)",postCommentsTop:(0,t.isFriendlyUI)()?"Top":"top scoring",postCommentsRecentReplies:(0,t.preferredHeadingCase)("latest reply"),afPostCommentsTop:(0,t.preferredHeadingCase)("top scoring"),postCommentsNew:(0,t.isFriendlyUI)()?"New":"newest",postCommentsOld:(0,t.isFriendlyUI)()?"Old":"oldest",postCommentsBest:(0,t.preferredHeadingCase)("highest karma"),postCommentsDeleted:(0,t.preferredHeadingCase)("deleted"),postLWComments:(0,t.preferredHeadingCase)("top scoring (include LW)")})[e])?o:e}}),"isValidCommentView",0,(e,t)=>r(t).includes(e)])},86378,907031,e=>{"use strict";var t=e.i(843476),o=e.i(538794),n=e.i(530841),s=e.i(820010),r=e.i(343794),i=e.i(552275),l=e.i(791434),a=e.i(472722);let d=(0,o.registerComponent)("CantCommentExplanation",e=>{var o;let{post:d,classes:m}=e,c=(0,n.useCurrentUser)(),u=null!=(o=d.user)?o:null,p=i.moderationEmail.get();return(0,l.isFriendlyUI)()&&d.shortform?null:(0,t.jsxs)("div",{className:(0,r.default)("i18n-message","author_has_banned_you",m.root),children:[c?(0,s.userIsBannedFromPost)(c,d,u)||(0,s.userIsBannedFromAllPosts)(c,d,u)?(0,t.jsx)(t.Fragment,{children:"This post's author has blocked you from commenting."}):(0,s.userIsBannedFromAllPersonalPosts)(c,d,u)?(0,t.jsx)(t.Fragment,{children:"This post's author has blocked you from commenting on any of their personal blog posts."}):(null==d?void 0:d.commentsLocked)?(0,t.jsx)(t.Fragment,{children:"Comments on this post are disabled."}):(null==d?void 0:d.commentsLockedToAccountsCreatedAfter)?(0,t.jsxs)(t.Fragment,{children:["Comments on this post are disabled to accounts created after ",(0,t.jsx)(a.default,{date:d.commentsLockedToAccountsCreatedAfter})]}):(null==d?void 0:d.shortform)&&(0,s.userIsNotShortformOwner)(c,d)?(0,t.jsx)(t.Fragment,{children:"Only the owner of a Quick Take's container can leave top-level comments on it."}):(0,t.jsx)(t.Fragment,{children:"You cannot comment at this time"}):(0,t.jsx)(t.Fragment,{children:"Can't recognize user"})," ",p&&(0,t.jsxs)("span",{children:["(Questions? Send an email to ",(0,t.jsx)("a",{className:m.emailLink,href:"mailto:".concat(p),children:p}),")"]})]})},{styles:e=>({root:{padding:"1em 0"},emailLink:{textDecoration:"underline !important","&:hover":{color:e.palette.link.dim}}})});e.s(["default",0,d],86378);var m=e.i(271645),c=e.i(539958),u=e.i(164783),p=e.i(716512),g=e.i(239832);let h=e=>{let{foreignPostId:o,hostedHere:n,classes:s}=e,[r,l]=(0,m.useState)({loading:!0});if((0,m.useEffect)(()=>{(async()=>{try{let e=await c.crosspostDetailsRoute.makeRequest({postId:o},{foreignRequest:!0});l({loading:!1,data:e})}catch(e){console.error("Error fetching foreign crosspost details:",e),l({loading:!1})}})()},[o]),r.loading)return(0,t.jsx)("div",{children:(0,t.jsx)(g.default,{})});if(!r.data)return null;let{canonicalLink:a,commentCount:d}=r.data,u=d?"Click to view ".concat(d," comment").concat(1===d?"":"s","."):"Click to view.";return(0,t.jsx)("div",{children:(0,t.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",children:(0,t.jsxs)(p.Typography,{variant:"body2",className:s.root,children:["Crossposted ",n?"to":"from"," ",i.fmCrosspostSiteNameSetting.get(),". ",u]})})})},f=(0,o.registerComponent)("PostsPageCrosspostComments",e=>{var o;let{classes:n}=e,s=(0,u.usePostsPageContext)(),r=null!=(o=null==s?void 0:s.fullPost)?o:null==s?void 0:s.postPreload;if(!(null==r?void 0:r.fmCrosspost))return null;let{hostedHere:i,foreignPostId:l}=r.fmCrosspost;return l?(0,t.jsx)(h,{foreignPostId:l,hostedHere:!!i,classes:n}):null},{styles:e=>({root:{display:"flex",alignItems:"center",margin:"0 auto 1.3em auto",border:e.palette.border.commentBorder,borderRadius:3,padding:12}})});e.s(["default",0,f],907031)},578108,329581,e=>{"use strict";var t=e.i(843476),o=e.i(538794),n=e.i(673991),s=e.i(566721),r=e.i(530841),i=e.i(644169),l=e.i(946217),a=e.i(819983),d=e.i(588086),m=e.i(937636);let c=(0,o.registerComponent)("CommentsViews",e=>{let{post:o,setRestoreScrollPos:c}=e,u=(0,r.useCurrentUser)(),p=(0,m.useNavigate)(),g=(0,m.useLocation)(),{query:h}=g,f=(null==h?void 0:h.view)||(0,s.commentGetDefaultView)(o||null,u),y=(0,n.userCanDo)(u,"comments.softRemove.all"),C=(0,d.getCommentViewOptions)({includeAdminViews:y}),v=C.find(e=>e.value===f)||C[0];return(0,t.jsx)(a.default,{options:C,selected:v,handleSelect:e=>{var t;let o,n,s=e.value,{query:r}=g,a={...(0,l.default)(r)?{view:"postCommentsTop"}:r,view:s,commentId:void 0};null==c||c(window.scrollY-(o=(null==(t=document.querySelector(".CommentPermalink-root"))?void 0:t.scrollHeight)||0,o+((n=document.querySelector(".CommentPermalink-dividerMargins"))?parseInt(getComputedStyle(n).marginBottom):0))),p({...g.location,search:"?".concat(i.default.stringify(a))})}})});e.s(["default",0,c],578108);var u=e.i(472722),p=e.i(239832),g=e.i(372593),h=e.i(944045),f=e.i(946271);e.i(813868);let y=(0,e.i(122756).gql)("\n  query multiLWEventLastVisitListQuery($selector: LWEventSelector, $limit: Int, $enableTotal: Boolean) {\n    lWEvents(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...lastEventFragment\n      }\n      totalCount\n    }\n  }\n"),C=(0,o.registerComponent)("LastVisitList",e=>{var o;let{postId:n,currentUser:s,clickCallback:r}=e,{data:i,loading:l}=(0,f.useQuery)(y,{variables:{selector:{postVisits:{postId:n,userId:s._id}},limit:20,enableTotal:!1},notifyOnNetworkStatusChange:!0}),a=null==i||null==(o=i.lWEvents)?void 0:o.results;if(l||!a)return(0,t.jsx)(p.default,{});let d=[];for(let e of a)d.length?new Date(d[d.length-1].createdAt).getTime()-new Date(e.createdAt).getTime()>12e4&&d.push(e):d.push(e);return d.length>4&&(d=d.slice(0,4)),(0,t.jsx)(t.Fragment,{children:d.map(e=>(0,t.jsxs)(g.MenuItem,{dense:!0,onClick:()=>r((0,h.maybeDate)(e.createdAt)),children:["Visit at:Â ",(0,t.jsx)(u.default,{date:e.createdAt})," "]},e._id))})});e.s(["default",0,C],329581)},732177,e=>{"use strict";var t=e.i(843476),o=e.i(271645),n=e.i(538794),s=e.i(70796),r=e.i(166540),i=e.i(820010),l=e.i(242021),a=e.i(530841),d=e.i(87154),m=e.i(343794),c=e.i(182584),u=e.i(819131),p=e.i(159211);e.i(552275);var g=e.i(935132),h=e.i(673991),f=e.i(791434),y=e.i(578108),C=e.i(239832),v=e.i(472722),x=e.i(329581),b=e.i(86378),j=e.i(110601),k=e.i(403276),S=e.i(907031),w=e.i(478386),T=e.i(756838),I=e.i(749494),N=e.i(437384);let P=(0,n.registerComponent)("CommentsListMeta",e=>{let{classes:o,children:n}=e;return(0,t.jsx)("div",{className:o.root,children:n})},{styles:e=>({root:{fontSize:14,clear:"both",marginTop:24,marginBottom:10,display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center",color:e.palette.grey[600]}})});var F=e.i(716512),E=e.i(372593),R=e.i(942262),z=e.i(703110),L=e.i(79732);let A=(0,e.i(429329).defineStyles)("CommentsListSection",e=>{var t;return{root:{fontWeight:null!=(t=e.typography.body1.fontWeight)?t:400,margin:"0px auto 15px auto",...e.typography.commentStyle,position:"relative"},maxWidthRoot:{maxWidth:720},commentsHeadline:{fontSize:24,lineHeight:"36px",fontWeight:600,marginBottom:16},commentCount:{color:e.palette.grey[600],marginLeft:10},commentSorting:{display:"inline",color:e.palette.text.secondary,marginRight:12},clickToHighlightNewSince:{display:"inline",color:e.palette.text.secondary,"@media print":{display:"none"}},button:{color:e.palette.lwTertiary.main},newComment:{border:e.palette.border.commentBorder,position:"relative",borderRadius:e.borderRadius.small,marginBottom:R.NEW_COMMENT_MARGIN_BOTTOM,"@media print":{display:"none"}},newQuickTake:{border:"none"},newCommentLabel:{paddingLeft:1.5*e.spacing.unit,...e.typography.commentStyle,...e.typography.body2,fontWeight:600,marginTop:12},newCommentSublabel:{paddingLeft:1.5*e.spacing.unit,...e.typography.commentStyle,color:e.palette.grey[600],marginTop:e.isFriendlyUI?8:4,fontStyle:"italic"}}});function U(e){let{post:n,commentCount:i,loadMoreCount:d,totalComments:m,loadMoreComments:u,loadingMoreComments:p,comments:h,highlightDate:b,hideDateHighlighting:j,setHighlightDate:k,setRestoreScrollPos:S}=e,w=(0,L.useStyles)(A),T=(0,a.useCurrentUser)(),I=b?h.filter(e=>new Date(e.postedAt).getTime()>new Date(b).getTime()).length:0,R=(0,s.useCurrentTime)(),[z,U]=(0,o.useState)(null),B=e=>{k(e),U(null)},q=[(0,r.default)(R).subtract(1,"day"),(0,r.default)(R).subtract(1,"week"),(0,r.default)(R).subtract(1,"month"),(0,r.default)(R).subtract(1,"year")],M=i+(d||i),D=i<m?(0,t.jsxs)("span",{children:["Rendering ",i,"/",m," comments, sorted by ",(0,t.jsx)(y.default,{post:n,setRestoreScrollPos:S}),p?(0,t.jsx)(C.default,{}):(0,t.jsx)("a",{onClick:()=>u(M),children:" (show more) "})]}):(0,t.jsxs)("span",{children:[(0,c.postGetCommentCountStr)(n,m),", sorted by ",(0,t.jsx)(y.default,{post:n,setRestoreScrollPos:S})]});(0,f.isFriendlyUI)()&&(D=(0,t.jsxs)(t.Fragment,{children:["Sorted by ",(0,t.jsx)(y.default,{post:n,setRestoreScrollPos:S})]}));let H=(0,g.isEAForum)()&&(null==n?void 0:n.shortform)?"quick takes":"comments";return(0,t.jsxs)(P,{children:[(0,t.jsx)(F.Typography,{variant:"body2",component:"span",className:w.commentSorting,children:D}),n&&!j&&(0,t.jsxs)(F.Typography,{variant:"body2",component:"span",className:w.clickToHighlightNewSince,children:[b&&I>0&&"Highlighting ".concat(I," new ").concat(H," since "),b&&!I&&"No new ".concat(H," since "),!b&&"Click to highlight new ".concat(H," since: "),(0,t.jsx)("a",{className:w.button,onClick:e=>{U(e.currentTarget)},children:(0,t.jsx)(v.default,{date:b||R})}),(0,t.jsxs)(l.Menu,{anchorEl:z,open:!!z,onClose:()=>{U(null)},children:[T&&n&&(0,t.jsx)(x.default,{postId:n._id,currentUser:T,clickCallback:B}),(0,t.jsx)(N.default,{}),q.map(e=>(0,t.jsx)(E.MenuItem,{onClick:()=>B(e.toDate()),children:e.calendar().toString()},e.toString()))]})]})]})}let B=(0,n.registerComponent)("CommentsListSection",e=>{var n;let{post:s,tag:r,commentCount:l,loadMoreCount:y,totalComments:C,loadMoreComments:v,loadingMoreComments:x,loading:N,comments:P,parentAnswerId:F,startThreadTruncated:E,newForm:R=!0,newFormProps:B={},highlightDate:q,hideDateHighlighting:M,setHighlightDate:D,treeOptions:H}=e,_=(0,L.useStyles)(A),O=(0,a.useCurrentUser)(),W=(0,o.useMemo)(()=>(0,d.unflattenComments)(P),[P]),[V,Q]=(0,o.useState)(-1);(0,o.useEffect)(()=>{-1!==V&&(window.scrollTo({top:V}),Q(-1))},[V]);let $=(null==s?void 0:s.user)||null,G=O&&(null==s?void 0:s.debate)&&(O._id===(null==$?void 0:$._id)||(0,c.userIsPostCoauthor)(O,s)),K=!!C&&(0,t.jsx)("span",{className:_.commentCount,children:C}),Y=(0,o.useMemo)(()=>({highlightDate:q,post:s,postPage:!0,showCollapseButtons:!0,tag:r,...H}),[q,s,r,H]);return(0,t.jsxs)("div",{className:(0,m.default)(_.root,{[_.maxWidthRoot]:!r}),children:[(0,t.jsx)("div",{id:"comments"}),(0,f.isFriendlyUI)()&&(R||!!C)&&!(null==s?void 0:s.shortform)&&(0,t.jsxs)("div",{className:_.commentsHeadline,children:["Comments",K]}),R&&(!O||!s||(0,i.userIsAllowedToComment)(O,s,$,!1))&&(!(null==s?void 0:s.draft)||G||(0,h.userIsAdmin)(O))&&(0,t.jsxs)("div",{id:"posts-thread-new-comment",className:(0,m.default)(_.newComment,{[_.newQuickTake]:(0,g.isEAForum)()&&(null==s?void 0:s.shortform)}),children:[!(0,g.isEAForum)()&&(0,t.jsx)("div",{className:_.newCommentLabel,children:(0,f.preferredHeadingCase)("New Comment")}),(null==s?void 0:s.isEvent)&&!!(null==(n=s.rsvps)?void 0:n.length)&&(0,t.jsx)("div",{className:_.newCommentSublabel,children:"Everyone who RSVP'd to this event will be notified."}),(0,g.isEAForum)()&&(null==s?void 0:s.shortform)?(0,t.jsx)(I.default,{currentUser:O}):(0,t.jsx)(u.default,{post:s,tag:r,prefilledProps:{parentAnswerId:F,...G?{debateResponse:!0}:{}},interactionType:"comment",...B,...G?{formProps:{post:s}}:{}})]}),O&&s&&!(0,i.userIsAllowedToComment)(O,s,$,!1)&&(0,t.jsx)(b.default,{post:s}),O&&s&&(0,t.jsx)(z.default,{userId:O._id,postId:s._id,initialLimit:1,showTotal:!0,silentIfEmpty:!0}),C?(0,t.jsx)(U,{post:s,commentCount:l,loadMoreCount:y,totalComments:C,loadMoreComments:v,loadingMoreComments:x,comments:P,highlightDate:q,hideDateHighlighting:M,setHighlightDate:D,setRestoreScrollPos:Q}):null,(0,t.jsx)(k.default,{treeOptions:Y,totalComments:C,comments:W,startThreadTruncated:E,parentAnswerId:F,loading:N}),(0,t.jsx)(S.default,{}),!(0,g.isEAForum)()&&(0,t.jsx)(T.default,{justifyContent:"flex-end",children:(0,t.jsx)(j.default,{title:"View deleted comments and banned users",children:(0,t.jsx)(p.Link,{to:"/moderation",children:(0,t.jsx)(w.default,{children:"Moderation Log"})})})})]})},{areEqual:"auto"});e.s(["default",0,B],732177)}]);

//# debugId=da157ffa-86db-b917-2314-0990ec11758a
//# sourceMappingURL=46ebcef78282187c.js.map